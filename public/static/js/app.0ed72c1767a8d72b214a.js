webpackJsonp([1],{"+JLG":function(e,t){},"+MmR":function(e,t){},"+vOy":function(e,t){},0:function(e,t){},"0Cp2":function(e,t){},"0PHO":function(e,t,s){"use strict";(function(e){var a=s("Xxa5"),i=s.n(a),r=s("exGp"),n=s.n(r),o=s("fZjL"),u=s.n(o),c=s("M4fF"),l=s.n(c),d=s("uLgv"),h=(s("dih4"),s("7+uW")),m=s("bOaz"),p=s("gA1u");h.default.component("ImageSwipe",m.a),t.a={name:"play",props:{userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},db:{type:Object,required:!0},dataset:{type:String,required:!0},study:{type:String,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0}},data:function(){return{startTime:null,status:"loading",sampleCounts:[],catchSampleCounts:[],userSeenSamples:[],userSeenCatchSamples:[],noData:!1,widgetPointer:null,widgetSummary:{},allowed:!1,playMode:"play",zoom:!1,feedback1:"",feedback2:"",blankImage:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/undraw_blank_canvas.svg?sanitize=true"}},watch:{widgetPointer:function(){var e=this,t="play"===this.playMode?this.dataset:this.dataset+"/catch";this.widgetPointer&&this.db.ref("datasets/"+t+"/sampleSummary").child(this.widgetPointer).once("value",function(t){e.widgetSummary=t.val()})}},mounted:function(){this.initSampleCounts(this.dataset),this.initCatchSampleCounts(this.dataset),this.initSeenSamples(this.dataset),this.initSeenCatchSamples(this.dataset)},components:{Flask:p.a},computed:{samplePriority:function(){return l.a.sortBy(this.sampleCounts,".value")},catchSamplePriority:function(){return l.a.sortBy(this.catchSampleCounts,".value")},completedTutorialRequirements:function(){var e=this,t=!0;return Object.hasOwn(this.config.datasets[this.dataset],"tutorials")&&u()(this.config.datasets[this.dataset].tutorials).forEach(function(s){if(e.config.datasets[e.dataset].tutorials[s]){var a="complete"===e.userData.tutorials[s];t=t&&a}}),t},neededTutorials:function(){var e=this,t=[];return Object.hasOwn(this.config.datasets[this.dataset],"tutorials")&&u()(this.config.datasets[this.dataset].tutorials).forEach(function(s){if(e.config.datasets[e.dataset].tutorials[s]){var a=!1;Object.hasOwn(e.userData,"tutorials")&&"complete"===e.userData.tutorials[s]&&(a=!0),a||t.push(s)}}),t}},methods:{initSampleCounts:function(e){var t=this;this.db.ref("datasets/"+e+"/sampleCounts").once("value",function(s){t.db.ref("datasets/"+e+"/flaggedSamples").once("value",function(e){var a=[];e.val()&&(a=u()(e.val()));var i=l.a.omit(s.val(),a);t.sampleCounts=l.a.map(i,function(e,t){return{".key":t,".value":e}}),t.sampleCounts.length?(t.startTime=new Date,t.setNextSampleId()):t.noData=!0})})},initCatchSampleCounts:function(e){var t=this;this.db.ref("datasets/"+e+"/catch/sampleCounts").once("value",function(e){var s=e.val();t.catchSampleCounts=l.a.map(s,function(e,t){return{".key":t,".value":0}})})},initSeenSamples:function(e){var t=this;this.db.ref("datasets/"+e+"/userSeenSamples").child(this.userInfo.displayName).once("value",function(e){t.userSeenSamples=l.a.map(e.val(),function(e,t){return{".key":t,".value":e}})})},initSeenCatchSamples:function(e){var t=this;this.db.ref("datasets/"+e+"/catch/userSeenSamples").child(this.userInfo.displayName).once("value",function(e){t.userSeenCatchSamples=l.a.map(e.val(),function(e,t){return{".key":t,".value":e}})})},shuffle:function(e){for(var t=e.length,s=void 0,a=void 0;0!==t;)a=Math.floor(Math.random()*t),s=e[t-=1],e[t]=e[a],e[a]=s;return e},sampleUserPriority:function(e){var t="catch"===e?this.userSeenCatchSamples:this.userSeenSamples,s="catch"===e?this.catchSamplePriority:this.samplePriority;if(this.userInfo){var a=void 0;if(t){var i=l.a.map(t,function(e){return e[".key"]});a=(a=l.a.filter(s,function(e){return i.indexOf(e[".key"])<0})).length?a:s}else a=s;if(a.length){var r=a[0][".value"],n=l.a.filter(a,function(e){return e[".value"]===r});if(a.length>1){var o=a[1][".value"],u=l.a.filter(a,function(e){return e[".value"]===o});return this.shuffle(n).concat(this.shuffle(u))}return this.shuffle(n)}return this.shuffle(s)}return null},sendWidgetResponse:function(e){var t="catch"===this.playMode?this.dataset+"/catch":this.dataset,s=new Date-this.startTime;this.sendVote(e,s,t);var a=this.$refs.widget.getSummary(e);this.updateScore(),this.updateRecentCatchTrials(e),this.updateSummary(a,t),this.updateCount(t),this.updateSeen(t),this.sendFeedback(),this.$route.query.s&&this.clearRouterQuery(),this.setNextSampleId()},setNextSampleId:function(){this.startTime=new Date;var t="";if(this.$route.query.s)t={".key":e.from(this.$route.query.s,"base64").toString("ascii")},this.playMode="play";else{Math.random()<this.config.catchTrials.frequency&&this.catchSampleCounts.length?this.playMode="catch":this.playMode="play";var s=this.sampleUserPriority(this.playMode);t=s.length>1&&s[0][".key"]===this.widgetPointer?s[1]:s[0]}t&&(this.widgetPointer=t[".key"])},sendVote:function(e,t,s){this.db.ref("datasets/"+s+"/votes").push({user:this.userInfo.displayName,sample:this.widgetPointer,response:e,time:t,datetime:Date.now()})},updateScore:function(){this.db.ref("users").child(this.userInfo.displayName).child("score").transaction(function(e){return(e||0)+1}),this.db.ref("users/"+this.userInfo.displayName+"/datasets/"+this.dataset+"/score").transaction(function(e){return(e||0)+1})},updateRecentCatchTrials:function(e){var t=this;"catch"===this.playMode&&this.db.ref("datasets/"+this.dataset+"/catch/sampleCounts/"+this.widgetPointer).once("value",function(s){var a=s.val(),i=1===e&&"pass"===a||0===e&&"fail"===a;t.db.ref("users/"+t.userInfo.displayName+"/datasets/"+t.dataset+"/catch").transaction(function(e){return t.recentCatchTrials(e,i)})})},recentCatchTrials:function(e,t){return e?(e.push(t),e.length>5&&e.shift(),e):[t]},updateSummary:function(e,t){this.db.ref("datasets/"+t+"/sampleSummary").child(this.widgetPointer).set(e)},updateCount:function(e){var t=this;"catch"!==this.playMode&&(this.db.ref("datasets/"+e+"/sampleCounts").child(this.widgetPointer).transaction(function(e){return(e||0)+1}),l.a.map(this.sampleCounts,function(e){e[".key"]===t.widgetPointer&&(e[".value"]+=1)}))},updateSeen:function(e){this.db.ref("datasets/"+e+"/userSeenSamples").child(this.userInfo.displayName).child(this.widgetPointer).transaction(function(e){return(e||0)+1}),this.userSeenSamples.push({".key":this.widgetPointer,".value":1})},sendFeedback:function(){var e=this;this.db.ref("users/"+this.userInfo.displayName+"/datasets/"+this.dataset).once("value",function(t){var s=t.val();if(s.score%100==0){var a=e.config.datasets[e.dataset].name;if(e.feedback1="You've swiped "+a+" images "+s.score+" times!",Object.hasOwn(s,"catch")){var i=0;s.catch.forEach(function(e){e&&(i+=1)});var r=i/s.catch.length;e.feedback2=r>.8?"You are swiping with high accuracy! Keep up the good work!":r>.6?"You are swiping well! Be sure to stay focused as you have missed a few images.":"Our metrics show you are swiping with low accuracy. Consider refreshing your knowledge with the tutorials."}e.$refs.userfeedback.show()}})},clearRouterQuery:function(){this.$router.push({name:"Home",query:{reroute:this.study+"/"+this.dataset+"/play"}})},routeTo:function(e){this.$router.push({name:e})}},beforeRouteEnter:function(e,t,s){var a=this;s(function(){var t=n()(i.a.mark(function t(s){var r,n,o,u,c,l,h,m,p,f,g,v,b,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._props.db.ref("config/studies/"+e.params.study+"/available").once("value");case 2:return r=t.sent,n=!r.val(),o=[],u=d.a.auth().currentUser,t.next=8,d.a.auth().currentUser.getIdTokenResult(!0);case 8:if(c=t.sent,l=c.claims.datasets[e.params.study],e.params.dataset===s.dataset){t.next=14;break}s.$router.push({name:"Home"}),t.next=30;break;case 14:if(!n){t.next=30;break}if(!s.globusToken.length){t.next=30;break}return h=u.email,t.next=19,s._props.getGlobusIdentities(s._props.globusToken);case 19:m=t.sent,p=m.identities,f=m.included.identity_providers,g=c.claims.org,v=!1,p.forEach(function(e){var t="";Object.hasOwn(e,"email")&&null!=e.email&&(t=e.email.toString()),t.toLowerCase()===h.toLowerCase()&&(v=!0)}),b=!1,y=!1,f.forEach(function(e){if(e.name===g){b=!0;var t=e.domains;p.forEach(function(e){var s="";Object.hasOwn(e,"email")&&null!=e.email&&(s=e.email),t.forEach(function(t){s.includes(t)&&"used"===e.status&&(y=!0)})})}}),0===p.length?o.push("noIdentities"):v?b?y||o.push("orgNotUsed"):o.push("noSwipesOrg"):o.push("noSwipesEmail"),o.length&&s.$router.push({name:"Restricted",query:{errors:o}});case 30:l&&(s.allowed=!0);case 31:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}())}}}).call(t,s("EuP9").Buffer)},"4Jbg":function(e,t){},"4ZIV":function(e,t){},"66ru":function(e,t){},"6YK/":function(e,t){},"7eEC":function(e,t){},"9M+g":function(e,t){},BFzo:function(e,t){},BWKC:function(e,t){},Bhxi:function(e,t){},ByQj:function(e,t){},"C+9v":function(e,t){},CxQc:function(e,t){e.exports={BRAINSTEM:{Category:"Brain Anatomy",Term:"Brainstem"},CEREBELLUM:{Category:"Brain Anatomy",Term:"Cerebellum"},"CEREBRAL CORTEX":{Category:"Brain Anatomy",Term:"Cereberal Cortex"},DURA:{Category:"Brain Anatomy",Term:"Dura"},"FRONTAL LOBE":{Category:"Brain Anatomy",Term:"Frontal Lobe"},"GRAY MATTER":{Category:"Brain Anatomy",Term:"Gray Matter"},"GREY MATTER":{Category:"Brain Anatomy",Term:"Grey Matter"},GYRI:{Category:"Brain Anatomy",Term:"Gyri"},GYRUS:{Category:"Brain Anatomy",Term:"Gyri"},"PREFRONTAL REGION":{Category:"Brain Anatomy",Term:"Prefrontal Region"},SKULL:{Category:"Brain Anatomy",Term:"Skull"},SULCI:{Category:"Brain Anatomy",Term:"Sulci"},SULCUS:{Category:"Brain Anatomy",Term:"Sulci"},"SUBCORTICAL REGIONS":{Category:"Brain Anatomy",Term:"Subcortical Regions"},"SUPERIOR PARIETAL":{Category:"Brain Anatomy",Term:"Superior Parietal"},"TEMPORAL LOBES":{Category:"Brain Anatomy",Term:"Temporal Lobe"},"TEMPORAL LOBE":{Category:"Brain Anatomy",Term:"Temporal Lobe"},"WHITE MATTER":{Category:"Brain Anatomy",Term:"White Matter"},"AXIAL PLANE":{Category:"Brain Anatomy",Term:"Axial Plane"},"ATLAS REGISTRATIONS":{Category:"Neuroimaging Terms",Term:"Registration"},"ATLAS REGISTRATION":{Category:"Neuroimaging Terms",Term:"Registration"},ATLAS:{Category:"Neuroimaging Terms",Term:"Atlas"},"ANATOMICAL DATA":{Category:"Neuroimaging Terms",Term:"Anatomical Image"},"CO-REGISTRATION":{Category:"Neuroimaging Terms",Term:"Registration"},"CORONAL PLANE":{Category:"Brain Anatomy",Term:"Coronal Plane"},"FMRI REGISTRATION":{Category:"Neuroimaging Terms",Term:"Registration"},FMRI:{Category:"Neuroimaging Terms",Term:"Functional MRI"},"IMAGE OVERLAY":{Category:"Neuroimaging Terms",Term:""},"SAGITTAL PLANE":{Category:"Brain Anatomy",Term:"Sagittal Plane"},"SURFACE DELINEATIONS":{Category:"Neuroimaging Terms",Term:"Surface Delineation"},"SURFACE DELINEATION":{Category:"Neuroimaging Terms",Term:"Surface Delineation"},DELINEATIONS:{Category:"Neuroimaging Terms",Term:"Surface Delineation"},DELINEATION:{Category:"Neuroimaging Terms",Term:"Surface Delineation"},"STRUCTURAL IMAGES":{Category:"Neuroimaging Terms",Term:"Anatomical Image"},"STRUCTURAL IMAGE":{Category:"Neuroimaging Terms",Term:"Anatomical Image"},"STRUCTURAL DATA":{Category:"Neuroimaging Terms",Term:"Anatomical Image"},"T1-WEIGHTED IMAGE":{Category:"Neuroimaging Terms",Term:"T1-Weighted Image"},"T1-WEIGHTED IMAGING":{Category:"Neuroimaging Terms",Term:"T1-Weighted Image"},"T1-WEIGHTED IMAGES":{Category:"Neuroimaging Terms",Term:"T1-Weighted Image"},T1:{Category:"Neuroimaging Terms",Term:"T1-Weighted Image"},"T2-WEIGHTED IMAGE":{Category:"Neuroimaging Terms",Term:"T2-Weighted Image"},T2:{Category:"Neuroimaging Terms",Term:"T2-Weighted Image"},"STRUCTURAL MRI":{Category:"Neuroimaging Terms",Term:"Structural MRI"},"FUNCTIONAL MRI":{Category:"Neuroimaging Terms",Term:"Functional MRI"},"FUNCTIONAL DATA":{Category:"Neuroimaging Terms",Term:"Functional Image"},"CEREBROSPINAL FLUID":{Category:"Brain Anatomy",Term:"Cerebrospinal Fluid"},CSF:{Category:"Brain Anatomy",Term:"Cerebrospinal Fluid"},DELINEATED:{Category:"Neuroimaging Terms",Term:"Surface Delineation"},REGISTERED:{Category:"Neuroimaging Terms",Term:"Registration"},"FUNCTIONAL REGISTRATIONS":{Category:"Neuroimaging Terms",Term:"Registration"},"FUNCTIONAL REGISTRATION":{Category:"Neuroimaging Terms",Term:"Registration"},"FIELD OF VIEW":{Category:"Neuroimaging Terms",Term:"Field Of View"},BOLD:{Category:"Neuroimaging Terms",Term:"BOLD"},MRI:{Category:"Neuroimaging Terms",Term:"Structural MRI"},"FUNCTIONAL CONNECTIVITY":{Category:"Neuroimaging Terms",Term:""},NETWORKS:{Category:"Neuroimaging Terms",Term:""},"IMAGING PIPELINE":{Category:"Neuroimaging Terms",Term:""},"FUNCTIONAL IMAGES":{Category:"Neuroimaging Terms",Term:"Functional Image"},"FUNCTIONAL IMAGE":{Category:"Neuroimaging Terms",Term:"Functional Image"},"ANATOMICAL IMAGES":{Category:"Neuroimaging Terms",Term:"Anatomical Image"},"ANATOMICAL IMAGE":{Category:"Neuroimaging Terms",Term:"Anatomical Image"},DELINEATE:{Category:"Neuroimaging Terms",Term:"Surface Delineation"},SAGITTAL:{Category:"Brain Anatomy",Term:"Sagittal Plane"},SLICES:{Category:"Neuroimaging Terms",Term:"Slice"},DWI:{Category:"Neuroimaging Terms",Term:"Diffusion Weighted Imaging"},"DIFFUSION WEIGHTED IMAGING":{Category:"Neuroimaging Terms",Term:"Diffusion Weighted Imaging"},"DIFFUSION WEIGHTED IMAGES":{Category:"Neuroimaging Terms",Term:"Diffusion Weighted Imaging"},"DIFFUSION WEIGHTED IMAGE":{Category:"Neuroimaging Terms",Term:"Diffusion Weighted Imaging"}}},D5Qn:function(e,t){},DLHS:function(e,t){},EA8V:function(e,t){},FflS:function(e,t){},Jmt5:function(e,t){},KZHh:function(e,t){},MlKH:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),i=s("uLgv"),r=(s("LDX9"),s("dih4"),s("mvHQ")),n=s.n(r),o=s("Xxa5"),u=s.n(o),c=s("exGp"),l=s.n(c),d=s("fZjL"),h=s.n(d),m=s("Tqaz"),p=s("1mcD"),f=s.n(p),g=(s("hZls"),s("M4fF")),v=s.n(g),b=(s("Jmt5"),s("9M+g"),s("feh2"),s("pyWk"),s("4Jbg"),s("+MmR"),void 0),y={bind:function(e,t,s){b=function(a){a.stopPropagation();var i=t.value,r=i.handler,n=i.exclude,o=!1;n.forEach(function(e){if(!o){var t=s.context.$refs[e];o=t.contains(a.target)}}),e.contains(a.target)||o||s.context[r]()},document.addEventListener("click",b),document.addEventListener("touchstart",b)},unbind:function(){document.removeEventListener("click",b),document.removeEventListener("touchstart",b)}},w={name:"SliderMenu",data:function(){return{isActive:!1,menuItems:[{path:"/",name:"Home"},{path:"/leaderboard",name:"Leaderboard"},{path:"/about",name:"About"}],showLearn:!1}},props:{userData:{type:Object,required:!0},loggedIn:{type:Boolean,required:!0}},methods:{onClose:function(){this.isActive=!1,this.showLearn=!1},toggleMenu:function(){this.isActive=!this.isActive,this.showLearn=!1},onClickLearn:function(){"complete"===this.userData.tutorials.basic?this.showLearn=!this.showLearn:this.$router.push({name:"Tutorial",params:{module:"basic"}})}},directives:{ClickOutside:y},watch:{$route:function(){this.isActive=!1}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"slider-menu"},[s("a",{ref:"slider-menu-toggle",staticClass:"slider-menu__toggle",on:{click:function(t){return e.toggleMenu()}}},[s("svg",{staticStyle:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linecap":"round"},attrs:{width:"31px",height:"22px",viewBox:"0 0 31 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/"}},[s("g",{attrs:{transform:"matrix(1,0,0,1,-26.8461,-27.8461)"}},[s("path",{staticStyle:{fill:"none",stroke:"rgb(100,0,0)","stroke-width":"2.5px"},attrs:{d:"M52,33L32,33M47,44L32,44"}})])])]),e._v(" "),e.isActive?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{exclude:["slider-menu-toggle"],handler:"onClose"},expression:"{exclude: ['slider-menu-toggle'], handler: 'onClose'}"}],staticClass:"slider-menu__drawer"},[s("ul",[e._l(e.menuItems,function(t){return s("li",{key:t.name},[s("router-link",{attrs:{to:t.path}},[e._v(e._s(t.name))])],1)}),e._v(" "),e.loggedIn?s("li",[s("a",{on:{click:e.onClickLearn}},[e._v("Learn")])]):e._e(),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showLearn,expression:"showLearn"}]},[s("router-link",{attrs:{to:"/tutorial-select"}},[e._v("Tutorials")])],1),e._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showLearn,expression:"showLearn"}]},[s("router-link",{attrs:{to:"/gallery"}},[e._v("Gallery")])],1)],2)]):e._e()])},staticRenderFns:[]};var C=s("VU/8")(w,_,!1,function(e){s("iGwl")},null,null).exports,S={name:"AccountMenu",data:function(){return{isActive:!1}},props:{loggedIn:{type:Boolean,required:!0},userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},notifications:{type:Object,required:!0}},computed:{notification:function(){var e=this,t=!1;return h()(this.notifications).forEach(function(s){t=t||e.notifications[s]}),t},profilePicURL:function(){var e="/static/profile_pics/kesh-profile-icon.svg";return this.userData.pic&&(e="/static/profile_pics/"+this.userData.pic+".svg"),e}},methods:{onClose:function(){this.isActive=!1},toggleMenu:function(){this.isActive=!this.isActive},onClickLogout:function(){this.$emit("logout")}},directives:{ClickOutside:y},watch:{$route:function(){this.isActive=!1}}},T={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"account-menu"},[e.loggedIn?s("div",{ref:"account-menu-toggle",on:{click:e.toggleMenu}},[s("div",{staticClass:"img-overlay-wrap"},[s("img",{staticClass:"avatar",attrs:{src:e.profilePicURL,alt:"Profile Avatar"}}),e._v(" "),s("img",{staticClass:"profile-frame",attrs:{src:"/static/profile-frame.svg"}})]),e._v(" "),s("div",{staticClass:"account-menu__user-information"},[s("span",{staticClass:"username"},[e._v(e._s(e.userInfo.displayName))]),e._v(" "),s("span",{staticClass:"user-score"},[e._v(e._s(e.userData.score))]),e._v(" "),s("span",{class:{notification:e.notification}})])]):s("ul",[s("li",[s("router-link",{staticClass:"nav__link",attrs:{to:"/login"}},[s("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e._v("\n        Login or Sign Up\n      ")])],1)]),e._v(" "),e.isActive?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{exclude:["account-menu-toggle"],handler:"onClose"},expression:"{exclude: ['account-menu-toggle'], handler: 'onClose'}"}],staticClass:"account-menu__dropdown"},[s("ul",[s("li",[s("router-link",{attrs:{to:"/profile"}},[e._v("\n        Profile\n        ")])],1),e._v(" "),s("li",[s("span",{on:{click:e.onClickLogout}},[e._v("Sign out")])])])]):e._e()])},staticRenderFns:[]};var k=s("VU/8")(S,T,!1,function(e){s("QohQ")},null,null).exports,A=s("gRE1"),D=s.n(A),M={name:"Footer",props:{dataset:{type:String,requred:!0},datasetPrivileges:{type:Object,required:!0},config:{type:Object,required:!0},userData:{type:Object,required:!0}},data:function(){return{menuItems:[{path:"/",name:"Home"},{path:"/leaderboard",name:"Leaderboard"},{path:"/about",name:"About"},{path:"/results",name:"Results"},{path:"/chats",name:"Chats"}],isAdmin:!1,loadingAdmin:!0,hoverLearn:!1}},mounted:function(){var e=this;i.a.auth().onAuthStateChanged(function(){e.loadingAdmin=!0,e.loadingLearn=!0,e.addAdminRoutes()})},created:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addAdminRoutes();case 2:case"end":return t.stop()}},t,e)}))()},methods:{addAdminRoutes:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.a.auth().currentUser?i.a.auth().currentUser.getIdTokenResult(!0).then(function(t){Object.hasOwn(t,"claims")&&(Object.hasOwn(t.claims,"admin")&&t.claims.admin&&(e.isAdmin=!0),Object.hasOwn(t.claims,"studyAdmin")&&D()(t.claims.studyAdmin).includes(!0)&&(e.isAdmin=!0))}):e.isAdmin=!1,e.loadingAdmin=!1;case 2:case"end":return t.stop()}},t,e)}))()},routeTo:function(e){var t={name:e};this.$router.push(t)}},computed:{completedTutorial:function(){var e=!1;return h()(this.userData).length&&Object.hasOwn(this.userData,"tutorials")&&Object.hasOwn(this.userData.tutorials,"basic")&&(e="complete"===this.userData.tutorials.basic),e}}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("footer",[s("div",{staticClass:"footer__container"},[e._m(0),e._v(" "),e.loadingAdmin?s("nav"):s("nav",[e.isAdmin?s("router-link",{staticClass:"nav__link",attrs:{to:"/admin"}},[e._v("\n        Admin\n      ")]):e._e(),e._v(" "),e._l(e.menuItems,function(t){return s("router-link",{key:t.name,staticClass:"nav__link",attrs:{to:t.path}},[e._v(e._s(t.name))])}),e._v(" "),e.completedTutorial?s("div",{staticClass:"dropdown",on:{mouseover:function(t){e.hoverLearn=!0},mouseleave:function(t){e.hoverLearn=!1}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hoverLearn,expression:"hoverLearn"}]},[s("div",{staticClass:"dropdown-content"},[s("a",{staticClass:"nav__link",on:{click:function(t){return e.routeTo("TutorialSelect")}}},[e._v("Tutorials")]),e._v(" "),s("a",{staticClass:"nav__link",on:{click:function(t){return e.routeTo("Gallery")}}},[e._v("Gallery")])])]),e._v(" "),s("a",{staticClass:"nav__link dropdown-button"},[e._v("Learn")])]):s("router-link",{staticClass:"nav__link",attrs:{to:"/tutorial/basic"}},[e._v("Learn")])],2)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"https://innovation.umn.edu/developmental-cognition-and-neuroimaging-lab/",target:"_blank"}},[t("img",{staticClass:"logo",attrs:{src:"/static/DCAN-logo.png",alt:"DCAN logo"}})])}]};var x=s("VU/8")(M,I,!1,function(e){s("jKtY")},"data-v-21687736",null).exports;a.default.use(f.a),a.default.use(m.a),window.firebase=i.a;var O={name:"app",data:function(){return{userInfo:{},dataset:"",study:"",db:i.a.database(),allUsers:[],showHeader:!1,datasetPrivileges:{},globusToken:"",definitionsAdded:{},config:{},loading:!0,notifications:{}}},mounted:function(){this.userInfo=i.a.auth().currentUser;var e=this;i.a.auth().onAuthStateChanged(function(t){e.userInfo=t||{}})},components:{Footer:x,SliderMenu:C,AccountMenu:k},firebase:function(){return{allUsers:{source:this.db.ref("/users/").orderByChild("score"),asObject:!0}}},computed:{userData:function(){var e=this,t={};return null==this.userInfo?t:h()(this.userInfo).length?(v.a.map(this.allUsers,function(s,a){a===e.userInfo.displayName&&((t=s)[".key"]=a,t.username=a)}),t):t},userIsDefined:function(){return null!=this.userInfo&&!!h()(this.userInfo).length}},methods:{logout:function(){var e=this;this.globusToken="",i.a.auth().signOut().then(function(){e.userInfo={},e.datasetPrivileges={},e.$router.replace({name:"Login"})})},setUser:function(e){this.userInfo=e||{}},setTutorial:function(e,t){this.db.ref("/users/"+this.userInfo.displayName+"/tutorials/"+e).set(t);var s="basic"===e?"Home":"TutorialSelect";this.$router.push({name:s})},updateDataset:function(e,t){this.dataset=e,this.study=t},getUserDatasets:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.a.auth().currentUser&&i.a.auth().currentUser.getIdTokenResult(!0).then(function(t){e.datasetPrivileges=t.claims.datasets,e.getNotifications()});case 1:case"end":return t.stop()}},t,e)}))()},updateDatasetPermissions:function(){this.getUserDatasets()},globusLogin:function(e){this.globusToken=e},getGlobusIdentities:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!e){t.next=9;break}return t.next=4,fetch("https://auth.globus.org/p/whoami?include=identity_provider",{headers:new Headers({Authorization:"Bearer "+e})});case 4:return i=t.sent,t.next=7,i.json();case 7:r=t.sent,a=r;case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}},s,t)}))()},markDefinitionsAdded:function(e){this.definitionsAdded[e]=!0},getConfig:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.db.ref("config").on("value",function(t){var s=t.val();e.config=s,e.loading=!1});case 1:case"end":return t.stop()}},t,e)}))()},getNotifications:function(){var e=this;h()(v.a.pickBy(this.datasetPrivileges,v.a.identity)).forEach(function(t){e.db.ref("datasets/"+t+"/chats/chats").on("value",function(s){var r=s.val(),n=v.a.reduce(r,function(e,t){return e=t.notify[i.a.auth().currentUser.displayName]||e},!1);a.default.set(e.notifications,t,n)})})},logToFirebase:function(e,t){var s={message:t,timestamp:Date.now(),username:this.userInfo.displayName};this.db.ref("log/"+e).push(n()(s))}},created:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUserDatasets();case 2:return t.next=4,e.getConfig();case 4:case"end":return t.stop()}},t,e)}))()}},L={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"navRoot"},[s("li",{staticClass:"navSection main-logo"},[s("router-link",{attrs:{to:"/"}},[s("img",{staticClass:"brainswipes-logo",attrs:{src:"/static/brainswipes-logo.svg",alt:"BrainSwipes logo"}})])],1),e._v(" "),s("li",{staticClass:"navSection mobile-menu"},[s("SliderMenu",{attrs:{userData:e.userData,loggedIn:e.userIsDefined}})],1),e._v(" "),s("li",{staticClass:"navSection account-details"},[s("AccountMenu",{attrs:{userInfo:e.userInfo,userData:e.userData,loggedIn:e.userIsDefined,notifications:e.notifications},on:{logout:e.logout}})],1),e._v(" "),s("li",{staticClass:"navSection desktop-menu"})])]),e._v(" "),e.loading?s("div"):s("div",{staticClass:"router"},[s("router-view",{key:e.$route.fullPath,attrs:{userInfo:e.userInfo,userData:e.userData,allUsers:e.allUsers,config:e.config,db:e.db,dataset:e.dataset,study:e.study,datasetPrivileges:e.datasetPrivileges,globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,definitionsAdded:e.definitionsAdded,notifications:e.notifications},on:{takenTutorial:e.setTutorial,changeDataset:e.updateDataset,changePermissions:e.updateDatasetPermissions,login:e.getUserDatasets,globusLogin:e.globusLogin,markDefinitionsAdded:e.markDefinitionsAdded}})],1)]),e._v(" "),s("div",{staticClass:"foot"},[s("Footer",{attrs:{config:e.config,dataset:e.dataset,study:e.study,datasetPrivileges:e.datasetPrivileges,userData:e.userData},on:{changeDataset:e.updateDataset}})],1)])},staticRenderFns:[]};var E=s("VU/8")(O,L,!1,function(e){s("ThbC")},null,null).exports,N=s("/ocq"),j={name:"about",data:function(){return{}},props:{config:{type:Object,required:!0}},methods:{routeToPromo:function(e){this.$router.push({name:"Promo",params:{study:e}})}},computed:{filteredDatasets:function(){return h()(this.config.studies).filter(function(e){return"TEST"!==e})}}},R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"about"}},[s("b-container",{staticClass:"about"},[s("h1",[e._v(" Who are we? ")]),e._v(" "),s("p",[e._v("\n        Brainswipes.us is run by the Developmental Cognition and Neuroimaging (DCAN) lab. Our work focuses on advancing the understanding of brain development in health and disease.\n      ")]),e._v(" "),s("p",[e._v("\n        We specialize in using a type of neuroimaging called resting state functional connectivity magnetic resonance imaging to study the brain across development (from infancy to aging), in different disorders (ADHD, autism, Parkinsonâ€™s Disease), and across different species (humans, non-human primates and rodents). We combine this technique with multiple other neuroimaging, behavioral and biological measures.\n      ")]),e._v(" "),s("h1",[e._v(" Why do we need this app? ")]),e._v(" "),s("p",[e._v("\n        Our research involves using large-scale neuroimaging datasets. We want to be sure that the data that we use and share with the broader community has undergone effective quality control. BrainSwipes leverages crowdsourcing to review and rate large amounts of data quickly, making our results more replicable and reliable. \n      ")]),e._v(" "),s("h1",[e._v(" Origin of Swipes For Science ")]),e._v(" "),s("p",[e._v("\n        SwipesForScience is an open source project that is easy to create and customizable to any dataset. Visit the "),s("a",{attrs:{href:"https://swipesforscience.org/",target:"_blank"}},[e._v("SwipesForScience website")]),e._v(" to learn more.\n      ")]),e._v(" "),s("h1",[e._v("Contact Us")]),e._v(" "),s("p",[e._v("If you have any questions please contact us at "),s("a",{attrs:{href:"mailto:dcanlab@umn.edu?subject=BrainSwipes",target:"_blank"}},[e._v("dcanlab@umn.edu")]),e._v("!")]),e._v(" "),s("p",[e._v("Found a bug or other issue with the app? Post a "),s("a",{attrs:{href:"https://github.com/DCAN-Labs/BrainSwipes/issues/new",target:"_blank"}},[e._v("GitHub issue.")])]),e._v(" "),s("h1",[e._v("Accessing Closed Studies")]),e._v(" "),s("p",[e._v("\n        Some studies are not open to the public. In order to access these you must sign the appropriate data use aggreement with the governing body for that study. If you believe you should have access to a study, fill out an access request form by following the link in your profile. BrainSwipes uses Globus authentication to authenticate users for these studies. See the "),s("a",{attrs:{href:"https://docs.globus.org/how-to/get-started/",target:"_blank"}},[e._v("Globus documentation")]),e._v(" on how to add an identity to your Globus account.\n      ")])]),e._v(" "),s("h1",[e._v("Current Studies")]),e._v(" "),s("p",[e._v("Choose a study to learn about")]),e._v(" "),s("div",{staticClass:"about-buttons"},e._l(e.filteredDatasets,function(t){return s("div",{key:t},[s("b-button",{staticClass:"btn-swipes",on:{click:function(s){return e.routeToPromo(t)}}},[e._v(e._s(t))])],1)}),0)],1)},staticRenderFns:[]};var U=s("VU/8")(j,R,!1,function(e){s("BFzo")},"data-v-fbfc2b98",null).exports,q={name:"admin",data:function(){return{fullAdmin:!1}},methods:{getUserRoles:function(){var e=this;return l()(u.a.mark(function t(){var s,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.auth().currentUser.getIdTokenResult(!0);case 2:s=t.sent,a=s.claims,e.fullAdmin=a.admin;case 5:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.getUserRoles()}},P={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"admin"}},[s("h1",[e._v(" Admin ")]),e._v(" "),s("b-container",{staticClass:"admin"},[s("p",{staticClass:"buttons mt-3"},[s("router-link",{staticClass:"btn btn-warning",attrs:{to:{name:"Users"}}},[e._v(" Manage Users ")]),e._v(" "),s("router-link",{staticClass:"btn btn-warning",attrs:{to:{name:"Visualization"}}},[e._v(" View Study Visualizations ")]),e._v(" "),s("router-link",{staticClass:"btn btn-warning",attrs:{to:{name:"AccessReview"}}},[e._v(" Review Access Requests ")]),e._v(" "),s("router-link",{staticClass:"btn btn-warning",attrs:{to:{name:"CatchTrials"}}},[e._v(" View Catch Trials ")]),e._v(" "),s("router-link",{staticClass:"btn btn-warning",attrs:{to:{name:"SampleView"}}},[e._v(" View Specific Samples ")]),e._v(" "),e.fullAdmin?s("router-link",{staticClass:"btn btn-warning",attrs:{to:{name:"Manifest"}}},[e._v("Manage Database")]):e._e()],1),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("See the BrainSwipes "),s("a",{attrs:{href:"https://brainswipes.readthedocs.io/",target:"blank"}},[e._v("readthedocs")]),e._v(" for information on administration of BrainSwipes.")])])],1)},staticRenderFns:[]};var z=s("VU/8")(q,P,!1,function(e){s("Bhxi")},"data-v-6e6390a8",null).exports,F=s("6qVS"),B=s.n(F),Q=s("TNY+"),G=new(s.n(Q).a)({client_id:"ec1482f4-69f6-435b-97b2-d243f39babb3",redirect_uri:"https://brainswipes.us/restricted",authorization_endpoint:"https://auth.globus.org/v2/oauth2/authorize",token_endpoint:"https://auth.globus.org/v2/oauth2/token",requested_scopes:"openid profile email"}),J={name:"globusauth",data:function(){return{authenticated:!1,errors:[],showErrors:!1,showAuthError:!1}},props:{globusToken:{type:String,required:!0},userInfo:{type:Object,required:!0},config:{type:Object,required:!0},redirectPath:{type:String,required:!0},redirectComponent:{type:String,required:!0},showGlobusLogin:{type:Boolean,required:!0}},methods:{loginWithGlobus:function(){var e={state:sessionStorage.getItem("pkce_state")},t=G.authorizeUrl(e);window.location.replace(t)},checkForGlobusAuthCode:function(){var e=this;if(new URLSearchParams(window.location.search).get("code")){var t=window.location.href;G.exchangeForAccessToken(t).then(function(t){var s=t.access_token;e.$emit("globusLogin",s),sessionStorage.removeItem("pkce_code_verifier"),sessionStorage.removeItem("pkce_state"),e.$router.push({name:e.redirectComponent})}).catch(function(t){console.log(t),e.showAuthError=!0})}},allowAccess:function(){this.globusToken&&(this.authenticated=!0)},parseErrors:function(){var e=this.$route.query.errors;e&&(this.showErrors=!0,this.errors=e)},setRedirect:function(){var e="https://brainswipes.us/"+this.redirectPath;G.config.redirect_uri=e},setPkceState:function(){null===sessionStorage.getItem("pkce_state")&&(sessionStorage.setItem("pkce_state",B.a.random(64)),sessionStorage.setItem("pkce_code_verifier",B.a.random(64))),G.state=sessionStorage.getItem("pkce_state"),G.codeVerifier=sessionStorage.getItem("pkce_code_verifier")}},created:function(){this.setRedirect(),this.setPkceState(),this.checkForGlobusAuthCode(),this.allowAccess(),this.parseErrors()}},V={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showGlobusLogin?s("div",{attrs:{id:"globusauth"}},[e._l(e.errors,function(t){return s("b-alert",{key:t,attrs:{show:e.showErrors,variant:"danger"}},[e._v(e._s(e.config.errorCodes[t]))])}),e._v(" "),s("b-alert",{attrs:{show:e.showAuthError,variant:"danger"}},[e._v("Please attempt to login again. If this error persists contact an administrator.")]),e._v(" "),e.authenticated?e._e():s("div",[s("b-button",{staticClass:"btn-swipes",on:{click:e.loginWithGlobus}},[e._v("Login with Globus")])],1),e._v(" "),e._m(0)],2):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("br"),this._v(" "),t("div",{staticClass:"info"},[t("p",[this._v("Globus unifies logins across institutions by using each organization's authentication system.")]),this._v(" "),t("p",[this._v("Read the "),t("a",{attrs:{href:"https://docs.globus.org/how-to/get-started/",target:"_blank"}},[this._v("globus documentation")]),this._v(" to learn more.")])])])}]};var Y=s("VU/8")(J,V,!1,function(e){s("uZEV")},"data-v-148922d8",null).exports,H={name:"DatasetSelect",components:{GlobusAuth:Y},data:function(){return{selectedDataset:"",selectedStudy:"",showDatasets:!1,globusAuthenticated:!1,globusAuthErrors:[]}},props:{globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},surpressArchived:{type:Boolean,required:!0},showUnavailable:{type:Boolean,required:!0},useGlobus:{type:Boolean,required:!0},userInfo:{type:Object,required:!0},redirectPath:{type:String,required:!0},redirectComponent:{type:String,required:!0}},methods:{chooseStudy:function(e){this.selectedStudy===e?(this.showDatasets=!1,this.selectedStudy=""):(this.selectedStudy=e,this.selectedDataset="",this.showDatasets=!0,this.$emit("activateStudy",this.selectedStudy))},chooseDataset:function(e){this.selectedDataset=e,this.$emit("activateDataset",this.selectedStudy,this.selectedDataset),this.selectedStudy="",this.showDatasets=!1},allowRestrictedDatasets:function(){var e=this;return l()(u.a.mark(function t(){var s,a,r,n,o,c,l,d,h,m,p;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.globusToken.length){t.next=20;break}return s=i.a.auth().currentUser,a=s.email,t.next=5,e.getGlobusIdentities(e.globusToken);case 5:return r=t.sent,n=r.identities,o=r.included.identity_providers,c=[],t.next=11,i.a.auth().currentUser.getIdTokenResult(!0);case 11:l=t.sent,d=l.claims.org,h=!1,n.forEach(function(e){var t="";Object.hasOwn(e,"email")&&null!=e.email&&(t=e.email.toString()),t.toLowerCase()===a.toLowerCase()&&(h=!0)}),m=!1,p=!1,o.forEach(function(e){if(e.name===d){m=!0;var t=e.domains;n.forEach(function(e){var s="";Object.hasOwn(e,"email")&&null!=e.email&&(s=e.email),t.forEach(function(t){s.includes(t)&&"used"===e.status&&(p=!0)})})}}),0===n.length?c.push("noIdentities"):h?m?p||c.push("orgNotUsed"):c.push("noSwipesOrg"):c.push("noSwipesEmail"),c.length?(e.globusAuthErrors=c,e.globusAuthenticated=!1):e.globusAuthenticated=!0;case 20:case"end":return t.stop()}},t,e)}))()},globusLogin:function(e){this.$emit("globusLogin",e)}},mounted:function(){this.allowRestrictedDatasets()},computed:{showGlobusLogin:function(){var e=!1;return this.showDatasets&&(e=this.showUnavailable?!this.config.studies[this.selectedStudy].available&&!this.globusAuthenticated&&this.useGlobus&&this.datasetPrivileges[this.selectedStudy]:!this.config.studies[this.selectedStudy].available&&!this.globusAuthenticated&&this.useGlobus),e}}},W={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dataset-select"},[e.showUnavailable?s("div",{staticClass:"buttons"},[e._l(Object.keys(e.config.studies),function(t){return s("div",{key:t},["TEST"!==t&&"LearnExamples"!==t?s("b-button",{class:e.datasetPrivileges[t]?"btn-swipes":"btn-unavailable",on:{click:function(s){return e.chooseStudy(t)}}},[e._v("\n        "+e._s(t)+"\n      ")]):e._e()],1)}),e._v(" "),e.datasetPrivileges.TEST?s("b-button",{staticClass:"btn-swipes",on:{click:function(t){return e.chooseStudy("TEST")}}},[e._v("TEST")]):e._e()],2):s("div",{staticClass:"buttons"},e._l(Object.keys(e.config.studies),function(t){return s("div",{key:t},[e.datasetPrivileges[t]?s("b-button",{staticClass:"btn-swipes",on:{click:function(s){return e.chooseStudy(t)}}},[e._v("\n        "+e._s(t)+"\n      ")]):e._e()],1)}),0),e._v(" "),s("hr",{staticClass:"seperator"}),e._v(" "),e.showDatasets?s("div",[e.showGlobusLogin?s("div",e._l(e.globusAuthErrors,function(t){return s("p",{key:t,staticClass:"globus-auth-error"},[e._v(e._s(e.config.errorCodes[t]))])}),0):s("div",{staticClass:"buttons"},e._l(e.config.studies[e.selectedStudy].datasets,function(t){return s("div",{key:t},["LearnExamples"!==t?s("b-button",{class:e.config.datasets[t].archived&&e.surpressArchived?"btn-unavailable":e.datasetPrivileges[e.selectedStudy]?"btn-swipes":"btn-unavailable",on:{click:function(s){return e.chooseDataset(t)}}},[e._v("\n          "+e._s(e.config.datasets[t].name)+"\n        ")]):e._e()],1)}),0)]):e._e(),e._v(" "),s("GlobusAuth",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,userInfo:e.userInfo,config:e.config,redirectPath:e.redirectPath,redirectComponent:e.redirectComponent,showGlobusLogin:e.showGlobusLogin},on:{globusLogin:e.globusLogin}})],1)},staticRenderFns:[]};var X=s("VU/8")(H,W,!1,function(e){s("C+9v")},"data-v-35d4db16",null).exports,Z={name:"Home",data:function(){return{landingStyle:{"background-image":'url("/static/DCAN-logo-no-text-yellow.svg")'},explainPrivate:!1,selectedStudy:""}},props:{dataset:{type:String,required:!0},datasetPrivileges:{type:Object,required:!0},db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},config:{type:Object,required:!0}},components:{DatasetSelect:X},methods:{routeToPlay:function(e,t){if(this.config.datasets[t].archived)this.$router.push({name:"Promo",params:{study:e}});else if(this.datasetPrivileges[e]){var s=[];this.config.studies[e].available||this.globusToken||s.push("noIdentites"),s.length?this.$router.push({name:"Restricted",query:{errors:s}}):(this.$emit("changeDataset",t,e),this.$router.push({name:"Play",params:{study:e,dataset:t}}))}else this.$router.push({name:"Promo",params:{study:e}})},reroute:function(){var e=this.$route.query;e.reroute&&this.$router.push({path:e.reroute})},globusLogin:function(e){this.$emit("globusLogin",e)},chooseStudy:function(e){this.datasetPrivileges[e]||this.$router.push({name:"Promo",params:{study:e}})}},mounted:function(){this.reroute()},computed:{categorizedDatasets:function(){var e=this,t=[],s=[];return h()(this.config.studies).forEach(function(a){e.config.studies[a].available?t.push(a):"TEST"!==a&&s.push(a)}),this.datasetPrivileges.TEST&&s.push("TEST"),{open:t,restricted:s}},needsTutorial:function(){var e=!0;return Object.hasOwn(this.userData,"tutorials")&&Object.hasOwn(this.userData.tutorials,"basic")&&(e="none"===this.userData.tutorials.basic),e}}},K={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home container"},[s("div",{staticClass:"jumbotron landing",style:e.landingStyle},[s("div",{attrs:{id:"titles"}},[s("p",{staticClass:"lead mt-3"},[e._v("\n        "+e._s(Object.keys(e.userInfo).length?e.needsTutorial?"Review our learning resources before you begin swiping":"Choose a dataset to QC":"Login to begin")+"\n      ")]),e._v(" "),e.needsTutorial?e._e():s("div",{staticClass:"information-wrapper"},[s("div",{staticClass:"inner-information-wrapper"},[s("p",{staticClass:"explain-private"},[e._v("Private Studies")]),e._v(" "),s("div",{staticClass:"information",on:{mouseover:function(t){e.explainPrivate=!0},mouseleave:function(t){e.explainPrivate=!1}}})])])]),e._v(" "),Object.keys(e.userInfo).length?s("div",[Object.keys(e.config.studies).length?s("div",{staticClass:"mt-3"},[e.needsTutorial?s("div",[s("b-button",{staticClass:"btn-swipes",attrs:{to:"/tutorial/basic"}},[e._v("Learn")])],1):s("div",[s("div",{staticClass:"explain-wrapper"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.explainPrivate,expression:"explainPrivate"}],staticClass:"explain"},[s("p",[e._v("Patient health information is sensitive. Some studies have stricter legal limitations because of this.")]),e._v(" "),s("p",[e._v("Select grayed-out studies to learn more.")])])]),e._v(" "),s("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!0,showUnavailable:!0,useGlobus:!0,userInfo:e.userInfo,redirectPath:"",redirectComponent:"Home"},on:{globusLogin:e.globusLogin,activateDataset:e.routeToPlay,activateStudy:e.chooseStudy}})],1)]):e._e()]):e._e()])])},staticRenderFns:[]};var $=s("VU/8")(Z,K,!1,function(e){s("MlKH")},"data-v-2a337500",null).exports,ee=s("Dd8w"),te=s.n(ee),se={name:"profile",data:function(){return{blankImage:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/undraw_chatting.svg?sanitize=true",userChats:{},globusAuthenticated:!1,globusAuthErrors:[],userStudies:[],userRequests:{}}},computed:{yourEmail:function(){return i.a.auth().currentUser.email},allowedStudies:function(){var e=this,t=[];return h()(this.datasetPrivileges).forEach(function(s){e.datasetPrivileges[s]&&t.push(s)}),t}},props:{userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},db:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},notifications:{type:Object,required:!0},config:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0}},methods:{getUserChats:function(){var e=this;h()(this.config.datasets).forEach(function(){var t=l()(u.a.mark(function t(s){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.db.ref("datasets/"+s+"/chats/chats").on("value",function(t){var a=t.val(),i=v.a.reduce(a,function(t,s,a){return v.a.filter(D()(s.chats),{username:e.userInfo.displayName,deleted:!1}).length&&(t[a]=te()({},s.chats,{notify:s.notify})),t},{}),r=v.a.reduce(i,function(e,t,s){var a=v.a.orderBy(v.a.filter(v.a.omit(t,"notify"),{deleted:!1}),"time","desc")[0];return e.push({sample:s,message:a.message,time:a.time,username:a.username,notify:t.notify}),e},[]),n=v.a.orderBy(r,"time","desc");e.$set(e.userChats,s,n)});case 1:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}())},onChatClick:function(e,t,s){this.$router.push(t+"/"+e+"/review/"+s+"?f=p"),this.db.ref("datasets/"+e+"/chats/chats/"+s+"/notify/"+this.userInfo.displayName).set(!1)},allowRestrictedChats:function(){var e=this;return l()(u.a.mark(function t(){var s,a,r,n,o,c,l,d,h,m,p;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.globusToken.length){t.next=20;break}return s=i.a.auth().currentUser,a=s.email,t.next=5,e.getGlobusIdentities(e.globusToken);case 5:return r=t.sent,n=r.identities,o=r.included.identity_providers,c=[],t.next=11,i.a.auth().currentUser.getIdTokenResult(!0);case 11:l=t.sent,d=l.claims.org,h=!1,n.forEach(function(e){var t="";Object.hasOwn(e,"email")&&null!=e.email&&(t=e.email.toString()),t.toLowerCase()===a.toLowerCase()&&(h=!0)}),m=!1,p=!1,o.forEach(function(e){if(e.name===d){m=!0;var t=e.domains;n.forEach(function(e){var s="";Object.hasOwn(e,"email")&&null!=e.email&&(s=e.email),t.forEach(function(t){s.includes(t)&&"used"===e.status&&(p=!0)})})}}),0===n.length?c.push("noIdentities"):h?m?p||c.push("orgNotUsed"):c.push("noSwipesOrg"):c.push("noSwipesEmail"),c.length?(e.globusAuthErrors=c,e.globusAuthenticated=!1):e.globusAuthenticated=!0;case 20:case"end":return t.stop()}},t,e)}))()},routeToRestricted:function(){this.$router.push({name:"Restricted",query:{errors:this.globusAuthErrors}})},setProfilePic:function(e){this.db.ref("users/"+this.userInfo.displayName+"/pic").set(e)},routeToAccessRequest:function(){this.$router.push({name:"AccessRequest"})},getUserStudies:function(){var e=this;return l()(u.a.mark(function t(){var s,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.auth().currentUser.getIdTokenResult(!0);case 2:s=t.sent,delete(a=s.claims.datasets).TEST,e.userStudies=a;case 6:case"end":return t.stop()}},t,e)}))()},getUserRequests:function(){var e=this;this.db.ref("requests").on("value",function(t){var s=t.val(),a={};h()(s).forEach(function(t){h()(s[t]).forEach(function(i){i===e.userInfo.displayName&&"accepted"!==s[t][i].status&&(a[t]=s[t][i])})}),e.userRequests=a})}},mounted:function(){this.getUserChats(),this.allowRestrictedChats(),this.getUserStudies(),this.getUserRequests()}},ae={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"profile"}},[s("b-container",[s("h1",[e._v("\n      "+e._s(e.userInfo.displayName)+"\n    ")]),e._v(" "),s("h2",[e._v("\n      "+e._s(e.yourEmail)+"\n    ")]),e._v(" "),s("p",{staticClass:"lead"},[e._v("\n      You have "+e._s(e.userData.score)+" points!\n    ")]),e._v(" "),s("hr"),e._v(" "),s("div",[s("h1",[e._v("Your Study Access")]),e._v(" "),s("div",[s("div",{staticClass:"dataset-chats-wrapper"},[s("table",{attrs:{id:"study-access-table"}},e._l(Object.keys(e.userStudies),function(t){return s("th",{key:t,class:{red:!e.userStudies[t],green:e.userStudies[t]}},[e._v(e._s(t))])}),0)]),e._v(" "),Object.keys(e.userRequests).length?s("div",[s("h3",[e._v("Your Access Requests")]),e._v(" "),e._l(Object.keys(e.userRequests),function(t){return s("div",{key:t},[s("p",[e._v("\n            "+e._s(t)+" : "+e._s(e.userRequests[t].status)+"\n          ")])])})],2):e._e()]),e._v(" "),s("br"),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:e.routeToAccessRequest}},[e._v("Request Study Access")])],1),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"profile-pic-options"},[s("h1",[e._v("Choose a Profile Picture!")]),e._v(" "),s("br"),e._v(" "),e._l(e.config.profilePics,function(t){return s("img",{key:t,attrs:{src:"/static/profile_pics/"+t+".svg"},on:{click:function(s){return e.setProfilePic(t)}}})})],2),e._v(" "),s("hr"),e._v(" "),s("h1",[e._v("Samples you've commented on")]),e._v(" "),Object.keys(e.userChats).length?s("div",{staticClass:"user-chats"},e._l(e.allowedStudies,function(t){return s("div",{key:t},[s("h1",[e._v(e._s(t))]),e._v(" "),e._l(e.config.studies[t].datasets,function(a){return s("div",{key:a,staticClass:"dataset-chats-wrapper"},[e.userChats[a]?s("div",[s("div",{staticClass:"dataset-title-wrapper"},[s("div",{staticClass:"dataset-title"},[s("h2",[e._v(e._s(e.config.datasets[a].name))]),e._v(" "),s("span",{class:{messagestudy:e.notifications[a]}})])]),e._v(" "),e.config.studies[t].available?s("div",{staticClass:"dataset-chats",class:{scroller:Object.keys(e.userChats[a]).length>4}},e._l(e.userChats[a],function(i){return s("div",{key:i.sample,staticClass:"single-chat",class:{pulse:!!i.notify&&i.notify[e.userInfo.displayName]},on:{click:function(s){return e.onChatClick(a,t,i.sample)}}},[s("div",{class:{messagechat:!!i.notify&&i.notify[e.userInfo.displayName]}}),e._v(" "),s("h3",[e._v(e._s(i.sample))]),e._v(" "),s("br"),e._v(" "),s("span",[s("b",[e._v(e._s(i.username))]),e._v(" : "+e._s(i.message)+"\n                ")])])}),0):s("div",[e.globusAuthenticated?s("div",e._l(e.userChats[a],function(i){return s("div",{key:i.sample,staticClass:"single-chat",class:{pulse:!!i.notify&&i.notify[e.userInfo.displayName]},on:{click:function(s){return e.onChatClick(a,t,i.sample)}}},[s("div",{class:{messagechat:!!i.notify&&i.notify[e.userInfo.displayName]}}),e._v(" "),s("h3",[e._v(e._s(i.sample))]),e._v(" "),s("br"),e._v(" "),s("span",[s("b",[e._v(e._s(i.username))]),e._v(" : "+e._s(i.message)+"\n                  ")])])}),0):s("div",[e._l(e.globusAuthErrors,function(t){return s("p",{key:t,staticClass:"globus-auth-error"},[e._v(e._s(e.config.errorCodes[t]))])}),e._v(" "),s("b-button",{on:{click:e.routeToRestricted}},[e._v("Login with Globus")])],2)])]):e._e()])}),e._v(" "),s("hr",{staticClass:"seperator"})],2)}),0):s("div",[s("br"),e._v(" "),s("p",[e._v("Add a comment on a sample by clicking the Help button")]),e._v(" "),s("img",{staticClass:"blankImage",attrs:{src:e.blankImage}})])])],1)},staticRenderFns:[]};var ie=s("VU/8")(se,ae,!1,function(e){s("DLHS")},null,null).exports,re=s("0PHO"),ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"play"}},[s("b-modal",{ref:"userfeedback",attrs:{id:"userfeedback","title-html":"<h1>Thanks for swiping!</h1>",size:"md","ok-only":"","ok-title":"Keep Swiping"}},[s("p",[e._v(e._s(e.feedback1))]),e._v(" "),s("p",[e._v(e._s(e.feedback2))])]),e._v(" "),e.allowed?s("div",{staticClass:"main"},[e.completedTutorialRequirements?s("div",[e.noData?s("div",[s("h1",[e._v("Didn't find any samples to display")]),e._v(" "),s("p",{staticClass:"lead"},[e._v("Try refreshing the page, otherwise this dataset might not be set up yet.")]),e._v(" "),s("img",{staticClass:"blankImage",attrs:{src:e.blankImage,alt:"there is no data"}})]):s("div",[e.widgetPointer?s("ImageSwipe",{ref:"widget",attrs:{widgetPointer:e.widgetPointer,widgetSummary:e.widgetSummary,playMode:e.playMode,dataset:e.dataset,study:e.study,config:e.config,zoom:e.zoom},on:{widgetRating:e.sendWidgetResponse}}):s("div",[s("Flask"),e._v(" "),s("p",{staticClass:"mt-3 pt-3 lead"},[e._v("loading...")])],1)],1)]):s("div",[s("h1",[e._v("You must complete additional tutorials to swipe this dataset.")]),e._v(" "),e._l(e.neededTutorials,function(t){return s("div",{key:t},[s("h3",[e._v(e._s(e.config.learn.tutorials[t].name))])])}),e._v(" "),s("b-button",{staticClass:"btn-swipes",on:{click:function(t){return e.routeTo("TutorialSelect")}}},[e._v("To Tutorials")])],2),e._v(" "),s("div",{attrs:{id:"play-menu"}},[s("p",{staticClass:"zoom-btn",class:e.zoom?"zoom-out":"zoom-in",on:{click:function(t){e.zoom=!e.zoom}}})])]):e._e()],1)},staticRenderFns:[]};var oe=function(e){s("fbqe")},ue=s("VU/8")(re.a,ne,!1,oe,null,null).exports,ce={name:"login",data:function(){return{form:{email:null,password:null},errors:{show:!1,message:null},resetStatus:"",resetTitle:""}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),i.a.auth().signInWithEmailAndPassword(this.form.email,this.form.password).then(function(e){t.$emit("login",e),t.$router.push({name:"Home"})},function(e){t.errors.show=!0,t.errors.message=e.message})},resetPassword:function(){var e=this;this.form.email?i.a.auth().sendPasswordResetEmail(this.form.email).then(function(){e.resetTitle="Password Reset",e.resetStatus="A password reset email has been sent to "+e.form.email,e.$refs.confirmreset.show()}).catch(function(t){e.errors.show=!0,e.errors.message=t.message}):(this.errors.show=!0,this.errors.message="Please enter your email")},closeDialog:function(e){e.preventDefault(),this.$refs.confirmreset.hide()}}},le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("h1",[e._v(" Log In ")]),e._v(" "),s("b-modal",{ref:"confirmreset",attrs:{id:"confirmreset",title:e.resetTitle,size:"lg"}},[s("p",[e._v(e._s(e.resetStatus))]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-form",{on:{submit:e.closeDialog}},[s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Return to Login")])],1)],1)]),e._v(" "),s("div",{staticClass:"container fluid",attrs:{id:"signupForm"}},[s("b-alert",{attrs:{show:e.errors.show,variant:"danger"}},[e._v(e._s(e.errors.message))]),e._v(" "),s("b-form",{on:{submit:e.onSubmit}},[s("b-form-group",{attrs:{id:"emailAddressInputGroup",label:"Email address:","label-for":"emailAddress"}},[s("b-form-input",{attrs:{id:"emailAddress",type:"email",required:"",placeholder:"Enter email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("b-form-group",{attrs:{id:"passwordInputGroup",label:"Password:","label-for":"passwordInput"}},[s("b-form-input",{attrs:{id:"passwordInput",type:"password",required:"",placeholder:"Password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1),e._v(" "),s("p",{staticClass:"mt-3"},[e._v("\n      Don't have an account? "),s("router-link",{attrs:{to:{name:"SignUp"}}},[e._v("Create one")])],1),e._v(" "),s("p",{staticClass:"reset"},[e._v("\n      Forgot password? "),s("b-button",{attrs:{id:"passwordReset",size:"sm",type:"submit",variant:"primary"},on:{click:e.resetPassword}},[e._v("Reset it")])],1)],1)],1)},staticRenderFns:[]};var de=s("VU/8")(ce,le,!1,function(e){s("0Cp2")},null,null).exports,he=s("//Fk"),me=s.n(he),pe={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"terms"}},[s("h4",{staticStyle:{"text-align":"center"}},[e._v("\n      CONSENT FORM\n    ")]),e._v(" "),s("h5",{staticStyle:{"text-align":"center"}},[e._v("\n      BrainSwipes Neuroimaging Quality Control App\n    ")]),e._v(" "),s("br"),e._v(" "),s("p",[e._v("\nWelcome to the BrainSwipes Neuroimaging QC App! We're very excited to have you join us as we quality assess thousands of brain images in this fast, fun, and streamlined application. Please carefully read our Data Use Agreement before you begin your training session.\n    ")]),e._v(" "),s("br"),e._v(" "),s("p",{staticStyle:{"text-align":"left"}},[e._v("\n    1.  The data within this application comes from many different studies. Publicly available datasets require no approval. For restricted datasets approved users agree that they have a valid Data Use Agreement both at their site and for their person.\n    ")]),e._v(" "),s("p",{staticStyle:{"text-align":"left"}},[e._v("\n    2.  By signing up for the BrainSwipes application, you agree that you have been given explicit permission to participate in the quality assessment process by your supervisor, home institution, or other principal entity, or will only participate in quality assessment of publicly available datasets.\n    ")]),e._v(" "),s("p",{staticStyle:{"text-align":"left"}},[e._v("\n    3.  Data being used within this application is for the explicit purpose of brain imaging quality assessment as defined by the training criteria within the application.\n    ")]),e._v(" "),s("p",{staticStyle:{"text-align":"left"}},[e._v("\n    4.  These data will not be duplicated, photographed/recorded, or otherwise documented or shared externally unless at the permission or request of the BrainSwipes team.\n    ")]),e._v(" "),s("p",{staticStyle:{"text-align":"left"}},[e._v("\n    5.  Data within this application have been stripped of all identifiable information and will not be used in an attempt to establish individual identities from the study.\n    ")])])}]};var fe=s("VU/8")({name:"terms",data:function(){return{}}},pe,!1,function(e){s("v+SN")},null,null).exports,ge={name:"signup",data:function(){return{form:{email:"",password:"",password2:"",username:"",consented:!1},errors:{show:!1,message:null}}},props:{config:{type:Object,required:!0}},components:{terms:fe},computed:{validated:function(){return this.form.password===this.form.password2},consentFormLabel:function(){return this.form.consented?"You have consented!":"Click to read and sign the consent form"}},methods:{onSubmit:function(e){var t=this;e.preventDefault();var s=[".","#","$","[","]"];s.some(function(e){return t.form.username.includes(e)})?(this.errors.show=!0,this.errors.message="Username cannot contain the following characters: "+s):i.a.database().ref("users").once("value").then(function(e){var s=!1,a=e.val();h()(a).forEach(function(e){e===t.form.username&&(s=!0)}),s?(t.errors.show=!0,t.errors.message="Username already exists! Please choose a unique username"):t.createAccount()})},saveConsent:function(e){e.preventDefault(),this.form.consented=!0,this.$refs.consentform.hide()},openConsentModal:function(){this.$refs.consentform.show()},createAccount:function(){var e=this;i.a.auth().createUserWithEmailAndPassword(this.form.email,this.form.password).then(function(t){e.updateProfile(t)},function(t){e.errors.show=!0,e.errors.message=t.message})},insertUser:function(){var e=(new Date).toString(),t=i.a.auth().currentUser.displayName;i.a.database().ref("users/"+t).set({score:0,consent:this.form.consented,consentedOn:e,tutorials:{basic:"none"}}).then(function(){}).catch(function(e){console.log("error inserting user: ",e)})},updateProfile:function(){var e=this;i.a.auth().currentUser.updateProfile({displayName:this.form.username}).then(function(){e.setUserRoles().then(function(){e.insertUser(),e.$emit("changePermissions"),e.$router.push({name:"Tutorial",params:{module:"basic"}})},function(t){e.errors.show=!0,e.errors.message="SetRoles: "+t.message})},function(t){e.errors.show=!0,e.errors.message=t.message})},requestUserRolesUpdate:function(){var e=i.a.auth().currentUser.uid;return new me.a(function(t,s){var a=new XMLHttpRequest;a.open("POST","/setNewUserRoles",!0),a.setRequestHeader("Content-Type","application/json"),a.onload=t,a.onerror=s,a.send(n()({uid:e}))})},setUserRoles:function(){var e=this;return l()(u.a.mark(function t(){var s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestUserRolesUpdate().then(function(e){return e.currentTarget.responseText});case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},t,e)}))()}}},ve={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"signup"}},[s("h1",[e._v(" Sign Up ")]),e._v(" "),s("b-modal",{ref:"consentform",attrs:{id:"consentform",title:"Consent Form",size:"lg"}},[s("terms"),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-form",{on:{submit:e.saveConsent}},[s("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("I Consent")])],1)],1)],1),e._v(" "),s("div",{staticClass:"container fluid",attrs:{id:"signupForm"}},[s("b-form",{attrs:{validated:""},on:{submit:e.onSubmit}},[s("b-alert",{attrs:{show:e.errors.show,variant:"danger"}},[e._v(e._s(e.errors.message))]),e._v(" "),s("b-form-group",{attrs:{id:"emailAddressInputGroup",label:"Email address:","label-for":"emailAddress",description:"We'll never share your email with anyone else."}},[s("b-form-input",{attrs:{id:"emailAddress",type:"email",required:"",placeholder:"Enter email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("b-form-group",{attrs:{id:"usernameInputGroup",label:"Username:","label-for":"usernameInput",description:"This will be displayed on the leaderboard"}},[s("b-form-input",{attrs:{id:"usernameInput",type:"text",required:"",placeholder:"Choose a username"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("b-form-group",{attrs:{id:"passwordInputGroup",label:"Password:","label-for":"passwordInput"}},[s("b-form-input",{attrs:{id:"passwordInput",type:"password",required:"",placeholder:"Password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("b-form-group",{attrs:{id:"password2InputGroup",label:"Password Again:","label-for":"password2Input"}},[s("b-alert",{attrs:{show:!e.validated,variant:"danger"}},[e._v("\n          Make sure your passwords match!\n        ")]),e._v(" "),s("b-form-input",{attrs:{id:"password2Input",type:"password",required:"",placeholder:"Confirm password"},model:{value:e.form.password2,callback:function(t){e.$set(e.form,"password2",t)},expression:"form.password2"}})],1),e._v(" "),e.form.consented?s("b-button",{attrs:{type:"submit",variant:"primary",disabled:!e.validated||!e.form.consented}},[e._v("Submit")]):s("b-button",{attrs:{variant:"success",id:"openConsent"},on:{click:e.openConsentModal}},[e._v(" Open Consent Form ")]),e._v(" "),s("p",{staticClass:"mt-3"},[e._v("\n        Already have an account? "),s("router-link",{attrs:{to:"/login"}},[e._v("Log In")])],1)],1)],1)],1)},staticRenderFns:[]};var be=s("VU/8")(ge,ve,!1,function(e){s("r9qK")},null,null).exports,ye={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"unauthorized"}},[t("h1",[this._v(" Oops! You are not authorized ")]),this._v(" "),t("p",[this._v(" Please contact the sysadmin to get access to this page ")])])}]};var we=s("VU/8")({name:"unauthorized",data:function(){return{}}},ye,!1,function(e){s("4ZIV")},null,null).exports,_e={name:"leaderboard",data:function(){return{loading:!0,sortBy:"score",sortDesc:!0,fields:["rank","badge",{key:".key",label:"Player",sortable:!1},{key:"score",label:"Score",sortable:!0}],displayLimit:10,selectedDataset:"All Datasets",sortedUsersList:[],timeRange:"All Time"}},props:{db:{type:Object,required:!0},allUsers:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},userInfo:{type:Object,required:!0}},components:{DatasetSelect:X},computed:{displayUsersList:function(){return this.sortedUsersList.slice(0,this.displayLimit)},propsToWatch:function(){return[this.selectedDataset,this.timeRange]}},watch:{propsToWatch:{handler:function(){this.createUserScoreList(this.dataset),this.resetDisplayLimit()},immediate:!0,deep:!0}},methods:{activateDataset:function(e,t){this.selectedDataset=t},showMore:function(){this.displayLimit=this.displayLimit<this.sortedUsersList.length?Math.min(this.displayLimit+10,this.sortedUsersList.length):this.displayLimit},resetDisplayLimit:function(){this.displayLimit=10},createUserScoreList:function(){var e=this;return l()(u.a.mark(function t(){var s,a,i,r,n,o,c,l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,s=[],"All Datasets"!==e.selectedDataset){t.next=7;break}s=(s=h()(e.allUsers).filter(function(e){return".key"!==e})).map(function(t){return{name:t,score:e.allUsers[t].score,pic:e.allUsers[t].pic}}),t.next=18;break;case 7:return a=e.db.ref("datasets/"+e.selectedDataset+"/votes"),t.next=10,a.once("value");case 10:i=t.sent,r=i.val(),n=void 0,o=new Date,"Past Month"===e.timeRange?(o.setMonth(o.getMonth()-1),n=o):"Past Week"===e.timeRange?(o.setDate(o.getDate()-7),n=o):n=0,c="All Time"===e.timeRange?r:v.a.reduce(r,function(e,t,s){return t.datetime>n&&(e[s]=t),e},{}),l=v.a.reduce(c,function(t,s){var a=s.user;return t[a]?t[a].score+=1:t[a]={name:a,score:1,pic:e.allUsers[a].pic},t},{}),v.a.forIn(l,function(e){s.push(e)});case 18:s.sort(function(e,t){return t.score-e.score}),e.sortedUsersList=s,e.loading=!1;case 21:case"end":return t.stop()}},t,e)}))()}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page__content grey-gradient-bg"},[a("div",{staticClass:"page__content-container"},[a("div",{staticClass:"leaderboard",style:{cursor:e.loading?"wait":"unset"}},[a("div",[a("b-button",{staticClass:"btn-swipes",on:{click:function(t){e.selectedDataset="All Datasets"}}},[e._v("All Datasets")]),e._v(" "),a("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!1,useGlobus:!1,userInfo:e.userInfo,redirectPath:"",redirectComponent:""},on:{activateDataset:e.activateDataset}})],1),e._v(" "),"All Datasets"!==e.selectedDataset?a("div",[a("b-dropdown",{staticClass:"m-md-2",attrs:{id:"time-range-dropdown",variant:"warning",text:e.timeRange}},[a("b-dropdown-item",{on:{click:function(t){e.timeRange="All Time"}}},[e._v("All Time")]),e._v(" "),a("b-dropdown-item",{on:{click:function(t){e.timeRange="Past Week"}}},[e._v("Past Week")]),e._v(" "),a("b-dropdown-item",{on:{click:function(t){e.timeRange="Past Month"}}},[e._v("Past Month")])],1)],1):e._e(),e._v(" "),a("br"),e._v(" "),a("h1",[e._v("Leaders for "+e._s("All Datasets"===e.selectedDataset?"All Datasets":e.config.datasets[e.selectedDataset].name))]),e._v(" "),a("br"),e._v(" "),a("transition-group",{staticClass:"leaderboard__rows",attrs:{tag:"div",name:"list"}},e._l(e.displayUsersList,function(t,i){return a("div",{key:t.name,staticClass:"leaderboard__row"},[a("div",{staticClass:"leaderboard__row-container"},[a("div",{staticClass:"leaderboard__cell user-index"},[e._v(e._s(i+1))]),e._v(" "),a("div",{staticClass:"leaderboard__cell avatar"},[a("div",{staticClass:"img-overlay-wrap"},[a("img",{staticClass:"avatar",attrs:{src:t.pic?"/static/profile_pics/"+t.pic+".svg":"/static/profile_pics/kesh-profile-icon.svg",alt:"Profile Avatar"}}),e._v(" "),a("img",{staticClass:"profile-frame",attrs:{src:0===i?"/static/profile-frame-gold.svg":"/static/profile-frame.svg"}})])]),e._v(" "),a("div",{staticClass:"leaderboard__cell username"},[e._v(e._s(t.name))]),e._v(" "),0===i?a("div",{staticClass:"leaderboard__cell crown"},[a("img",{attrs:{src:s("yBh0"),alt:"Medal"}})]):e._e(),e._v(" "),a("div",{staticClass:"leaderboard__cell user-score"},[a("div",[e._v(e._s(t.score))])])]),e._v(" "),a("hr",{staticClass:"dashed-decorative-line"})])}),0),e._v(" "),e.displayLimit<e.sortedUsersList.length?a("button",{staticClass:"full-size-desktop",attrs:{id:"leaderboard__showMore"},on:{click:function(t){return e.showMore()}}},[e._v("\n          Load more\n        ")]):e._e()],1)])])])},staticRenderFns:[]};var Se=s("VU/8")(_e,Ce,!1,function(e){s("YcS6")},null,null).exports,Te=s("bOaz"),ke=s("dTL9"),Ae=s.n(ke),De=s("CxQc"),Me=s.n(De),Ie=s("RdNL"),xe={name:"ImageStatic",props:{widgetPointer:{type:String,required:!0},dataset:{type:String,required:!0},config:{type:Object,required:!0}},data:function(){return{status:"loading",imgUrl:null,imgKey:null}},created:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createUrl(e.widgetPointer);case 2:e.lastClick=Date.now();case 3:case"end":return t.stop()}},t,e)}))()},methods:{postRequest:function(e){var t=this.config.datasets[this.dataset].bucket,s=e+".png";if(Object.hasOwn(this.config.datasets[this.dataset],"s3filepath")){var a=this.config.datasets[this.dataset].s3filepath,i=/(sub-.*?)_/,r=/_(ses-.*?)_/,o=e.match(r),u=e.match(i),c="",l="";o&&(c=e.match(r)[1]),u&&(l=e.match(i)[1]),s=a.replaceAll("{{SUBJECT}}",l).replaceAll("{{SESSION}}",c).replaceAll("{{FILENAME}}",e)}var d="";return Object.hasOwn(this.config.datasets[this.dataset],"s3cfg")&&(d=this.config.datasets[this.dataset].s3cfg),new me.a(function(e,a){var i=new XMLHttpRequest;i.open("POST","/Image",!0),i.setRequestHeader("Content-Type","application/json"),i.onload=e,i.onerror=a,i.send(n()({filepath:s,bucket:t,s3cfg:d}))})},createUrl:function(e){var t=this;return l()(u.a.mark(function s(){var a,i;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.postRequest(e).then(function(e){return e.currentTarget.responseText});case 2:a=s.sent,i=a.split("?")[0],t.imgUrl=a,t.imgKey=i;case 6:case"end":return s.stop()}},s,t)}))()},imageError:function(){this.imgUrl="/static/not-found.png"}},watch:{widgetPointer:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createUrl(e.widgetPointer);case 2:case"end":return t.stop()}},t,e)}))()}}},Oe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imageStatic"},[t("div",{staticClass:"user-card"},[t("div",{staticClass:"image_area"},[t("img",{staticClass:"user-card__picture mx-auto",attrs:{src:this.imgUrl},on:{error:this.imageError}})])])])},staticRenderFns:[]};var Le=s("VU/8")(xe,Oe,!1,function(e){s("EA8V")},"data-v-73497810",null).exports,Ee=s("bm7V");a.default.use(Ee,{container:"body",duration:500,easing:"ease",offset:-75,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0}),a.default.directive("click-outside",{bind:function(e,t,s){e.clickOutsideEvent=function(a){e===a.target||e.contains(a.target)||s.context[t.expression](a)},document.body.addEventListener("click",e.clickOutsideEvent)},unbind:function(e){document.body.removeEventListener("click",e.clickOutsideEvent)}});var Ne={name:"tutorial",components:{ImageSwipe:Te.a,Checklist:Ie.a,ImageStatic:Le},data:function(){return{scrollPosition:0,widgetSummary:{},glossary:Ae.a,glossaryKeys:Me.a,showTOC:!1}},props:{config:{type:Object,required:!0},definitionsAdded:{type:Object,required:!0},module:{type:String,required:!0}},watch:{},computed:{content:function(){return this.config.learn.tutorials[this.module].content},bins:function(){var e=0;this.content.forEach(function(t){e+=t.steps.length});for(var t=1/e,s=[],a=0;a<e;a+=1)s.push({bin:a,from:a*t,to:(a+1)*t});return s},currentBin:function(){var e=this,t=v.a.filter(this.bins,function(t){return e.scrollPosition<=t.to&&e.scrollPosition>t.from});return t.length?t[0]:{bin:0}}},methods:{tutorialComplete:function(){this.$emit("takenTutorial",this.module,"complete")},handleScroll:function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=(window.scrollY-60)/(this.$refs.tutorial.clientHeight-e);this.scrollPosition=t<0?0:t>1?1:t},openGlossary:function(){this.$refs.glossary.show()},openTOC:function(){this.showTOC=!this.showTOC},addDefinitions:function(){var e=this;return l()(u.a.mark(function t(){var s,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.definitionsAdded[e.module]||(s=h()(e.glossaryKeys),a=new RegExp(""+s.join("|"),"gi"),e.content.forEach(function(t){for(var s=0;s<t.steps.length;s+=1)if(Object.hasOwn(t.steps[s],"text")){var i=t.steps[s].text,r=i.match(a);r&&(t.steps[s].text=e.replaceSubstring(r,i))}}),e.$emit("markDefinitionsAdded",e.module));case 1:case"end":return t.stop()}},t,e)}))()},replaceSubstring:function(e,t){var s="",a=t;do{var i=e.shift(),r=this.glossary[this.glossaryKeys[i.toUpperCase()].Category][[this.glossaryKeys[i.toUpperCase()].Term]],n=new RegExp(i,"i");s+=a.substr(0,a.indexOf(i)+i.length).replace(n,'<dfn title="'+r+'">'+i+"</dfn>"),a=a.substring(a.indexOf(i)+i.length)}while(e.length);return s+=a},hideTOC:function(){this.showTOC=!1},handleRouterQuery:function(){var e=this.$route.query;if(e.section){var t="";switch(e.section){case"atlasRegistration":t="header-Atl-Reg";break;case"functionalRegistration":t="header-Func-Reg";break;default:t="header-Surf-Delin"}var s=document.getElementById(t);console.log(s),s.scrollIntoView()}},simulateSwipe:function(e){var t=this,s=e[0],a=e[1],i=e[2],r=s?"swipe-right":"swipe-left",n=document.getElementById(a).getElementsByClassName("user-card")[0];i===s&&(n.classList.add(r),setTimeout(function(){t.removeClass(n,r)},600))},removeClass:function(e,t){e.classList.remove(t)},routeTo:function(e){this.$router.push({name:e})}},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},mounted:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addDefinitions();case 2:e.handleRouterQuery();case 3:case"end":return t.stop()}},t,e)}))()}},je={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"tutorial",staticClass:"tutorial"},[s("div",[s("h1",[e._v(e._s(e.config.learn.tutorials[e.module].name))]),e._v(" "),s("p",{staticClass:"lead"},[e._v("Scroll down to take the tutorial")])]),e._v(" "),e.currentBin.bin?s("div",{staticClass:"pbar pt-3 pb-3"},[s("b-progress",{staticClass:"ml-3 mr-3",attrs:{value:e.scrollPosition,max:1,"show-progress":""}})],1):e._e(),e._v(" "),s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideTOC,expression:"hideTOC"}]},[s("b-button",{staticClass:"btn btn-outline-primary btn-light",attrs:{type:"button",id:"open-toc"},on:{click:e.openTOC}},[s("svg",{staticClass:"bi bi-list",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"}})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showTOC,expression:"showTOC"}],attrs:{id:"table-of-contents"}},[s("b-button",{staticClass:"btn-swipes",on:{click:function(t){return e.routeTo("TutorialSelect")}}},[e._v("Back to Tutorial Selection")]),e._v(" "),s("hr"),e._v(" "),s("h2",[e._v("To Section")]),e._v(" "),s("ul",e._l(e.content,function(t,a){return s("li",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#section"+a,expression:"`#section${sectionIndex}`"}],key:a,on:{click:e.hideTOC}},[e._v(e._s(t.title))])}),0)],1)],1),e._v(" "),s("b-button",{staticClass:"btn btn-outline-primary btn-light",attrs:{id:"help"},on:{click:e.openGlossary}},[s("svg",{staticClass:"bi bi-question-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}}),s("path",{attrs:{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"}})])]),e._v(" "),s("b-modal",{ref:"glossary",attrs:{id:"glossary",title:"Glossary of Terms",size:"lg"}},[s("div",[s("h1",[e._v("Brain Anatomy")]),e._v(" "),s("ul",e._l(Object.keys(e.glossary["Brain Anatomy"]).sort(),function(t){return s("li",{key:t},[s("strong",[e._v(e._s(t))]),s("p",[e._v(e._s(e.glossary["Brain Anatomy"][t]))])])}),0),e._v(" "),s("hr"),e._v(" "),s("h1",[e._v("Neuroimaging Terms")]),e._v(" "),s("ul",e._l(Object.keys(e.glossary["Neuroimaging Terms"]).sort(),function(t){return s("li",{key:t},[s("strong",[e._v(e._s(t))]),s("p",[e._v(e._s(e.glossary["Neuroimaging Terms"][t]))])])}),0)])]),e._v(" "),s("div",{staticClass:"tutorial-steps"},[e._l(e.content,function(t,a){return s("div",{key:"section"+a},[s("h1",{attrs:{id:"section"+a}},[e._v(e._s(t.title))]),e._v(" "),e._l(e.content[a].steps,function(t,i){return s("div",{key:"step"+i,staticClass:"fullpage",attrs:{id:"section"+a+"step"+i}},[s("div",{staticClass:"tutorial-tabs-wrapper"},[t.text?s("div",{staticClass:"tutorial-step"},[s("p",{domProps:{innerHTML:e._s(t.text)}})]):e._e()]),e._v(" "),t.checks?s("div",[s("Checklist",{attrs:{config:e.config,imageClass:Object.keys(t.checks)[0],checks:Object.values(t.checks)[0]}})],1):e._e(),e._v(" "),t.tabs?s("div",{staticClass:"tutorial-tabs-wrapper"},[s("div",{staticClass:"tutorial-tabs"},[s("b-card",[s("b-tabs",{attrs:{card:"",pills:"",fill:"","active-nav-item-class":"no-tab-pulse"}},e._l(t.tabs,function(t,a){return s("b-tab",{key:a,attrs:{title:t.title,"title-link-class":"tab-pulse",active:!a}},[t.checks?s("div",{staticClass:"checklist-wrapper"},[s("Checklist",{attrs:{config:e.config,imageClass:Object.keys(t.checks)[0],checks:Object.values(t.checks)[0]}})],1):e._e(),e._v(" "),t.image?s("img",{staticClass:"mt-s pt-3 img",attrs:{src:t.image}}):t.sample?s("ImageStatic",{attrs:{widgetPointer:t.sample,dataset:t.dataset,config:e.config}}):e._e()],1)}),1)],1)],1)]):e._e(),e._v(" "),t.image?s("div",[s("img",{staticClass:"mt-3 pt-3 img",attrs:{src:t.image}})]):e._e(),e._v(" "),t.sample?s("div",[s("ImageStatic",{attrs:{widgetPointer:t.sample,dataset:t.dataset,config:e.config}})],1):e._e(),e._v(" "),t.pointer?s("div",{staticClass:"mt-3"},[s("ImageSwipe",{ref:"widget",refInFor:!0,attrs:{widgetPointer:t.pointer,widgetSummary:e.widgetSummary,playMode:"tutorial",tutorialStep:t.tutorialStep,dataset:t.dataset,identifier:"section"+a+"step"+i,config:e.config},on:{widgetRating:e.simulateSwipe}})],1):e._e()])})],2)}),e._v(" "),s("b-button",{staticClass:"mt-3 btn-swipes",on:{click:e.tutorialComplete}},[e._v("Complete")])],2)],1)},staticRenderFns:[]};var Re=s("VU/8")(Ne,je,!1,function(e){s("gX6R")},null,null).exports,Ue=s("VYwL"),qe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"review"}},[s("b-modal",{ref:"flagwarning",attrs:{id:"flagwarning",title:e.flagged?"Resolve Flag":"WARNING",size:"lg"},on:{ok:e.flagImage}},[e.flagged?s("div",[s("h2",[e._v("Pass or Fail?")]),e._v(" "),s("p",[e._v("Describe why and unflag.")])]):s("div",[s("h2",[e._v("Flagging an image will remove it from circulation until it has been reviewed.")]),e._v(" "),s("h4",[e._v("Only flag images where issues are present.")]),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"flag-reasons"},[s("h3",[e._v("Flag the image if")]),e._v(" "),s("ul",[s("li",[e._v("There is no overlay")]),e._v(" "),s("li",[e._v("There is an issue with the image not discussed in the tutorial")])]),e._v(" "),s("h3",[e._v("Do not flag the image if")]),e._v(" "),s("ul",[s("li",[e._v("You are unsure how to swipe, and have not reviewed the tutorial")])])])]),e._v(" "),s("hr"),e._v(" "),s("b-input-group",{staticClass:"mt-3",attrs:{prepend:e.flagged?"Explain your reasoning":"Description of issue"}},[s("b-form-input",{ref:"flag-comment",attrs:{id:"flag-comment",autocomplete:"off"},on:{keyup:function(t){return e.enableForm()}},model:{value:e.chatMessage,callback:function(t){e.chatMessage=t},expression:"chatMessage"}})],1),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{disabled:e.formDisabled,type:"submit",variant:"primary"},on:{click:e.flagImage}},[e._v("Submit")]),e._v(" "),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.closeFlagWarning}},[e._v("Cancel")])],1)],1),e._v(" "),s("b-modal",{ref:"adminactions",attrs:{id:"adminactions",title:"Admin Actions",size:"lg"}},[s("h3",[e._v("This sample is "),Object.hasOwn(e.config.learn.gallery,e.widgetPointer)?e._e():s("span",[e._v("NOT")]),e._v(" in the gallery.")]),e._v(" "),s("b-button",{attrs:{variant:"warning",disabled:Object.hasOwn(e.config.learn.gallery,e.widgetPointer)},on:{click:e.addToGallery}},[e._v("Add Sample to Gallery")]),e._v(" "),Object.keys(e.catchTrials).length>0?s("div",[Object.keys(e.catchTrials).includes(e.widgetPointer)?s("div",[s("h3",[e._v("This image is a "+e._s("pass"==e.catchTrials[e.widgetPointer]?"PASS":"FAIL")+" catch trial.")]),e._v(" "),s("b-button",{on:{click:e.removeCatchTrial}},[e._v("Remove from catch trials")])],1):s("div",[s("h3",[e._v("This sample is NOT a catch trial")]),e._v(" "),s("b-button",{attrs:{variant:"danger",disabled:Object.keys(e.catchTrials).includes(e.widgetPointer)},on:{click:function(t){return e.setCatchTrial("fail")}}},[e._v("Set as Catch Trial Fail")]),e._v(" "),s("b-button",{attrs:{variant:"success",disabled:Object.keys(e.catchTrials).includes(e.widgetPointer)},on:{click:function(t){return e.setCatchTrial("pass")}}},[e._v("Set as Catch Trial Pass")])],1)]):s("div",[s("h3",[e._v("This sample is NOT a catch trial.")]),e._v(" "),s("b-button",{attrs:{variant:"success",disabled:Object.keys(e.catchTrials).includes(e.widgetPointer)},on:{click:function(t){return e.setCatchTrial("pass")}}},[e._v("Set as Catch Trial Pass")]),e._v(" "),s("b-button",{attrs:{variant:"danger",disabled:Object.keys(e.catchTrials).includes(e.widgetPointer)},on:{click:function(t){return e.setCatchTrial("fail")}}},[e._v("Set as Catch Trial Fail")])],1),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.closeAdminActions}},[e._v("Close")])],1)],1),e._v(" "),e.loading?s("div",[e._v("\n    LOADING\n  ")]):e.allowed?s("div",[s("div",{attrs:{id:"tutorial-tips"}},[s("div",{staticClass:"information-wrapper"},[s("div",{staticClass:"inner-information-wrapper"},[s("h2",[e._v("This is "+e._s(e.imageType[1])+".")]),e._v(" "),s("div",{staticClass:"information",on:{click:e.toTutorial}})])]),e._v(" "),s("Checklist",{attrs:{config:e.config,imageClass:e.imageType[0]}})],1),e._v(" "),s("div",[s("ImageSwipe",{ref:"widget",attrs:{widgetPointer:e.widgetPointer,widgetSummary:e.widgetSummary,playMode:"",dataset:e.dataset,study:e.study,config:e.config}})],1),e._v(" "),s("div",{attrs:{id:"review-controls"}},[s("b-button",{attrs:{variant:"danger",disabled:e.flagged&&!e.isAdmin},on:{click:e.openFlagWarning}},[e._v(e._s(e.flagged?"This sample is flagged":"Flag for Expert Review"))]),e._v(" "),e.source?s("b-button",{attrs:{variant:"primary"},on:{click:e.toSource}},[e._v("Back to "+e._s(e.source))]):e._e(),e._v(" "),e.isAdmin?s("b-button",{attrs:{variant:"warning"},on:{click:e.openAdminActions}},[e._v("Admin Actions")]):e._e()],1),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"chat container"},[s("h3",{staticClass:"mb-2"},[e._v("Chat")]),e._v(" "),e.chatOrder.length?s("div",{staticClass:"chatHistory pl-3 pr-3 pt-3 pb-3 mb-3",on:{mouseover:function(t){e.showChatTime=!0},mouseleave:function(t){e.showChatTime=!1}}},e._l(e.chatOrder,function(t){return s("p",{key:t.time,staticClass:"text-left chat-text"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.showChatTime,expression:"showChatTime"}],staticClass:"chat-time"},[e._v(e._s(t.date))]),s("span",{staticClass:"chat-username"},[e._v(e._s(t.username))]),e._v(": "+e._s(t.message)+"\n        ")])}),0):s("div",[s("p",[e._v("No one has said anything yet!")])]),e._v(" "),s("b-form",{on:{submit:e.sendChat}},[s("b-form-group",{attrs:{id:"exampleInputGroup1",label:"Enter chat message:","label-for":"exampleInput1",description:""}},[s("b-form-input",{attrs:{id:"exampleInput1",type:"text",required:"",placeholder:"Enter your message"},on:{keyup:function(t){return e.enableForm()}},model:{value:e.chatMessage,callback:function(t){e.chatMessage=t},expression:"chatMessage"}}),e._v(" "),s("b-button",{staticClass:"mt-2",attrs:{variant:"primary",disabled:e.formDisabled},on:{click:e.sendChat}},[e._v("Send")])],1)],1)],1)]):e._e()],1)},staticRenderFns:[]};var Pe=function(e){s("66ru")},ze=s("VU/8")(Ue.a,qe,!1,Pe,null,null).exports,Fe={data:function(){return{noData:!1,allowed:!1,blankChatImage:"https://raw.githubusercontent.com/SwipesForScience/testConfig/master/images/undraw_no_data.svg?sanitize=true",dataset:"",selectedStudy:"",sampleChats:[],flagged:[]}},props:{db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},userInfo:{type:Object,required:!0}},components:{DatasetSelect:X},methods:{getChats:function(){var e=this;this.db.ref("datasets/"+this.dataset+"/chats/chats").on("value",function(t){var s=t.val(),a=v.a.reduce(s,function(e,t,s){var a=v.a.filter(t.chats,{deleted:!1});if(a.length){var i=D()(a)[h()(a).length-1];e.push({sample:s,message:i.message,time:i.time,username:i.username})}return e},[]);e.sampleChats=v.a.orderBy(a,"time","desc"),e.sampleChats.length?e.noData=!1:e.noData=!0})},getFlags:function(){var e=this;this.db.ref("datasets/"+this.dataset+"/flaggedSamples").on("value",function(t){var s=t.val();e.flagged=s?h()(s):[]})},activateDataset:function(e,t){this.dataset=t,this.selectedStudy=e,this.getChats(),this.getFlags()},handleQuery:function(){var e=this;return l()(u.a.mark(function t(){var s,a,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(s=e.$route.query).study&&s.dataset&&(a=s.study,i=s.dataset,e.activateDataset(a,i));case 2:case"end":return t.stop()}},t,e)}))()},globusLogin:function(e){this.$emit("globusLogin",e)}},mounted:function(){this.handleQuery()}},Be={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[s("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!1,useGlobus:!0,userInfo:e.userInfo,redirectPath:"chats",redirectComponent:"Chats"},on:{activateDataset:e.activateDataset,globusLogin:e.globusLogin}}),e._v(" "),e.dataset?s("div",[s("h1",[e._v("Chats for "+e._s(e.config.datasets[e.dataset].name))]),e._v(" "),e.noData?s("div",[s("p",{staticClass:"lead"},[e._v("No one has said anything yet!")]),e._v(" "),s("img",{staticClass:"blankImage",attrs:{src:e.blankChatImage}})]):s("div",{staticClass:"chats-div"},[s("p",{staticClass:"lead"},[e._v("See which samples people are talking about")]),e._v(" "),e._l(e.sampleChats,function(t){return s("p",{key:t.sample},[s("b-alert",{attrs:{variant:e.flagged.includes(t.sample)?"danger":"primary",show:""}},[s("router-link",{attrs:{to:"/"+e.selectedStudy+"/"+e.dataset+"/review/"+t.sample+"?f=c"}},[e._v(e._s(t.sample))]),e._v(" "),s("br"),e._v(" "),s("span",[s("b",[e._v(e._s(t.username))]),e._v(" : "+e._s(t.message)+"\n          ")])],1)],1)})],2)]):e._e()],1)},staticRenderFns:[]};var Qe=s("VU/8")(Fe,Be,!1,function(e){s("YZaq")},"data-v-a816ed08",null).exports,Ge=s("gA1u"),Je={name:"users",data:function(){return{userList:{},loading:!0,userModified:{name:"",admin:"",datasets:{},org:"",studyAdmin:{}}}},props:{db:{type:Object,required:!0},config:{type:Object,required:!0},allUsers:{type:Object,required:!0},userData:{type:Object,required:!0}},created:function(){var e=this;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllUserRoles();case 2:case"end":return t.stop()}},t,e)}))()},components:{Flask:Ge.a},methods:{modifyUser:function(e,t){var s=JSON.parse(n()(t));this.userModified.name=e,this.userModified.admin=s.admin,this.userModified.datasets=s.datasets,this.userModified.org=s.org,this.userModified.studyAdmin=s.studyAdmin,this.userModified.email=s.email,this.$refs.modifyuser.show()},closeDialogCancel:function(e){e.preventDefault(),this.$refs.modifyuser.hide()},closeDialogSubmit:function(e){var t=this;e.preventDefault();var s=JSON.parse(n()(this.userModified));this.$refs.modifyuser.hide(),this.setUserRoles(s).then(function(){t.$emit("changePermissions")})},changeAdmin:function(e){this.userModified.admin=!e},changeDatasetAccess:function(e,t){this.userModified.datasets[e]=!t},changeOrg:function(e){this.userModified.org=e},changeStudyAdmin:function(e,t){this.userModified.studyAdmin[e]=!t},requestUserRolesUpdate:function(e){return new me.a(function(t,s){var a=new XMLHttpRequest;a.open("POST","/setRoles",!0),a.setRequestHeader("Content-Type","application/json"),a.onload=t,a.onerror=s,a.send(n()({obj:e,currentUser:i.a.auth().currentUser.uid}))})},setUserRoles:function(e){var t=this;return l()(u.a.mark(function s(){var a;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.requestUserRolesUpdate(e).then(function(e){return JSON.parse(e.currentTarget.responseText)});case 2:a=s.sent,t.userList[a.name]={admin:a.admin,datasets:a.datasets,org:a.org,studyAdmin:a.studyAdmin,email:a.email};case 4:case"end":return s.stop()}},s,t)}))()},requestAllUserRoles:function(){return new me.a(function(e,t){var s=new XMLHttpRequest;s.open("POST","/getAllUsers",!0),s.setRequestHeader("Content-Type","application/json"),s.onload=e,s.onerror=t,s.send(n()({currentUser:i.a.auth().currentUser.uid}))})},getAllUserRoles:function(){var e=this;return l()(u.a.mark(function t(){var s,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestAllUserRoles().then(function(e){return JSON.parse(e.currentTarget.responseText)});case 2:s=t.sent,a=v.a.pick(s,h()(v.a.pickBy(e.allUsers,function(e){var t=!1;return Object.hasOwn(e,"tutorials")&&(t="complete"===e.tutorials.basic),t}))),e.userList=a,e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()}},computed:{globusOrgs:function(){var e=[];return this.config.allowedGlobusOrganizations.forEach(function(t){e.push({value:t,text:t})}),e}}},Ve={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"users"}},[s("h1",[e._v(" Manage Users ")]),e._v(" "),e.loading?e._e():s("b-modal",{ref:"modifyuser",attrs:{id:"modifyuser",title:"Modifying permissions for "+e.userModified.name+" | "+e.userModified.email,size:"lg"}},[s("div",[s("div",{attrs:{id:"brainswipes-admin"}},[s("h2",[e._v("Admin Level")]),e._v(" "),s("div",{staticClass:"admin-buttons"},[e.userList[e.userData.username].admin?s("div",[s("h3",[e._v("BrainSwipes Admin")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.changeAdmin(e.userModified.admin)}}},[e._v(e._s(e.userModified.admin))])],1):e._e(),e._v(" "),s("div",[s("h3",[e._v("Study Admin")]),e._v(" "),s("div",{attrs:{id:"study-admin-list"}},e._l(e.userModified.studyAdmin,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.userList[e.userData.username].studyAdmin[a]||e.userList[e.userData.username].admin,expression:"userList[userData.username].studyAdmin[dataset] || userList[userData.username].admin"}],key:a},[e.userList[e.userData.username].studyAdmin[a]||e.userList[e.userData.username].admin?s("div",[s("b-button",{attrs:{variant:t?"success":"outline-danger"},on:{click:function(s){return e.changeStudyAdmin(a,t)}}},[e._v(e._s(a))])],1):e._e()])}),0)])])]),e._v(" "),s("hr"),e._v(" "),s("div",{attrs:{id:"study-access"}},[s("h2",[e._v("Study Access")]),e._v(" "),s("div",{attrs:{id:"study-access-list"}},e._l(e.userModified.datasets,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.userList[e.userData.username].studyAdmin[a]||e.userList[e.userData.username].admin,expression:"userList[userData.username].studyAdmin[dataset] || userList[userData.username].admin"}],key:a},[e.userList[e.userData.username].studyAdmin[a]||e.userList[e.userData.username].admin?s("div",[s("b-button",{attrs:{variant:t?"success":"outline-danger"},on:{click:function(s){return e.changeDatasetAccess(a,t)}}},[e._v(e._s(a))])],1):e._e()])}),0)]),e._v(" "),s("hr"),e._v(" "),s("div",{attrs:{id:"organizations"}},[s("h2",[e._v("Associated Organization")]),e._v(" "),s("b-form-select",{attrs:{disabled:!e.userList[e.userData.username].admin,options:e.globusOrgs},model:{value:e.userModified.org,callback:function(t){e.$set(e.userModified,"org",t)},expression:"userModified.org"}}),e._v(" "),e.userList[e.userData.username].admin?s("p",[e._v("Open dropdown and type to search")]):s("p",[e._v("Contact a BrainSwipes site-wide admin to change this")])],1)]),e._v(" "),s("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.closeDialogSubmit}},[e._v("Submit")]),e._v(" "),s("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.closeDialogCancel}},[e._v("Cancel")])],1)]),e._v(" "),s("b-container",[e.loading?s("div",[s("Flask"),e._v(" "),s("p",{staticClass:"mt-3 pt-3 lead"},[e._v("loading...")])],1):s("div",{staticClass:"user-div"},[s("p",[e._v("Users only appear here if they have completed the tutorial")]),e._v(" "),s("table",{attrs:{id:"user-table"}},[s("tr",[s("th",[e._v("User")]),e._v(" "),s("th",[e._v("Email")]),e._v(" "),s("th",[e._v("Admin")]),e._v(" "),s("th",[e._v("Studies")])]),e._v(" "),e._l(Object.keys(e.userList).sort(function(e,t){return t>e?-1:1}),function(t){return s("tr",{key:t},[s("td",[s("b-button",{attrs:{variant:"outline-dark"},on:{click:function(s){return e.modifyUser(t,e.userList[t])}}},[e._v(e._s(t))])],1),e._v(" "),s("td",{staticClass:"userlist-cell"},[e._v(e._s(e.userList[t].email))]),e._v(" "),e.userList[t].admin?s("td",{staticClass:"userlist-cell"},[e._v("\n            BrainSwipes\n          ")]):e.userList[t].studyAdmin?e.userList[t].studyAdmin&&Object.values(e.userList[t].studyAdmin).includes(!0)?s("td",{staticClass:"userlist-cell"},[e._v("\n            Study\n          ")]):s("td",{staticClass:"userlist-cell"}):s("td",{staticClass:"userlist-cell",staticStyle:{color:"#990000"}},[e._v("\n            No Admin Data\n          ")]),e._v(" "),s("td",[s("table",{staticClass:"studiesTable"},[s("tr",e._l(Object.keys(e.config.studies),function(a){return s("th",{directives:[{name:"show",rawName:"v-show",value:e.userList[e.userData.username].studyAdmin[a]||e.userList[e.userData.username].admin,expression:"userList[userData.username].studyAdmin[study] || userList[userData.username].admin"}],key:a,class:{red:!!e.userList[t].datasets&&!e.userList[t].datasets[a],green:!!e.userList[t].datasets&&e.userList[t].datasets[a]}},[e._v(e._s(a))])}),0)])])])})],2)])])],1)},staticRenderFns:[]};var Ye=s("VU/8")(Je,Ve,!1,function(e){s("jf0B")},null,null).exports,He={name:"manifest",data:function(){return{status:"loading...",progress:0,target:0,manifestEntries:[],sampleCounts:[],selectedDataset:"",selectedStudy:"",available:!1,lockout:!1,formDisabled:!0,formLockout:!1,allowed:!1,selectionStage:"start",showModifyDataset:!1,error:"",updateMethod:"",response:""}},props:{db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},userInfo:{type:Object,required:!0}},components:{DatasetSelect:X},computed:{server:function(){return"production"}},methods:{importFile:function(){var e=this,t=document.getElementById("selectFiles").files;if(t.length<=0)return!1;var s=new FileReader;s.onload=function(t){var s=JSON.parse(t.target.result);e.manifestEntries=s;var a=n()(s.slice(0,100),null,2);document.getElementById("result").innerHTML=a},s.readAsText(t.item(0))},addFirebaseListener:function(){var e=this;this.db.ref("datasets/"+this.selectedDataset+"/sampleCounts").once("value",function(t){e.sampleCounts=v.a.map(t.val(),function(e,t){return{".key":t,".value":e}}),e.status="complete"})},refreshSamples:function(){this.manifestEntries.length?(this.status="refreshing",this.lockout=!0,this.syncEntries(),this.lockout=!1,this.manifestEntries=[],this.addFirebaseListener()):document.getElementById("result").innerHTML="Please upload a file"},syncEntries:function(){var e=this,t=v.a.map(this.sampleCounts,function(e){return e[".key"]});this.updateManifest(t),v.a.map(t,function(t){e.manifestEntries.indexOf(t)<0&&e.db.ref("datasets/"+e.selectedDataset+"/sampleCounts").child(t).remove()})},updateManifest:function(e){var t=this,s=v.a.filter(this.manifestEntries,function(t){return e.indexOf(t)<0}),a=s.length;this.target=a;var i=this.selectedDataset,r=0;a&&v.a.map(s,function(e){i&&t.db.ref("datasets/"+i+"/sampleCounts").child(e).set(0).then(function(){if(r+=1,t.progress+=1,r===a)return"done"}).catch(function(){return"error"})})},selectDataset:function(e){this.selectedDataset=e,this.status="loading...",this.addFirebaseListener()},onSubmit:function(e){this.formLockout=!0;var t=JSON.parse(n()(this.config.studies)),s=JSON.parse(n()(this.config.datasets)),a=this.$refs["new-study-text"].localValue.replace(/[^0-9a-z]/gi,""),i=this.$refs["new-dataset-text"].localValue,r=i.replace(/[^0-9a-z]/gi,""),o=this.$refs["new-bucket-text"].localValue;if(s[r])this.error="Dataset name already in use";else if(t[a]&&"new-study"===e)this.error="Study name already in use";else{if("new-study"===e){var u={text:["This is a new study! An admin will update this shortly."],logo:"brainswipes.png",title:"Help QC "+a+" Images!"};t[a]={available:this.available,datasets:[r],about:u},this.setUserStudyPermissions(),this.$emit("changePermissions")}else"existing-study"===e?t[a].datasets.push(r):console.log("Invalid submit mode");s[r]={archived:!1,bucket:o,name:i,about:{text:["This is a new dataset! An admin will update this shortly."]}},this.db.ref("/config/datasets").set(s),this.db.ref("/config/studies").set(t),this.changeSelectionStage("start")}},changeAvailability:function(e){this.available=e},setUserStudyPermissions:function(){var e=this.$refs["new-study-text"].localValue;this.requestUserRolesUpdate(e,this.available)},enableForm:function(){this.formDisabled=0===this.$refs["new-dataset-text"].localValue.length||0===this.$refs["new-bucket-text"].localValue.length||0===this.selectedStudy.length},requestUserRolesUpdate:function(e,t){return new me.a(function(s,a){var r=new XMLHttpRequest;r.open("POST","/addStudy",!0),r.setRequestHeader("Content-Type","application/json"),r.onload=s,r.onerror=a,r.send(n()({study:e,available:t,currentUser:i.a.auth().currentUser.uid}))})},archiveDataset:function(e){this.db.ref("/config/datasets/"+e+"/archived").set(!this.config.datasets[e].archived)},changeSelectionStage:function(e){this.showModifyDataset=!1,this.formLockout=!1,this.selectionStage=e,this.selectDataset="",this.selectedStudy="",this.error=""},activateDataset:function(e,t){this.selectedDataset=t,this.selectedStudy=e,this.showModifyDataset=!0,this.updateMethod="",this.response="",this.status="loading...",this.addFirebaseListener()},activateStudy:function(){this.updateMethod="",this.showModifyDataset=!1},selectStudy:function(e){this.selectedStudy=e},setUpdateMethod:function(e){this.updateMethod=e},setTutorial:function(e){var t=!0;Object.hasOwn(this.config.datasets[this.selectedDataset],"tutorials")&&(t=!this.config.datasets[this.selectedDataset].tutorials[e]),this.db.ref("/config/datasets/"+this.selectedDataset+"/tutorials/"+e).set(t)}},beforeRouteEnter:function(e,t,s){var a=this;s(function(){var e=l()(u.a.mark(function e(t){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.auth().currentUser.getIdTokenResult(!0);case 2:r=e.sent,r.claims.admin?(t.allowed=!0,s()):t.$router.push({name:"Unauthorized"});case 5:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}())}},We={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.allowed,expression:"allowed"}],attrs:{id:"manifest"}},[s("b-container",["start"===e.selectionStage?s("div",[s("h1",{staticClass:"manifest-title"},[e._v("Modify an existing dataset or create a new one?")]),e._v(" "),s("div",[s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.changeSelectionStage("modify-existing")}}},[e._v("Modify Existing")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.changeSelectionStage("create-new")}}},[e._v("Create New")])],1)]):"create-new"===e.selectionStage?s("div",[s("h1",{staticClass:"manifest-title"},[e._v("Add dataset to existing study or create new study?")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.changeSelectionStage("existing-study")}}},[e._v("Existing Study")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.changeSelectionStage("new-study")}}},[e._v("New Study")]),e._v(" "),s("b-button",{attrs:{variant:"outline-warning"},on:{click:function(t){return e.changeSelectionStage("start")}}},[e._v("Start Over")])],1):"modify-existing"===e.selectionStage?s("div",[s("h1",{staticClass:"manifest-title"},[e._v("Select dataset to modify")]),e._v(" "),s("b-button",{attrs:{variant:"outline-warning"},on:{click:function(t){return e.changeSelectionStage("start")}}},[e._v("Start Over")]),e._v(" "),s("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!0,useGlobus:!1,userInfo:e.userInfo,redirectPath:"",redirectComponent:""},on:{activateDataset:e.activateDataset,activateStudy:e.activateStudy}})],1):"new-study"===e.selectionStage?s("div",[s("h1",{staticClass:"manifest-title"},[e._v("Create a new study and dataset")]),e._v(" "),s("b-button",{attrs:{variant:"outline-warning"},on:{click:function(t){return e.changeSelectionStage("start")}}},[e._v("Start Over")])],1):"existing-study"===e.selectionStage?s("div",[s("h1",{staticClass:"manifest-title"},[e._v("Select a study and create a new dataset")]),e._v(" "),s("b-button",{attrs:{variant:"outline-warning"},on:{click:function(t){return e.changeSelectionStage("start")}}},[e._v("Start Over")]),e._v(" "),e.lockout?e._e():s("div",{staticClass:"dataset-buttons-row"},e._l(Object.keys(e.config.studies),function(t){return s("b-button",{key:t,staticClass:"dataset-button",class:{selected:t===e.selectedStudy},on:{click:function(s){return e.selectStudy(t)}}},[e._v(e._s(t)+"\n        ")])}),1)],1):e._e(),e._v(" "),"new-study"===e.selectionStage||"existing-study"===e.selectionStage?s("div",[s("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Name of Study"}},[s("b-form-input",{ref:"new-study-text",attrs:{id:"new-study-text",disabled:e.formLockout||"existing-study"===e.selectionStage,autocomplete:"off"},on:{keyup:function(t){return e.enableForm()}},model:{value:e.selectedStudy,callback:function(t){e.selectedStudy=t},expression:"selectedStudy"}})],1),e._v(" "),s("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Name of Dataset"}},[s("b-form-input",{ref:"new-dataset-text",attrs:{id:"new-dataset-text",disabled:e.formLockout,autocomplete:"off"},on:{keyup:function(t){return e.enableForm()}}})],1),e._v(" "),s("b-input-group",{staticClass:"mt-3",attrs:{prepend:"Name of MSI S3 Bucket"}},[s("b-form-input",{ref:"new-bucket-text",attrs:{id:"new-bucket-text",disabled:e.formLockout,autocomplete:"off"},on:{keyup:function(t){return e.enableForm()}}})],1),e._v(" "),"new-study"===e.selectionStage?s("b-button-group",{attrs:{size:"lg"}},[s("b-button",{staticClass:"dataset-button",class:{selected:!e.available},staticStyle:{"margin-right":"0"},attrs:{disabled:e.formLockout},on:{click:function(t){return e.changeAvailability(!1)}}},[e._v("Restricted access")]),e._v(" "),s("b-button",{staticClass:"dataset-button",class:{selected:e.available},attrs:{disabled:e.formLockout},on:{click:function(t){return e.changeAvailability(!0)}}},[e._v("Available to all users")])],1):e._e(),e._v(" "),s("div",[s("b-button",{attrs:{disabled:e.formDisabled||e.formLockout,type:"submit",variant:"primary"},on:{click:function(t){return e.onSubmit(e.selectionStage)}}},[e._v("Submit")]),e._v(" "),s("b-button",{attrs:{disabled:e.formLockout,type:"submit",variant:"primary"},on:{click:function(t){return e.changeSelectionStage("start")}}},[e._v("Cancel")])],1)],1):e._e(),e._v(" "),e.showModifyDataset?s("div",["s3"==e.updateMethod?s("div",[s("p",[e._v("S3 update disabled on production server due to resource limitations.")]),e._v(" "),s("p",[e._v("Run updateSampleFromS3.js in the BrainSwipes tools directory.")])]):"json"==e.updateMethod?s("div",["complete"==e.status?s("p",{staticClass:"lead"},[e._v("You have "+e._s(e.sampleCounts.length)+" items currently")]):e._e(),e._v(" "),"complete"==e.status?s("p",[s("b",[e._v("Data Source:")]),e._v(" "),s("input",{attrs:{type:"file",id:"selectFiles",value:"Import"}}),s("br"),e._v(" "),s("b-button",{attrs:{variant:"warning",id:"import"},on:{click:e.importFile}},[e._v("Import The File!")])],1):e._e(),e._v(" "),"complete"==e.status?s("p",{staticClass:"mt-3 pt-3"},[e._v("Click the button below to sync your firebase database with your manifest.")]):e._e(),e._v(" "),s("div",{staticClass:"mb-3 pb-3"},["complete"==e.status?s("b-button",{on:{click:e.refreshSamples}},[s("span",[e._v(" Refresh Sample List ")])]):s("div",[s("p",[e._v(e._s(e.status)+" "+e._s(e.progress)+" / "+e._s(e.target))]),e._v(" "),s("b-progress",{staticClass:"mb-2",attrs:{value:e.progress,max:e.target,variant:"info",striped:""}})],1)],1),e._v(" "),e.manifestEntries.length&&"complete"==e.status?s("div",{staticClass:"mt-3 pt-3"},[s("small",[e._v("\n            Here are a few items in your manifest file. There are "+e._s(e.manifestEntries.length)+" items in total\n          ")])]):e._e(),e._v(" "),"complete"==e.status?s("div",{staticClass:"file-import"},[s("pre",{attrs:{id:"result"}})]):e._e()]):"archive"==e.updateMethod?s("div",[s("div",{staticClass:"archived"},[s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.archiveDataset(e.selectedDataset)}}},[e._v(e._s(e.config.datasets[e.selectedDataset].archived?e.config.datasets[e.selectedDataset].name+" is archived. Click to un-archive.":"Click to archive "+e.config.datasets[e.selectedDataset].name))]),e._v(" "),s("p",[e._v("Archived studies cannot be swiped on, but their data can still be viewed.")])],1)]):"tutorial"==e.updateMethod?s("div",e._l(Object.keys(e.config.learn.tutorials),function(t){return s("b-button",{key:t,class:Object.hasOwn(e.config.datasets[e.selectedDataset],"tutorials")?e.config.datasets[e.selectedDataset].tutorials[t]?"btn-swipes":"btn-unavilable":"btn-unavailable",on:{click:function(s){return e.setTutorial(t)}}},[e._v("\n            "+e._s(e.config.learn.tutorials[t].name)+"\n          ")])}),1):s("div",[s("p",{staticClass:"lead"},[e._v("Choose update method")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.setUpdateMethod("tutorial")}}},[e._v("Set Tutorials")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.setUpdateMethod("archive")}}},[e._v("Archive the Dataset")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.setUpdateMethod("json")}}},[e._v("Manifest JSON")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.setUpdateMethod("s3")}}},[e._v("S3")])],1)]):e._e(),e._v(" "),s("b-alert",{attrs:{show:e.error.length,variant:"danger",dismissible:""},on:{dismissed:function(t){return e.changeSelectionStage("start")}}},[e._v(e._s(e.error))])],1)],1)},staticRenderFns:[]};var Xe=s("VU/8")(He,We,!1,function(e){s("xu+l")},null,null).exports,Ze=s("ZEv8"),Ke=s.n(Ze),$e=s("bOdI"),et=s.n($e),tt=s("HJCm"),st=s.n(tt);a.default.use(st.a),a.default.component("apexchart",st.a);var at={name:"numberOfSwipesByUser",data:function(){return{loading:!0,chartOptions:{},series:{}}},props:{dataset:{type:String,required:!0},db:{type:Object,required:!0}},methods:{createChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,h,m;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.db.ref("datasets/"+e+"/votes"),s.next=3,a.once("value");case 3:i=s.sent,r=i.val(),n=v.a.reduce(r,function(e,t){var s,a=t.user,i=1===t.response?"pass":"fail",r=1===t.response?"fail":"pass";return e[a]?e[a][i]+=1:e[a]=(s={user:a},et()(s,i,1),et()(s,r,0),s),e},{}),o=v.a.sortBy(n,[function(e){return e.pass+e.fail}]),c=[],l=[],d=[],o.forEach(function(e){c.push(e.user),l.push(e.pass),d.push(e.fail)}),c=v.a.reverse(c),l=v.a.reverse(l),d=v.a.reverse(d),h={chart:{type:"bar",height:350,toolbar:{show:!1},stacked:!0},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},title:{text:"Number of Swipes by User"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:c},fill:{opacity:1},colors:["#00C400","#C40000"]},m=[{name:"Number of Passes",data:l},{name:"Number of Fails",data:d}],t.chartOptions=h,t.series=m,t.loading=!1;case 19:case"end":return s.stop()}},s,t)}))()}},computed:{propsToWatch:function(){return[this.dataset]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset)},immediate:!0,deep:!0}}},it={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.loading?t("div",[this._v("\n    LOADING\n  ")]):t("div",{attrs:{id:"numberOfSwipesByUser"}},[t("div",{staticClass:"chart-wrapper"},[t("apexchart",{attrs:{type:"bar",height:"500",options:this.chartOptions,series:this.series}})],1)])])},staticRenderFns:[]};var rt=s("VU/8")(at,it,!1,function(e){s("YBS4")},"data-v-6e37bc7f",null).exports,nt=s("INCx"),ot=s.n(nt),ut={name:"Legend",data:function(){return{hidden:!0,tip:""}},props:{gradientArray:{type:Array,required:!0},max:{type:Number,required:!0},min:{type:Number,required:!0},label:{type:String,required:!0}},methods:{legendMouseOver:function(e){this.tip=""+ot()((this.max-this.min)/this.gradientArray.length*(e+1))+this.label,this.hidden=!1},legendMouseOff:function(){this.hidden=!0}}},ct={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"legend"}},[s("svg",{attrs:{width:"20",height:"200"}},e._l(e.gradientArray,function(t,a){return s("rect",{key:t,style:{fill:t},attrs:{y:10*(e.gradientArray.length-a-1),x:(e.gradientArray.length-a)/2,width:a+1,height:"10"},on:{mouseover:function(t){return e.legendMouseOver(a)},mouseout:function(t){return e.legendMouseOff()}}})}),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],ref:"legendtooltip",attrs:{id:"legend-tooltip"}},[e._v("\n    "+e._s(e.tip)+"\n  ")])])},staticRenderFns:[]};var lt=s("VU/8")(ut,ct,!1,function(e){s("xEaY")},"data-v-6416c7eb",null).exports;a.default.use(st.a),a.default.component("apexchart",st.a),a.default.component("Legend",lt);var dt={name:"catchTrialsbyUser",data:function(){return{loading:!0,parentChartOptions:{},parentChartSeries:{},childChartOptions:{},childChartSeries:[],showChild:0,selectedCategory:"",samplesByModality:{},maxSwipes:15}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0},gradientArray:{type:Array,required:!0}},methods:{createParentChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,h,m,p,f,g,b,y,w;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loading=!0,a=t.db.ref("datasets/"+e+"/catch/sampleCounts"),s.next=4,a.once("value");case 4:return i=s.sent,r=i.val(),n=t.db.ref("datasets/"+e+"/catch/votes"),s.next=9,n.once("value");case 9:o=s.sent,c=o.val(),l=v.a.reduce(c,function(e,t){var s="pass"===r[t.sample]?1:0,a=t.response===s;return Object.hasOwn(e,t.user)?e[t.user].push({sample:t.sample,wasCorrect:a}):e[t.user]=[{sample:t.sample,wasCorrect:a}],e},{}),d=[],h=v.a.reduce(l,function(e,t,s){var a=v.a.reduce(t,function(e,t){return e=t.wasCorrect?e+1:e},0),i=t.length;return e[s]={numberCorrect:a,totalTrials:i},d.push(i),e},{}),t.maxSwipes=Math.max.apply(Math,d),m=v.a.reduce(h,function(e,t,s){return e[s]=(t.numberCorrect/t.totalTrials).toFixed(2),e},{}),(p=v.a.toPairs(m)).sort(function(e,t){return t[1]-e[1]}),f=[],g=[],p.forEach(function(e){f.push(e[0]),g.push(e[1])}),b=[],p.forEach(function(e,s){b.push(t.formatMarkers(h[e[0]].totalTrials,s))}),y={chart:{height:500,type:"scatter",toolbar:{show:!1},zoom:{enabled:!1,type:"xy"}},dataLabels:{enabled:!1},title:{text:"Correct Decision Rate for Catch Trials by User"},xaxis:{type:"category",categories:f,labels:{rotate:-60,rotateAlways:!0}},markers:{hover:{size:20},discrete:b},legend:{show:!1},tooltip:{y:{formatter:function(){return""},title:{formatter:function(e,t){return"<p>"+e+": <strong>"+t.series[0][t.dataPointIndex]+"</strong></p><p>Trials Swiped: <strong>"+h[p[t.dataPointIndex][0]].totalTrials+"</strong></p>"}}}}},w=[{name:"Correctness Ratio",data:g}],t.parentChartOptions=y,t.parentChartSeries=w,t.loading=!1;case 28:case"end":return s.stop()}},s,t)}))()},createChildChart:function(e,t){var s={chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4}},dataLabels:{enabled:!0},colors:t,title:{text:"Number of images with "+e+" vote"+(1==e?"":"s")+" by image type"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:h()(this.samplesByModality[e])},fill:{opacity:1}},a=[{name:"Number of samples",data:D()(this.samplesByModality[e])}];this.childChartOptions=s,this.childChartSeries=a},handleClick:function(e,t){this.showChild=e!==this.selectedCategory,this.showChild?this.selectedCategory=e:this.selectedCategory="",this.createChildChart(e,t)},formatMarkers:function(e,t){var s=this.getCategory(e);return{seriesIndex:0,dataPointIndex:t,fillColor:s.color,strokeColor:s.color,size:s.size,shape:"circle"}},getCategory:function(e){var t=0;return this.categories.every(function(s,a){var i=e>s.cutoff+1;return t=a,i}),this.categories[t]}},computed:{categories:function(){var e=this,t=[];return this.gradientArray.forEach(function(s,a){var i=e.maxSwipes/e.gradientArray.length*a;t.push({cutoff:i,color:s,size:1.5*(a+1)})}),t},propsToWatch:function(){return[this.dataset]}},watch:{propsToWatch:{handler:function(){this.createParentChart(this.dataset)},immediate:!0,deep:!0}}},ht={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("div",[e._v("\n    LOADING\n  ")]):s("div",{attrs:{id:"catchTrialsbyUser"}},[s("div",{class:{split:e.showChild},attrs:{id:"parentChart"}},[s("apexchart",{attrs:{type:"scatter",height:"350",options:e.parentChartOptions,series:e.parentChartSeries}})],1),e._v(" "),s("div",{class:{childActive:e.showChild},attrs:{id:"childChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.childChartOptions,series:e.childChartSeries}})],1),e._v(" "),s("Legend",{attrs:{max:e.maxSwipes,min:0,gradientArray:e.gradientArray,label:" Samples Swiped"}})],1)])},staticRenderFns:[]};var mt=s("VU/8")(dt,ht,!1,function(e){s("mgsM")},null,null).exports,pt=s("AYPQ"),ft=s.n(pt);a.default.use(st.a),a.default.component("apexchart",st.a);var gt={name:"survivingSessions",data:function(){return{loading:!0,chartOptions:{chart:{height:350,type:"line",toolbar:{show:!1}},dataLabels:{enabled:!1},title:{text:"Number of Surviving Scans at Different Slice Rating Thresholds"}},series:{}}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0},excludedUsers:{type:Array,required:!0},minSwipes:{type:Number,required:!0},sliceThreshold:{type:Number,required:!0}},methods:{createChart:function(e,t,s){var a=this;return l()(u.a.mark(function i(){var r,n,o,c,l,d,m,p,f,g,b,y,w,_,C,S,T,k,A;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a.loading=!0,r=RegExp("T1"),n=RegExp("T2"),o=RegExp("_task"),c=RegExp("Atlas"),l=RegExp("_(run-\\d*?)_"),d=a.db.ref("datasets/"+e+"/votes"),i.next=9,d.once("value");case 9:m=i.sent,p=t.map(function(e){return"user!="+e}).join(" && "),f=ft()("[**][* "+p+"]",{data:m.val()}),g=v.a.reduce(f.references[0],function(e,t){var s=t.sample;return(e[s]||(e[s]=[])).push(t.response),e},{}),b=v.a.reduce(g,function(e,t,a){return t.length>=s&&(e[a]=t),e},{}),y=v.a.mapValues(b,function(e){return v.a.mean(e)}),w=v.a.reduce(y,function(e,t,s){var a="",i=RegExp("sub-.*_ses.*?_");try{a=s.match(i)}catch(e){console.log(s),console.log(e)}var u="Other";if(s.match(o))u=s.match(l)?"fMRI_"+s.match(l)[1]:"fMRI";else if(s.match(c)){if(s.match(l))u="Atlas_"+s.match(l)[1];else u="Atlas"}else if(s.match(r)){if(s.match(l))u="T1_"+s.match(l)[1];else u="T1"}else if(s.match(n)){if(s.match(l))u="T2_"+s.match(l)[1];else u="T2"}return a&&(e[a]?(e[a][u]||(e[a][u]=[])).push(t):e[a]=et()({},u,[t])),e},{}),_=v.a.reduce(w,function(e,t,s){var a=v.a.mapValues(t,function(e){return v.a.min(e)});return e[s]=a,e},{}),C=v.a.reduce(_,function(e,t,s){var i={};return h()(t).forEach(function(e){var s=a.findModality(e);i[s]=i[s]||{},i[s][t[e]]=(i[s][t[e]]||0)+1}),e[s]=i,e},{}),S=v.a.reduce(C,function(e,t){return h()(t).forEach(function(s){h()(t[s]).forEach(function(a){e[s][a]=(e[s][a]||0)+t[s][a]})}),e},{T1:{},T2:{},Atlas:{},fMRI:{}}),T=v.a.reduce(S,function(e,t,s){var a=v.a.reduce(t,function(e,t,s){for(var a=0;a<105;a+=5)s>=a/100&&(e[a]+=t);return e},{0:0,5:0,10:0,15:0,20:0,25:0,30:0,35:0,40:0,45:0,50:0,55:0,60:0,65:0,70:0,75:0,80:0,85:0,90:0,95:0,100:0});return e[s]=a,e},{T1:{},T2:{},Atlas:{},fMRI:{}}),k=v.a.reduce(T,function(e,t,s){return e[s]=v.a.toPairs(t),e},{}),A=v.a.reduce(k,function(e,t,s){var a=v.a.reduce(t,function(e,t){return e.push(v.a.map(t,v.a.parseInt)),e},[]);return e[s]=a,e},{}),a.series=[{name:"T1",data:A.T1},{name:"T2",data:A.T2},{name:"fMRI",data:A.fMRI},{name:"Atlas",data:A.Atlas}],a.loading=!1;case 24:case"end":return i.stop()}},i,a)}))()},findModality:function(e){var t=RegExp("T1"),s=RegExp("T2"),a=RegExp("fMRI"),i=RegExp("Atlas");return e.match(a)?"fMRI":e.match(i)?"Atlas":e.match(t)?"T1":e.match(s)?"T2":"Other"}},computed:{propsToWatch:function(){return[this.dataset,this.excludedUsers,this.minSwipes]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset,this.excludedUsers,this.minSwipes)},immediate:!0,deep:!0}}},vt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.loading?t("div",[this._v("\n    LOADING\n  ")]):t("div",{attrs:{id:"survivingSessions"}},[t("apexchart",{attrs:{type:"line",height:"350",options:this.chartOptions,series:this.series}})],1)])},staticRenderFns:[]};var bt=s("VU/8")(gt,vt,!1,function(e){s("uBUP")},null,null).exports;a.default.use(st.a),a.default.component("apexchart",st.a);var yt={name:"totalTimeSwiping",data:function(){return{loading:!0,parentChartOptions:{},parentChartSeries:{},childChartOptions:{},childChartSeries:[],showChild:0,selectedCategory:"",startDate:"",endDate:"",votesByDay:{}}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0}},methods:{createParentChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,m,p,f;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loading=!0,a=t.db.ref("datasets/"+e+"/votes"),s.next=4,a.once("value");case 4:i=s.sent,r=i.val(),n=t.makeDateRangeObject(),o=v.a.reduce(r,function(e,t){if(Object.hasOwn(t,"datetime")){var s=new Date(t.datetime).toLocaleDateString();Object.hasOwn(n,s)&&(e[s]||(e[s]=[])).push({user:t.user,time:t.time})}return e},n),t.votesByDay=o,c=v.a.reduce(o,function(e,t,s){var a=v.a.reduce(t,function(e,t){return e+=t.time},0);return e[s]=Math.round(a/1e3),e},{}),l=h()(c),d=D()(c),m=Ke.a.setGradient("#FF0000","#FFFF00","#00FF00","#0000FF").setMidpoint(l.length).getArray(),p={chart:{height:350,type:"bar",toolbar:{show:!1},events:{dataPointSelection:function(e,s,a){var i=a.w.config.xaxis.categories[a.dataPointIndex],r=a.w.config.colors[a.dataPointIndex];t.handleClick(i,r)},legendClick:function(e,s,a){var i=a.config.xaxis.categories[s],r=a.config.colors[s];t.handleClick(i,r)}}},plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!0},legend:{show:!1},colors:m,title:{text:"Time Spent Swiping per Day (seconds)"},subtitle:{text:"(Click on bar to see user specific data)",offsetX:15},xaxis:{categories:l},states:{active:{filter:{type:"none",value:0}}}},f=[{name:"Seconds Spent Swiping",data:d}],t.parentChartOptions=p,t.parentChartSeries=f,t.loading=!1;case 18:case"end":return s.stop()}},s,t)}))()},createChildChart:function(e,t){var s=v.a.reduce(this.votesByDay[e],function(e,t){return e[t.user]=e[t.user]?e[t.user]+t.time:t.time,e},{}),a=v.a.reduce(s,function(e,t,s){return e[s]=Math.round(t/1e3),e},{}),i={chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4}},dataLabels:{enabled:!0},colors:t,title:{text:"Seconds Spent Swiping on "+e+" by user"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:h()(a)},fill:{opacity:1}},r=[{name:"Seconds Spent Swiping",data:D()(a)}];this.childChartOptions=i,this.childChartSeries=r},handleClick:function(e,t){this.showChild=e!==this.selectedCategory,this.showChild?this.selectedCategory=e:this.selectedCategory="",this.createChildChart(e,t)},initDates:function(){var e=new Date;e.setMonth(e.getMonth()-1),this.startDate=e<this.earliestDate?this.earliestDate:e;var t=new Date;this.endDate=t},makeDateRangeObject:function(){for(var e={},t=new Date(this.startDate);t<=this.endDate;){e[t.toLocaleDateString()]=[],t.setDate(t.getDate()+1)}return e}},computed:{propsToWatch:function(){return[this.dataset,this.startDate,this.endDate]},today:function(){return new Date},earliestDate:function(){var e=new Date(1657311267608);return e.setHours(0,0,0,0),e}},watch:{propsToWatch:{handler:function(){this.createParentChart(this.dataset)},deep:!0}},mounted:function(){this.initDates()}},wt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("div",[e._v("\n    LOADING\n  ")]):s("div",{attrs:{id:"totalTimeSwiping"}},[s("div",{attrs:{id:"datePicker"}},[s("b-form-datepicker",{attrs:{min:e.earliestDate,max:e.today,"value-as-date":!0},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),s("b-form-datepicker",{attrs:{min:e.earliestDate,max:e.today,"value-as-date":!0},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),s("div",{attrs:{id:"totalTimeSwipingCharts"}},[s("div",{class:{split:e.showChild},attrs:{id:"parentChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.parentChartOptions,series:e.parentChartSeries}})],1),e._v(" "),s("div",{class:{childActive:e.showChild},attrs:{id:"childChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.childChartOptions,series:e.childChartSeries}})],1)])])])},staticRenderFns:[]};var _t=s("VU/8")(yt,wt,!1,function(e){s("ByQj")},null,null).exports,Ct=s("t4zo");a.default.use(st.a),a.default.component("apexchart",st.a);var St={name:"sessionsPassFail",data:function(){return{loading:!0,chartOptions:{},chartSeries:{},passedScans:{}}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0},excludedUsers:{type:Array,required:!0},minSwipes:{type:Number,required:!0},sliceThreshold:{type:Number,required:!0}},methods:{createChart:function(e,t,s,a){var i=this;return l()(u.a.mark(function r(){var n,o,c,l,d,m,p,f,g,b,y,w,_,C,S,T,k;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i.loading=!0,n=RegExp("T1"),o=RegExp("T2"),c=RegExp("_task"),l=RegExp("Atlas"),d=RegExp("_(run-\\d*?)_"),m=i.db.ref("datasets/"+e+"/votes"),r.next=9,m.once("value");case 9:p=r.sent,f=t.map(function(e){return"user!="+e}).join(" && "),g=ft()("[**][* "+f+"]",{data:p.val()}),b=v.a.reduce(g.references[0],function(e,t){var s=t.sample;return(e[s]||(e[s]=[])).push(t.response),e},{}),y=v.a.reduce(b,function(e,t,s){return t.length>=a&&(e[s]=t),e},{}),w=v.a.mapValues(y,function(e){return v.a.mean(e)}),_=v.a.reduce(w,function(e,t,s){var a="",i=RegExp("sub-.*_ses.*?_");try{a=s.match(i)}catch(e){console.log(s),console.log(e)}var r="Other";if(s.match(c))r=s.match(d)?"fMRI_"+s.match(d)[1]:"fMRI";else if(s.match(l)){if(s.match(d))r="Atlas_"+s.match(d)[1];else r="Atlas"}else if(s.match(n)){if(s.match(d))r="T1_"+s.match(d)[1];else r="T1"}else if(s.match(o)){if(s.match(d))r="T2_"+s.match(d)[1];else r="T2"}return a&&(e[a]||(e[a]=[])).push(et()({},r,t)),e},{}),C=v.a.reduce(_,function(e,t,a){var i=v.a.reduce(t,function(e,t){return e[h()(t)]=Object.hasOwn(e,h()(t))?e[h()(t)]&&D()(t)>=s:D()(t)>=s,e},{});return e[a]=i,e},{}),i.passedScans=C,S=v.a.reduce(C,function(e,t){return h()(t).forEach(function(s){var a=s,i=s.match(/(.*)_run/);i&&(a=i[1]),t[s]?e[a].Pass+=1:e[a].Fail+=1}),e},{T1:{Pass:0,Fail:0},T2:{Pass:0,Fail:0},Atlas:{Pass:0,Fail:0},fMRI:{Pass:0,Fail:0},Other:{Pass:0,Fail:0}}),T={chart:{height:350,type:"bar",stacked:!0,stackType:"100%",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!1}},dataLabels:{enabled:!0},title:{text:"Number of Scans by Pass/Fail"},xaxis:{categories:["T1","T2","Atlas","fMRI"]},states:{active:{filter:{type:"none",value:0}}}},k=[{name:"Number of Passed Scans",data:[S.T1.Pass,S.T2.Pass,S.Atlas.Pass,S.fMRI.Pass]},{name:"Number of Failed Scans",data:[S.T1.Fail,S.T2.Fail,S.Atlas.Fail,S.fMRI.Fail]}],i.chartOptions=T,i.chartSeries=k,i.loading=!1;case 24:case"end":return r.stop()}},r,i)}))()},findModality:function(e){var t=RegExp("T1"),s=RegExp("T2"),a=RegExp("fMRI"),i=RegExp("Atlas");return e.match(a)?"fMRI":e.match(i)?"Atlas":e.match(t)?"T1":e.match(s)?"T2":"Other"},generateCSV:function(){var e=v.a.reduce(this.passedScans,function(e,t,s){return e+=v.a.reduce(t,function(e,t,a){return e+=s+","+a+","+t+"\n"},"")},"Session,Scan,Pass\n"),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(Ct.saveAs)(t,"BrainSwipes-"+this.dataset+"-session-results.csv")}},computed:{propsToWatch:function(){return[this.dataset,this.excludedUsers,this.sliceThreshold,this.minSwipes]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset,this.excludedUsers,this.sliceThreshold,this.minSwipes)},immediate:!0,deep:!0}}},Tt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("div",[e._v("\n    LOADING\n  ")]):s("div",{attrs:{id:"sessionsPassFail"}},[s("div",[s("p",[e._v("Download a CSV file listing session, scan type and whether it passed or failed.")]),e._v(" "),s("b-button",{on:{click:e.generateCSV}},[s("svg",{staticClass:"bi bi-filetype-csv",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM3.517 14.841a1.13 1.13 0 0 0 .401.823c.13.108.289.192.478.252.19.061.411.091.665.091.338 0 .624-.053.859-.158.236-.105.416-.252.539-.44.125-.189.187-.408.187-.656 0-.224-.045-.41-.134-.56a1.001 1.001 0 0 0-.375-.357 2.027 2.027 0 0 0-.566-.21l-.621-.144a.97.97 0 0 1-.404-.176.37.37 0 0 1-.144-.299c0-.156.062-.284.185-.384.125-.101.296-.152.512-.152.143 0 .266.023.37.068a.624.624 0 0 1 .246.181.56.56 0 0 1 .12.258h.75a1.092 1.092 0 0 0-.2-.566 1.21 1.21 0 0 0-.5-.41 1.813 1.813 0 0 0-.78-.152c-.293 0-.551.05-.776.15-.225.099-.4.24-.527.421-.127.182-.19.395-.19.639 0 .201.04.376.122.524.082.149.2.27.352.367.152.095.332.167.539.213l.618.144c.207.049.361.113.463.193a.387.387 0 0 1 .152.326.505.505 0 0 1-.085.29.559.559 0 0 1-.255.193c-.111.047-.249.07-.413.07-.117 0-.223-.013-.32-.04a.838.838 0 0 1-.248-.115.578.578 0 0 1-.255-.384h-.765ZM.806 13.693c0-.248.034-.46.102-.633a.868.868 0 0 1 .302-.399.814.814 0 0 1 .475-.137c.15 0 .283.032.398.097a.7.7 0 0 1 .272.26.85.85 0 0 1 .12.381h.765v-.072a1.33 1.33 0 0 0-.466-.964 1.441 1.441 0 0 0-.489-.272 1.838 1.838 0 0 0-.606-.097c-.356 0-.66.074-.911.223-.25.148-.44.359-.572.632-.13.274-.196.6-.196.979v.498c0 .379.064.704.193.976.131.271.322.48.572.626.25.145.554.217.914.217.293 0 .554-.055.785-.164.23-.11.414-.26.55-.454a1.27 1.27 0 0 0 .226-.674v-.076h-.764a.799.799 0 0 1-.118.363.7.7 0 0 1-.272.25.874.874 0 0 1-.401.087.845.845 0 0 1-.478-.132.833.833 0 0 1-.299-.392 1.699 1.699 0 0 1-.102-.627v-.495Zm8.239 2.238h-.953l-1.338-3.999h.917l.896 3.138h.038l.888-3.138h.879l-1.327 4Z"}})])]),e._v(" "),s("hr"),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),s("apexchart",{attrs:{type:"bar",height:"350",options:e.chartOptions,series:e.chartSeries}})],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A scan "),t("span",{staticClass:"pass"},[this._v("passes")]),this._v(" if all images from the scan "),t("span",{staticClass:"pass"},[this._v("pass")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If any image from a scan "),t("span",{staticClass:"fail"},[this._v("fails")]),this._v(", the scan "),t("span",{staticClass:"fail"},[this._v("fails")]),this._v(".")])}]};var kt=s("VU/8")(St,Tt,!1,function(e){s("mQuT")},"data-v-f118914c",null).exports;a.default.use(st.a),a.default.component("apexchart",st.a);var At={name:"neededUserSwipes",data:function(){return{loading:!0,chartOptions:{},series:{}}},props:{dataset:{type:String,required:!0},study:{type:String,required:!0},db:{type:Object,required:!0},config:{type:Object,required:!0},wantedSwipes:{type:Number,required:!0},excludedUsers:{type:Array,required:!0}},methods:{createChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,m,p,f,g,b,y,w,_,C,S,T,k;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.db.ref("datasets/"+e+"/votes"),s.next=3,a.once("value");case 3:return i=s.sent,r=i.val(),n=t.db.ref("datasets/"+e+"/sampleCounts"),s.next=8,n.once("value");case 8:if(o=s.sent,c=o.val(),l=!t.config.studies[t.study].available,d={},!l){s.next=19;break}return s.next=15,t.getStudyUsers();case 15:m=s.sent,d=v.a.reduce(r,function(e,t){var s=t.user;return Object.hasOwn(e,s)&&(e[s]+=1),e},m),s.next=20;break;case 19:d=v.a.reduce(r,function(e,s){var a=s.user;return t.excludedUsers.includes(a)||(e[a]?e[a]+=1:e[a]=1),e},{});case 20:p=[],h()(d).forEach(function(e){p.push([e,d[e]])}),f=p.sort(function(e,t){return t[1]-e[1]}),g=[],b=[],y=h()(c).length,w=h()(r).length,_=t.wantedSwipes*y-w,C=Math.max(0,Math.round(_/f.length)),S=[],f.forEach(function(e){g.push(e[0]),b.push(e[1]);var t=C-e[1];S.push(Math.max(0,t))}),T={chart:{type:"bar",height:350,toolbar:{show:!1},stacked:!0},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},title:{text:"Number of Swipes Needed by User"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:g},fill:{opacity:1},colors:["#00C400","#C40000"],annotations:{yaxis:[{y:C,borderColor:"#0096E3",label:{borderColor:"#0096E3",style:{color:"#fff",background:"#0096E3"},text:C+" swipes remaining per user to finish QCing this dataset"}}]}},k=[{name:"Swipes Completed",data:b},{name:"Swipes Needed",data:S}],t.chartOptions=T,t.series=k,t.loading=!1;case 36:case"end":return s.stop()}},s,t)}))()},requestAllUserRoles:function(){return new me.a(function(e,t){var s=new XMLHttpRequest;s.open("POST","/getAllUsers",!0),s.setRequestHeader("Content-Type","application/json"),s.onload=e,s.onerror=t,s.send(n()({currentUser:i.a.auth().currentUser.uid}))})},getStudyUsers:function(){var e=this;return l()(u.a.mark(function t(){var s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestAllUserRoles().then(function(e){return JSON.parse(e.currentTarget.responseText)});case 2:return s=t.sent,s=h()(v.a.pickBy(s,function(t){return t.datasets[e.study]})),s=v.a.difference(s,e.excludedUsers),t.abrupt("return",v.a.zipObject(s,Array(s.length).fill(0)));case 6:case"end":return t.stop()}},t,e)}))()}},computed:{propsToWatch:function(){return[this.dataset,this.wantedSwipes,this.excludedUsers]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset)},immediate:!0,deep:!0}}},Dt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.loading?t("div",[this._v("\n    LOADING\n  ")]):t("div",{attrs:{id:"neededUserSwipes"}},[t("div",{staticClass:"chart-wrapper"},[t("apexchart",{attrs:{type:"bar",height:"500",options:this.chartOptions,series:this.series}})],1)])])},staticRenderFns:[]};var Mt=s("VU/8")(At,Dt,!1,function(e){s("uN9Y")},"data-v-d51e7fde",null).exports;a.default.use(st.a),a.default.component("apexchart",st.a),a.default.component("Legend",lt);var It={name:"userCorrectness",data:function(){return{chartOptions:{chart:{height:500,type:"scatter",toolbar:{show:!1},zoom:{enabled:!1,type:"xy"}},dataLabels:{enabled:!1},title:{text:"Correct Decision Rate for Slices by User Relative to Other Users"},xaxis:{type:"category",categories:[],labels:{}},markers:{},legend:{show:!1}},series:[{name:"init",data:[]}],loading:!0,sizes:[],maxSwipes:NaN,swipes:[]}},props:{dataset:{type:String,required:!0},threshold:{type:Number,required:!0},minVotes:{type:Number,required:!0},db:{type:Object,required:!0},gradientArray:{type:Array,required:!0}},computed:{categories:function(){var e=this,t=[];return this.gradientArray.forEach(function(s,a){var i=e.maxSwipes/e.gradientArray.length*a;t.push([i,s,1.5*(a+1)])}),t},propsToWatch:function(){return[this.dataset,this.threshold,this.minVotes]}},methods:{getUserCorrectness:function(e,t,s){var a=this;return l()(u.a.mark(function i(){var r,n,o,c,l,d,h,m,p;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=a.db.ref("datasets/"+e+"/sampleSummary"),n=a.db.ref("datasets/"+e+"/votes"),i.next=4,r.once("value");case 4:return o=i.sent,i.next=7,n.once("value");case 7:return c=i.sent,l=o.val(),d=c.val(),h=v.a.reduce(d,function(e,t){var s=t.user,a=t.sample,i=t.response;return e[s]?e[s][a]=i:e[s]=et()({},a,i),e},{}),m=v.a.reduce(h,function(e,a,i){var r=v.a.reduce(a,function(e,a,i){var r=l[i].aveVote;if(l[i].count>=s&&(r>=t||r<=1-t)){var n=void 0;r>=t?n=a?1:0:r<=1-t&&(n=a?0:1),e.push(n)}return e},[]);return e[i]=r,e},{}),p=v.a.reduce(m,function(e,t,s){var a=v.a.reduce(t,function(e,t){return e+=t},0);return t.length&&(e[s]=[a,t.length]),e},{}),i.abrupt("return",p);case 14:case"end":return i.stop()}},i,a)}))()},createChart:function(e,t,s){var a=this;return l()(u.a.mark(function i(){var r,n,o,c,l,d,m;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a.loading=!0,i.next=3,a.getUserCorrectness(e,t,s);case 3:r=i.sent,n=[],o=[],h()(r).forEach(function(e){n.push([e,r[e][0],r[e][1],(r[e][0]/r[e][1]).toFixed(2)]),o.push(r[e][1])}),a.maxSwipes=Math.max.apply(Math,o),n.sort(function(e,t){return t[3]-e[3]}),c=[],l=[],d=[],m=[],n.forEach(function(e,t){l.push(e[0]),d.push(e[2]),c.push(e[3]),m.push(a.formatMarkers(e[2],t))}),a.series=[{name:"Correctness Ratio",data:c}],a.chartOptions.xaxis={type:"category",categories:l,labels:{rotate:-60,rotateAlways:!0}},a.chartOptions.markers={hover:{size:20},discrete:m},a.swipes=d,a.chartOptions.tooltip={y:{formatter:function(){return""},title:{formatter:function(e,t){return"<p>"+e+": <strong>"+t.series[0][t.dataPointIndex]+"</strong></p><p>Samples Swiped: <strong>"+d[t.dataPointIndex]+"</strong></p>"}}}},a.loading=!1;case 20:case"end":return i.stop()}},i,a)}))()},formatMarkers:function(e,t){var s=this.getCategory(e);return{seriesIndex:0,dataPointIndex:t,fillColor:s[1],strokeColor:s[1],size:s[2],shape:"circle"}},getCategory:function(e){var t=0;return this.categories.every(function(s,a){var i=e>s[0]+1;return t=a,i}),this.categories[t]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset,this.threshold,this.minVotes)},immediate:!0,deep:!0}}},xt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?e._e():s("div",[s("p",[e._v("Users are considered correct if:")]),e._v(" "),s("p",[e._v("They voted "),s("span",{staticClass:"pass"},[e._v("PASS")]),e._v(" on a slice with "),s("span",{staticClass:"data-value"},[e._v(e._s(e.threshold.toFixed(2)))]),e._v(" percent or higher average rating.")]),e._v(" "),s("p",[e._v("They voted "),s("span",{staticClass:"fail"},[e._v("FAIL")]),e._v(" on a slice with "),s("span",{staticClass:"data-value"},[e._v(e._s((1-e.threshold).toFixed(2)))]),e._v(" percent or lower average rating.")]),e._v(" "),s("p",[e._v("Slices outside of this range are excluded from this calculation.")]),e._v(" "),s("p",[e._v("Slices with less than "),s("span",{staticClass:"data-value"},[e._v(e._s(e.minVotes))]),e._v(" votes are excluded from this calculation.")])]),e._v(" "),e.loading?s("div",[e._v("\n    LOADING\n  ")]):s("div",{attrs:{id:"userCorrectness"}},[s("div",{staticClass:"chart-wrapper"},[s("apexchart",{attrs:{type:"scatter",height:"500",options:e.chartOptions,series:e.series}})],1),e._v(" "),s("Legend",{attrs:{max:e.maxSwipes,min:0,gradientArray:e.gradientArray,label:" Samples Swiped"}})],1)])},staticRenderFns:[]};var Ot=s("VU/8")(It,xt,!1,function(e){s("qqbI")},"data-v-0a53870e",null).exports,Lt=s("Gu7T"),Et=s.n(Lt);a.default.use(st.a),a.default.component("apexchart",st.a);var Nt={name:"avgTimePerVote",data:function(){return{loading:!0,avgTimePerVoteOptions:{},avgTimePerVoteSeries:{}}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0}},methods:{createChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loading=!0,a=t.db.ref("datasets/"+e+"/votes"),s.next=4,a.once("value");case 4:i=s.sent,r=i.val(),n=v.a.reduce(r,function(e,t){return Object.hasOwn(t,"time")&&(e[t.user]||(e[t.user]=[])).push(t.time),e},{}),o=v.a.reduce(n,function(e,s,a){var i=[s.length,Math.round(t.median(s))];return e.push({name:a,data:[i]}),e},[]),c={chart:{height:350,type:"scatter",toolbar:{show:!1}},dataLabels:{enabled:!1},xaxis:{tickAmount:10},legend:{show:!1},title:{text:"Median Time per Vote (milliseconds) vs Total Votes"},tooltip:{y:{formatter:function(e){return""+e},title:{formatter:function(){return"<p>Median milliseconds per vote</p>"}}},x:{formatter:function(e,t){return"<p>"+o[t.seriesIndex].name+"</p><p>"+e+" votes</p>"}}},states:{active:{filter:{type:"none",value:0}}}},t.avgTimePerVoteOptions=c,t.avgTimePerVoteSeries=o,t.loading=!1;case 12:case"end":return s.stop()}},s,t)}))()},median:function(e){if(0===e.length)throw new Error("Input array is empty");e=[].concat(Et()(e)).sort(function(e,t){return e-t});var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}},computed:{propsToWatch:function(){return[this.dataset]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset)},deep:!0}},mounted:function(){this.createChart(this.dataset)}},jt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.loading?t("div",[this._v("\n    LOADING\n  ")]):t("div",{attrs:{id:"avgTimePerVote"}},[t("div",{attrs:{id:"avgTimePerVoteChart"}},[t("apexchart",{attrs:{type:"scatter",height:"350",options:this.avgTimePerVoteOptions,series:this.avgTimePerVoteSeries}})],1)])])},staticRenderFns:[]};var Rt=s("VU/8")(Nt,jt,!1,function(e){s("ai1s")},"data-v-1a8cb106",null).exports;a.default.use(st.a),a.default.component("apexchart",st.a);var Ut={name:"numberOfVotes",data:function(){return{loading:!0,parentChartOptions:{},parentChartSeries:{},childChartOptions:{},childChartSeries:[],showChild:0,selectedCategory:"",samplesByModality:{}}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0}},methods:{createParentChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,m,p,f,g,b,y;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loading=!0,a=RegExp("T1"),i=RegExp("T2"),r=RegExp("_task"),n=RegExp("Atlas"),o=t.db.ref("datasets/"+e+"/sampleCounts"),s.next=8,o.once("value");case 8:c=s.sent,l=c.val(),d=v.a.reduce(l,function(e,t){return e[t]?e[t]+=1:e[t]=1,e},{}),m=h()(d),p=D()(d),f=v.a.reduce(l,function(e,t,s){var o="";return o=s.match(r)?"fMRI":s.match(n)?"Atlas":s.match(a)?"T1":s.match(i)?"T2":"Other",e[t]?e[t][o]?e[t][o]+=1:e[t][o]=1:e[t]=et()({},o,1),e},{}),t.samplesByModality=f,g=Ke.a.setGradient("#FF0000","#FFFF00","#00FF00","#0000FF").setMidpoint(p.length).getArray(),b={chart:{height:350,type:"bar",toolbar:{show:!1},events:{dataPointSelection:function(e,s,a){var i=a.w.config.xaxis.categories[a.dataPointIndex],r=a.w.config.colors[a.dataPointIndex];t.handleClick(i,r)},legendClick:function(e,s,a){var i=a.config.xaxis.categories[s],r=a.config.colors[s];t.handleClick(i,r)}}},plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!0},colors:g,title:{text:"Number of Slices with N votes"},subtitle:{text:"(Click on bar to see modality specific data)",offsetX:15},xaxis:{categories:m},states:{active:{filter:{type:"none",value:0}}}},y=[{name:"Number of samples",data:p}],t.parentChartOptions=b,t.parentChartSeries=y,t.loading=!1;case 21:case"end":return s.stop()}},s,t)}))()},createChildChart:function(e,t){var s={chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4}},dataLabels:{enabled:!0},colors:t,title:{text:"Number of images with "+e+" vote"+(1==e?"":"s")+" by image type"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:h()(this.samplesByModality[e])},fill:{opacity:1}},a=[{name:"Number of samples",data:D()(this.samplesByModality[e])}];this.childChartOptions=s,this.childChartSeries=a},handleClick:function(e,t){this.showChild=e!==this.selectedCategory,this.showChild?this.selectedCategory=e:this.selectedCategory="",this.createChildChart(e,t)}},computed:{propsToWatch:function(){return[this.dataset]}},watch:{propsToWatch:{handler:function(){this.createParentChart(this.dataset)},immediate:!0,deep:!0}}},qt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("div",[e._v("\n    LOADING\n  ")]):s("div",{attrs:{id:"numberOfVotes"}},[s("div",{class:{split:e.showChild},attrs:{id:"parentChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.parentChartOptions,series:e.parentChartSeries}})],1),e._v(" "),s("div",{class:{childActive:e.showChild},attrs:{id:"childChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.childChartOptions,series:e.childChartSeries}})],1)])])},staticRenderFns:[]};var Pt=s("VU/8")(Ut,qt,!1,function(e){s("SAhQ")},null,null).exports;a.default.use(st.a),a.default.component("apexchart",st.a);var zt={name:"forecastUsers",data:function(){return{loading:!0,chartOptions:{},series:{}}},props:{dataset:{type:String,required:!0},db:{type:Object,required:!0},wantedSwipes:{type:Number,required:!0}},methods:{createChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,m;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.db.ref("datasets/"+e+"/sampleCounts"),s.next=3,a.once("value");case 3:for(i=s.sent,r=i.val(),n=h()(r).length,o=[],c=[10,25,50,100,250,500,1e3,2500,5e3,1e4,25e3],l=0;l<c.length;l+=1)o.push(Math.round(n*t.wantedSwipes/c[l]));d={chart:{type:"line",height:350,toolbar:{show:!1}},dataLabels:{enabled:!1},title:{text:"Forecasted Number of Swipes Needed per User"},stroke:{show:!0,width:5,curve:"straight"},xaxis:{categories:c},fill:{opacity:1},colors:["#00C400","#C40000"]},m=[{name:"Swipes Needed Per User",data:o}],t.chartOptions=d,t.series=m,t.loading=!1;case 14:case"end":return s.stop()}},s,t)}))()}},computed:{propsToWatch:function(){return[this.dataset,this.wantedSwipes]}},watch:{propsToWatch:{handler:function(){this.createChart(this.dataset)},immediate:!0,deep:!0}}},Ft={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.loading?t("div",[this._v("\n    LOADING\n  ")]):t("div",{attrs:{id:"forecastUsers"}},[t("div",{staticClass:"chart-wrapper"},[t("apexchart",{attrs:{type:"line",height:"500",options:this.chartOptions,series:this.series}})],1)])])},staticRenderFns:[]};var Bt=s("VU/8")(zt,Ft,!1,function(e){s("FflS")},"data-v-e34e4b68",null).exports;a.default.use(st.a),a.default.component("apexchart",st.a);var Qt={name:"recentSwipes",data:function(){return{loading:!0,parentChartOptions:{},parentChartSeries:{},childChartOptions:{},childChartSeries:[],showChild:0,selectedCategory:"",startDate:"",endDate:"",votesByDay:{}}},props:{db:{type:Object,required:!0},dataset:{type:String,required:!0}},methods:{createParentChart:function(e){var t=this;return l()(u.a.mark(function s(){var a,i,r,n,o,c,l,d,m,p,f;return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loading=!0,a=t.db.ref("datasets/"+e+"/votes"),s.next=4,a.once("value");case 4:i=s.sent,r=i.val(),n=t.makeDateRangeObject(),o=v.a.reduce(r,function(e,t){if(Object.hasOwn(t,"datetime")){var s=new Date(t.datetime).toLocaleDateString();Object.hasOwn(n,s)&&(e[s]||(e[s]=[])).push(t.user)}return e},n),t.votesByDay=o,c=v.a.reduce(o,function(e,t,s){return e[s]=t.length,e},{}),l=h()(c),d=D()(c),m=Ke.a.setGradient("#FF0000","#FFFF00","#00FF00","#0000FF").setMidpoint(l.length).getArray(),p={chart:{height:350,type:"bar",toolbar:{show:!1},events:{dataPointSelection:function(e,s,a){var i=a.w.config.xaxis.categories[a.dataPointIndex],r=a.w.config.colors[a.dataPointIndex];t.handleClick(i,r)},legendClick:function(e,s,a){var i=a.config.xaxis.categories[s],r=a.config.colors[s];t.handleClick(i,r)}}},plotOptions:{bar:{borderRadius:4,horizontal:!1,distributed:!0}},dataLabels:{enabled:!0},legend:{show:!1},colors:m,title:{text:"Number of Swipes per Day"},subtitle:{text:"(Click on bar to see user specific data)",offsetX:15},xaxis:{categories:l},states:{active:{filter:{type:"none",value:0}}}},f=[{name:"Number of votes",data:d}],t.parentChartOptions=p,t.parentChartSeries=f,t.loading=!1;case 18:case"end":return s.stop()}},s,t)}))()},createChildChart:function(e,t){var s=v.a.reduce(this.votesByDay[e],function(e,t){return e[t]=e[t]?e[t]+1:1,e},{}),a={chart:{type:"bar",height:350,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4}},dataLabels:{enabled:!0},colors:t,title:{text:"Number of sample swiped on "+e+" by user"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:h()(s)},fill:{opacity:1}},i=[{name:"Number of swipes",data:D()(s)}];this.childChartOptions=a,this.childChartSeries=i},handleClick:function(e,t){this.showChild=e!==this.selectedCategory,this.showChild?this.selectedCategory=e:this.selectedCategory="",this.createChildChart(e,t)},initDates:function(){var e=new Date;e.setMonth(e.getMonth()-1),this.startDate=e<this.earliestDate?this.earliestDate:e;var t=new Date;this.endDate=t},makeDateRangeObject:function(){for(var e={},t=new Date(this.startDate);t<=this.endDate;){e[t.toLocaleDateString()]=[],t.setDate(t.getDate()+1)}return e}},computed:{propsToWatch:function(){return[this.dataset,this.startDate,this.endDate]},today:function(){return new Date},earliestDate:function(){var e=new Date(1657311267608);return e.setHours(0,0,0,0),e}},watch:{propsToWatch:{handler:function(){this.createParentChart(this.dataset)},deep:!0}},mounted:function(){this.initDates()}},Gt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("div",[e._v("\n    LOADING\n  ")]):s("div",{attrs:{id:"recentSwipes"}},[s("div",{attrs:{id:"datePicker"}},[s("b-form-datepicker",{attrs:{min:e.earliestDate,max:e.today,"value-as-date":!0},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),s("b-form-datepicker",{attrs:{min:e.earliestDate,max:e.today,"value-as-date":!0},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),s("div",{attrs:{id:"recentSwipesCharts"}},[s("div",{class:{split:e.showChild},attrs:{id:"parentChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.parentChartOptions,series:e.parentChartSeries}})],1),e._v(" "),s("div",{class:{childActive:e.showChild},attrs:{id:"childChart"}},[s("apexchart",{attrs:{type:"bar",height:"350",options:e.childChartOptions,series:e.childChartSeries}})],1)])])])},staticRenderFns:[]};var Jt=s("VU/8")(Qt,Gt,!1,function(e){s("vyfe")},null,null).exports;a.default.component("NumberOfSwipesByUser",rt),a.default.component("CatchTrialsByUser",mt),a.default.component("SurvivingSessions",bt),a.default.component("TotalTimeSwiping",_t),a.default.component("SessionsPassFail",kt),a.default.component("NeededUserSwipes",Mt),a.default.component("UserCorrectness",Ot),a.default.component("AvgTimePerVote",Rt),a.default.component("NumberOfVotes",Pt),a.default.component("ForecastUsers",Bt),a.default.component("RecentSwipes",Jt),a.default.component("DatasetSelect",X);var Vt={name:"visualization",data:function(){return{sortedUsersList:[],selectedUsers:[],excludedUsers:[],minSwipes:1,maxSwipes:5,selectedStudy:"",selectedDataset:"",showCharts:!1,userCorrectnessData:{},threshold:70,submitDisabled:!1,submittedMinSwipes:1,submittedStudy:"",submittedDataset:"",submittedThreshold:"",showControls:!1,globusAuthenticated:!1,globusAuthErrors:[],wantedSwipes:10,submittedWantedSwipes:10}},props:{db:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},config:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},userInfo:{type:Object,required:!0}},computed:{gradientArray:function(){var e=Ke.a.setGradient("#440155","#238a8d","#fde725").setMidpoint(20).getArray();return e},availableDatasets:function(){var e=this,t=[];return h()(this.datasetPrivileges).filter(function(t){return e.datasetPrivileges[t]}).forEach(function(s){console.log(s),e.config.studies[s].datasets&&(t=t.concat(e.config.studies[s].datasets))}),console.log(t),t}},methods:{updateCharts:function(){this.submitDisabled=!0,this.submittedMinSwipes=this.minSwipes,this.submittedDataset=this.selectedDataset,this.submittedStudy=this.selectedStudy,this.submittedThreshold=this.threshold/100,this.excludedUsers=v.a.difference(this.sortedUsersList,this.selectedUsers),this.showCharts=!0,this.submitDisabled=!1,this.submittedWantedSwipes=parseInt(this.wantedSwipes,10)},selectAll:function(){this.selectedUsers=this.selectedUsers.length===this.sortedUsersList.length?[]:v.a.clone(this.sortedUsersList)},activateStudy:function(e){this.selectedStudy=e,this.showCharts=!1,this.showControls=!1},activateDataset:function(e,t){this.selectedDataset=t,this.updateCharts(),this.showControls=!0},sortUsersList:function(){var e=this;return l()(u.a.mark(function t(){var s,a,i,r,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=!1,Object.hasOwn(e.config.studies,e.selectedStudy)&&(s=!e.config.studies[e.selectedStudy].available),a=[],!s){t.next=9;break}return t.next=6,e.getStudyUsers();case 6:a=t.sent,t.next=15;break;case 9:return i=e.db.ref("datasets/"+e.selectedDataset+"/userSeenSamples"),t.next=12,i.once("value");case 12:r=t.sent,n=r.val(),a=h()(n);case 15:e.selectedUsers=a,e.sortedUsersList=a.sort();case 17:case"end":return t.stop()}},t,e)}))()},globusLogin:function(e){this.$emit("globusLogin",e)},requestAllUserRoles:function(){return new me.a(function(e,t){var s=new XMLHttpRequest;s.open("POST","/getAllUsers",!0),s.setRequestHeader("Content-Type","application/json"),s.onload=e,s.onerror=t,s.send(n()({currentUser:i.a.auth().currentUser.uid}))})},getStudyUsers:function(){var e=this;return l()(u.a.mark(function t(){var s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestAllUserRoles().then(function(e){return JSON.parse(e.currentTarget.responseText)});case 2:return s=t.sent,s=h()(v.a.pickBy(s,function(t){return t.datasets[e.submittedStudy]})),t.abrupt("return",s);case 5:case"end":return t.stop()}},t,e)}))()}},watch:{selectedDataset:{handler:function(){""!==this.selectedDataset&&this.sortUsersList()},immediate:!0,deep:!0}}},Yt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"visualization"}},[s("h1",[e._v(" Study Visualizations ")]),e._v(" "),s("b-container",[s("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!1,useGlobus:!0,userInfo:e.userInfo,redirectPath:"visualization",redirectComponent:"Visualization"},on:{activateDataset:e.activateDataset,activateStudy:e.activateStudy,globusLogin:e.globusLogin}}),e._v(" "),e.showControls?s("div",{staticClass:"center-flex"},[s("div",{staticClass:"control-wrapper"},[s("div",{staticClass:"control-group"},[s("b-dropdown",{ref:"usersDropdown",staticClass:"usersDropdown",attrs:{variant:"warning",text:"Users to Include"}},[s("b-dropdown-form",[s("b-button",{on:{click:e.selectAll}},[e._v(e._s(e.selectedUsers.length===e.sortedUsersList.length?"Unselect All":"Select All"))]),e._v(" "),s("b-dropdown-divider"),e._v(" "),s("b-form-checkbox-group",{attrs:{id:"checkbox-group-users",options:e.sortedUsersList,name:"exclude-users",stacked:""},model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}})],1)],1),e._v(" "),s("p",{staticClass:"control-note"},[e._v("Include/exclude votes by specific users in 'Evaluate Scans' and 'See Results'")])],1),e._v(" "),s("div",{staticClass:"control-group"},[s("b-form-input",{attrs:{id:"range-minSwipes",type:"range",min:"1",max:e.maxSwipes,number:!0},model:{value:e.minSwipes,callback:function(t){e.minSwipes=t},expression:"minSwipes"}}),e._v(" "),s("div",{staticClass:"mt-2"},[e._v("Include samples with a minimum of "),s("span",{staticClass:"data-value"},[e._v(e._s(e.minSwipes))]),e._v(" swipes")]),e._v(" "),s("p",{staticClass:"control-note"},[e._v("Affects 'Evaluate Users', 'Evaluate Scans', 'See Results'")])],1),e._v(" "),s("div",{staticClass:"control-group"},[s("b-form-input",{attrs:{id:"range-threshold",type:"range",min:"0",max:"100",step:"5",number:!0},model:{value:e.threshold,callback:function(t){e.threshold=t},expression:"threshold"}}),e._v(" "),s("div",{staticClass:"mt-2"},[s("span",{staticClass:"data-value"},[e._v("Slices")]),e._v(" with a minimum pass percentage of "),s("span",{staticClass:"data-value"},[e._v(e._s(e.threshold)+"%")]),e._v(" will be considered a pass")]),e._v(" "),s("p",{staticClass:"control-note"},[e._v("Use 'Evaluate Scans' to help choose this. Affects 'Evaluate Users', 'See Results'")])],1),e._v(" "),s("div",{staticClass:"control-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.wantedSwipes,expression:"wantedSwipes"}],attrs:{type:"number",min:"1",step:"1",id:"wantedSwipes"},domProps:{value:e.wantedSwipes},on:{input:function(t){t.target.composing||(e.wantedSwipes=t.target.value)}}}),e._v(" "),s("div",{staticClass:"my-2"},[e._v("Goal number of swipes per image")]),e._v(" "),s("p",{staticClass:"control-note"},[e._v("Affects 'Number of Swipes Needed by User'")])]),e._v(" "),s("div",{staticClass:"submit-div"},[s("b-button",{attrs:{variant:"danger",disabled:e.submitDisabled},on:{click:e.updateCharts}},[e._v("Submit")])],1),e._v(" "),s("hr",{staticClass:"seperator"})])]):e._e(),e._v(" "),e.showCharts?s("div",{attrs:{id:"charts"}},[s("h2",[e._v(" "+e._s(this.config.datasets[e.selectedDataset].name)+" ")]),e._v(" "),s("b-card",{attrs:{"no-body":"",fill:""}},[s("b-tabs",{attrs:{card:"",lazy:""}},[s("b-tab",{attrs:{title:"Track Progress",active:""}},[s("NumberOfVotes",{attrs:{dataset:e.submittedDataset,db:e.db}}),e._v(" "),s("hr"),e._v(" "),s("h3",[e._v("Recent Swipes")]),e._v(" "),s("br"),e._v(" "),s("b-tabs",{attrs:{card:"",lazy:""}},[s("b-tab",{attrs:{title:"Number of Swipes",active:""}},[s("RecentSwipes",{attrs:{dataset:e.submittedDataset,db:e.db}})],1),e._v(" "),s("b-tab",{attrs:{title:"Time Spent Swiping"}},[s("TotalTimeSwiping",{attrs:{dataset:e.submittedDataset,db:e.db}})],1)],1),e._v(" "),s("ForecastUsers",{attrs:{dataset:e.submittedDataset,db:e.db,wantedSwipes:e.submittedWantedSwipes}}),e._v(" "),s("NeededUserSwipes",{attrs:{dataset:e.submittedDataset,db:e.db,config:e.config,study:e.submittedStudy,wantedSwipes:e.submittedWantedSwipes,excludedUsers:e.excludedUsers}})],1),e._v(" "),s("b-tab",{attrs:{title:"Evaluate Users"}},[s("UserCorrectness",{attrs:{dataset:e.submittedDataset,threshold:e.submittedThreshold,minVotes:e.submittedMinSwipes,db:e.db,gradientArray:e.gradientArray}}),e._v(" "),s("CatchTrialsByUser",{attrs:{dataset:e.submittedDataset,threshold:e.submittedThreshold,minVotes:e.submittedMinSwipes,db:e.db,gradientArray:e.gradientArray}}),e._v(" "),s("NumberOfSwipesByUser",{attrs:{dataset:e.submittedDataset,db:e.db}}),e._v(" "),s("AvgTimePerVote",{attrs:{dataset:e.selectedDataset,db:e.db}})],1),e._v(" "),s("b-tab",{attrs:{title:"Evaluate Scans"}},[s("SurvivingSessions",{attrs:{dataset:e.submittedDataset,minSwipes:e.submittedMinSwipes,excludedUsers:e.excludedUsers,sliceThreshold:e.submittedThreshold,db:e.db}})],1),e._v(" "),s("b-tab",{attrs:{title:"See Results"}},[s("SessionsPassFail",{attrs:{dataset:e.submittedDataset,sliceThreshold:e.submittedThreshold,minSwipes:e.submittedMinSwipes,excludedUsers:e.excludedUsers,db:e.db}})],1)],1)],1)],1):e._e()],1)],1)},staticRenderFns:[]};var Ht=s("VU/8")(Vt,Yt,!1,function(e){s("rlCp")},"data-v-15acdffb",null).exports,Wt={name:"restricted",data:function(){return{authenticated:!1,errors:[],showErrors:!1,showAuthError:!1}},props:{globusToken:{type:String,required:!0},userInfo:{type:Object,required:!0},config:{type:Object,required:!0}},methods:{loginWithGlobus:function(){var e={state:sessionStorage.getItem("pkce_state")},t=G.authorizeUrl(e);window.location.replace(t)},checkForGlobusAuthCode:function(){var e=this;if(new URLSearchParams(window.location.search).get("code")){var t=window.location.href;G.exchangeForAccessToken(t).then(function(t){var s=t.access_token;e.$emit("globusLogin",s),sessionStorage.removeItem("pkce_code_verifier"),sessionStorage.removeItem("pkce_state"),e.$router.push({name:"Home"})}).catch(function(t){console.log(t),e.showAuthError=!0})}},logoutOfGlobus:function(){this.$emit("globusLogin",""),this.$router.push({name:"Home"})},allowAccess:function(){this.globusToken&&(this.authenticated=!0)},parseErrors:function(){var e=this.$route.query.errors;e&&(this.showErrors=!0,this.errors=e)},setRedirect:function(){var e="https://brainswipes.us/restricted";G.config.redirect_uri=e},setPkceState:function(){null===sessionStorage.getItem("pkce_state")&&(sessionStorage.setItem("pkce_state",B.a.random(64)),sessionStorage.setItem("pkce_code_verifier",B.a.random(64))),G.state=sessionStorage.getItem("pkce_state"),G.codeVerifier=sessionStorage.getItem("pkce_code_verifier")}},created:function(){this.setRedirect(),this.setPkceState(),this.checkForGlobusAuthCode(),this.allowAccess(),this.parseErrors()}},Xt={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"restricted"}},[e._l(e.errors,function(t){return s("b-alert",{key:t,attrs:{show:e.showErrors,variant:"danger"}},[e._v(e._s(e.config.errorCodes[t]))])}),e._v(" "),s("b-alert",{attrs:{show:e.showAuthError,variant:"danger"}},[e._v("Please attempt to login again. If this error persists contact an administrator.")]),e._v(" "),e.authenticated?s("div",[s("b-button",{staticClass:"btn-swipes",on:{click:e.logoutOfGlobus}},[e._v("Logout of Globus")])],1):s("div",[s("b-button",{staticClass:"btn-swipes",on:{click:e.loginWithGlobus}},[e._v("Login with Globus")])],1),e._v(" "),e._m(0)],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("br"),this._v(" "),t("p",[this._v("Globus unifies logins across institutions by using each organization's authentication system.")]),this._v(" "),t("p",[this._v("Read the "),t("a",{attrs:{href:"https://docs.globus.org/how-to/get-started/",target:"_blank"}},[this._v("globus documentation")]),this._v(" to learn more.")])])}]};var Zt=s("VU/8")(Wt,Xt,!1,function(e){s("+JLG")},null,null).exports,Kt={name:"Results",data:function(){return{working:!1,json:{},dataset:"",globusAuthenticated:!1,globusAuthErrors:[]}},props:{config:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},userInfo:{type:Object,required:!0}},methods:{jsonToCsv:function(e,t,s){return e+(s+","+t.aveVote+","+t.count+"\n")},downloadCSV:function(){var e=this;this.working=!0,this.db.ref("/datasets/"+this.dataset+"/sampleSummary").once("value").then(function(t){var s=t.val(),a=v.a.reduce(s,e.jsonToCsv,"sample,aveVote,count\n"),i=new Blob([a],{type:"text/plain;charset=utf-8"});Object(Ct.saveAs)(i,"BrainSwipes-"+e.config.datasets[e.dataset].name+"-results.csv"),e.working=!1})},activateDataset:function(e,t){this.dataset=t},globusLogin:function(e){this.$emit("globusLogin",e)}},components:{Flask:Ge.a,DatasetSelect:X}},$t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"results"}},[a("h1",[e._v("Choose a study to download up to date QC data.")]),e._v(" "),a("p",[e._v("Data is in csv format with columns for sample name, average vote and number of swipes.")]),e._v(" "),a("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!1,useGlobus:!0,userInfo:e.userInfo,redirectPath:"results",redirectComponent:"Results"},on:{globusLogin:e.globusLogin,activateDataset:e.activateDataset}}),e._v(" "),e.dataset?a("div",[a("h1",[e._v("Click below to download a CSV file of data from "+e._s(e.config.datasets[e.dataset].name))]),e._v(" "),e.working?a("Flask"):a("b-button",{on:{click:function(t){return e.downloadCSV()}}},[a("img",{attrs:{id:"csv",src:s("be0Y")}})])],1):e._e()],1)},staticRenderFns:[]};var es=s("VU/8")(Kt,$t,!1,function(e){s("7eEC")},"data-v-5d007b54",null).exports,ts={name:"practice",components:{ImageSwipe:Te.a,Checklist:Ie.a},data:function(){return{progress:0,swiped:!1,userResponse:0,buttonDelay:0,defaultButtonDelay:2}},props:{config:{type:Object,required:!0},module:{type:String,required:!0}},computed:{steps:function(){return this.config.learn.tutorials[this.module].steps},tutorialDataset:function(){return this.config.learn.tutorial.dataset}},methods:{tutorialComplete:function(){this.$emit("takenTutorial",this.module,"complete")},simulateSwipe:function(e){var t=this,s=e[0];this.userResponse=s;var a=s?"swipe-right":"swipe-left",i=document.getElementById("practice-sample").getElementsByClassName("user-card")[0];i.classList.add(a),setTimeout(function(){t.removeClass(i,a)},600)},removeClass:function(e,t){e.classList.remove(t),this.swiped=!this.swiped,this.buttonDelay=this.defaultButtonDelay},nextSample:function(){this.progress+=1,this.swiped=this.progress>=h()(this.steps).length-1?this.swiped:!this.swiped},previousSample:function(){this.swiped=!this.swiped},getImageType:function(e){var t="other";return[t=Object.hasOwn(this.config.learn.tutorials[this.module],"imageType")?this.config.learn.tutorials[this.module].imageType:e.match(/atlas/i)?"atlas":e.match(/task/i)?"func":"anat",this.config.imageTypes[t]]}},watch:{buttonDelay:{handler:function(e){var t=this;e>0&&setTimeout(function(){t.buttonDelay-=1},1e3)},immediate:!0}}},ss={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"practice"}},[s("div",[s("h1",[e._v(e._s(e.config.learn.tutorials[e.module].name))]),e._v(" "),s("p",{staticClass:"lead"},[e._v("Test your knowledge on these practice images!")]),e._v(" "),s("hr")]),e._v(" "),s("div",{staticClass:"pbar pt-3 pb-3"},[s("b-progress",{staticClass:"ml-3 mr-3",attrs:{value:e.progress,max:Object.keys(e.steps).length-1,"show-progress":""}})],1),e._v(" "),e.swiped?e._e():s("div",{class:"fade-in",attrs:{id:"practice-sample"}},[s("ImageSwipe",{ref:"widget",attrs:{widgetPointer:e.steps[e.progress].pointer,playMode:"tutorial",identifier:"practice"+e.progress,tutorialStep:null,dataset:e.steps[e.progress].dataset,config:e.config},on:{widgetRating:e.simulateSwipe}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.swiped,expression:"swiped"}],class:"fade-in",attrs:{id:"practice-feedback"}},[s("div",{staticClass:"feedback-body"},[e.steps[e.progress].finished?e._e():s("div",[s("h2",[e._v(" You responded "+e._s(e.userResponse?"Pass":"Fail")+" ")]),e._v(" "),s("h2",[e._v(" This image should be "+e._s(e.steps[e.progress].answer?"Passed":"Failed")+" ")]),e._v(" "),s("hr"),e._v(" "),s("h3",[e._v(e._s(e.getImageType(e.steps[e.progress].pointer)[1]))]),e._v(" "),e.steps[e.progress].checks?s("Checklist",{attrs:{config:e.config,imageClass:e.getImageType(e.steps[e.progress].pointer)[0],checks:e.steps[e.progress].checks}}):e._e()],1),e._v(" "),s("br"),e._v(" "),s("p",{domProps:{innerHTML:e._s(e.steps[e.progress].text)}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.buttonDelay<=0,expression:"buttonDelay <= 0"}],staticClass:"fade-in"},[e.progress<Object.keys(e.steps).length-1?s("div",[s("b-button",{on:{click:e.previousSample}},[e._v("Revisit This Image")]),e._v(" "),s("b-button",{attrs:{disabled:e.userResponse!==e.steps[e.progress].answer},on:{click:e.nextSample}},[e._v("Next Sample")])],1):s("div",[s("b-button",{on:{click:e.tutorialComplete}},[e._v("Start Swiping!")])],1)])])])},staticRenderFns:[]};var as=s("VU/8")(ts,ss,!1,function(e){s("D5Qn")},null,null).exports,is={name:"gallery",components:{ImageSwipe:Te.a,Checklist:Ie.a},data:function(){return{form:{},adminRoles:{},loading:!0,submitErrors:{},errorToName:{label:"Issue Label",answer:"Pass or Fail",checks:"Checklist",text:"Issue Description"},globusAuthenticated:!1,globusAuthErrors:[]}},props:{config:{type:Object,required:!0},db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},datasetPrivileges:{type:Object,required:!0}},computed:{gallery:function(){return this.config.learn.gallery}},methods:{getImageType:function(e,t){var s="other";return[s=Object.hasOwn(this.config.datasets[t],"imageType")?this.config.datasets[t].imageType:e.match(/atlas/i)?"atlas":e.match(/task/i)?"func":"anat",this.config.imageTypes[s]]},onSubmit:function(e){var t=this.validateSubmit(e);t.length?(console.log(t),a.default.set(this.submitErrors,e,t)):(this.form[e].hidden=!1,this.db.ref("config/learn/gallery/"+e).set(this.form[e]))},validateSubmit:function(e){var t=[];return Object.prototype.hasOwnProperty.call(this.form[e],"label")||t.push("label"),Object.prototype.hasOwnProperty.call(this.form[e],"answer")||t.push("answer"),Object.prototype.hasOwnProperty.call(this.form[e],"checks")?this.form[e].checks.includes("")&&t.push("checks"):t.push("checks"),Object.prototype.hasOwnProperty.call(this.form[e],"text")||t.push("text"),t},onReset:function(e){this.form[e]=this.config.learn.gallery[e]},copyGalleryConfig:function(){var e=JSON.parse(n()(this.config.learn.gallery));this.form=e},getAdminRoles:function(){var e=this;i.a.auth().currentUser.getIdTokenResult(!0).then(function(t){var s={};s.studyAdmin=t.claims.studyAdmin,s.admin=t.claims.admin,e.adminRoles=s,e.loading=!1})},updateCheckBox:function(e,t){var s=[];D()(t).forEach(function(e){switch(e){case"checked":s.push(!0);break;case"unchecked":s.push(!1);break;default:s.push("")}}),a.default.set(this.form[e],"checks",s)},allowRestrictedSamples:function(){var e=this;return l()(u.a.mark(function t(){var s,a,r,n,o,c,l,d,h,m,p;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.globusToken.length){t.next=20;break}return s=i.a.auth().currentUser,a=s.email,t.next=5,e.getGlobusIdentities(e.globusToken);case 5:return r=t.sent,n=r.identities,o=r.included.identity_providers,c=[],t.next=11,i.a.auth().currentUser.getIdTokenResult(!0);case 11:l=t.sent,d=l.claims.org,h=!1,n.forEach(function(e){var t="";Object.hasOwn(e,"email")&&null!=e.email&&(t=e.email.toString()),t.toLowerCase()===a.toLowerCase()&&(h=!0)}),m=!1,p=!1,o.forEach(function(e){if(e.name===d){m=!0;var t=e.domains;n.forEach(function(e){var s="";Object.hasOwn(e,"email")&&null!=e.email&&(s=e.email),t.forEach(function(t){s.includes(t)&&"used"===e.status&&(p=!0)})})}}),0===n.length?c.push("noIdentities"):h?m?p||c.push("orgNotUsed"):c.push("noSwipesOrg"):c.push("noSwipesEmail"),c.length?(e.globusAuthErrors=c,e.globusAuthenticated=!1):e.globusAuthenticated=!0;case 20:case"end":return t.stop()}},t,e)}))()},routeToRestricted:function(){this.$router.push({name:"Restricted",query:{errors:this.globusAuthErrors}})}},mounted:function(){this.copyGalleryConfig(),this.getAdminRoles(),this.allowRestrictedSamples()}},rs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"gallery"}},[e._m(0),e._v(" "),e.loading?e._e():s("div",e._l(Object.keys(e.gallery),function(t){return s("div",{key:t},[!e.gallery[t].hidden||e.adminRoles.studyAdmin[e.gallery[t].dataset]||e.adminRoles.admin?s("div",{staticClass:"gallery-item",class:e.gallery[t].hidden?"hidden-item":""},[e.config.studies[e.gallery[t].study].available||e.globusAuthenticated&&e.datasetPrivileges[e.gallery[t].study]?s("div",[e.gallery[t].hidden?s("div",{staticClass:"gallery-form-wrapper"},[s("div",{staticClass:"gallery-form"},[s("b-form",[s("b-form-group",{attrs:{id:"issue-label-group-"+t,label:"Issue Label:","label-for":"issue-label-"+t,description:"A breif description of the issue, the title of the gallery entry."}},[s("b-form-input",{attrs:{id:"issue-label-"+t,placeholder:"Enter issue label",required:""},model:{value:e.form[t].label,callback:function(s){e.$set(e.form[t],"label",s)},expression:"form[sample].label"}})],1),e._v(" "),s("b-form-group",{attrs:{id:"issue-description-group-"+t,label:"Issue Description:","label-for":"issue-description-"+t,description:"A full description of the issue including rational for why this image passes or fails."}},[s("b-form-input",{attrs:{id:"issue-description-"+t,placeholder:"Enter full issue description",required:""},model:{value:e.form[t].text,callback:function(s){e.$set(e.form[t],"text",s)},expression:"form[sample].text"}})],1),e._v(" "),s("b-form-group",{attrs:{label:"Does the sample Pass or Fail?"}},[s("b-form-radio-group",{attrs:{id:"radio-group-"+t,options:[{text:"Pass",value:1},{text:"Fail",value:0},{text:"Flag for Removal",value:2}],name:"radio-options"},model:{value:e.form[t].answer,callback:function(s){e.$set(e.form[t],"answer",s)},expression:"form[sample].answer"}})],1),e._v(" "),s("p",[e._v("Choose which checklist items should be checked.")]),e._v(" "),s("div",{staticClass:"checklist-background"},[s("Checklist",{attrs:{config:e.config,imageClass:e.getImageType(t)[0],checks:e.gallery[t].checks,sample:t},on:{checkBoxClick:e.updateCheckBox}})],1),e._v(" "),s("br"),e._v(" "),e._l(e.submitErrors[t],function(t){return s("p",{key:t,staticClass:"submit-errors"},[e._v("Please fill out the "+e._s(e.errorToName[t]))])}),e._v(" "),s("b-button",{attrs:{variant:"primary"},on:{click:function(s){return e.onSubmit(t)}}},[e._v("Submit")]),e._v(" "),s("b-button",{attrs:{variant:"danger"},on:{click:function(s){return e.onReset(t)}}},[e._v("Reset")])],2),e._v(" "),s("br")],1)]):s("div",{staticClass:"gallery-info"},[s("h2",[e._v(e._s(e.gallery[t].label))]),e._v(" "),s("p",[e._v(e._s(e.gallery[t].text))]),e._v(" "),s("Checklist",{attrs:{config:e.config,imageClass:e.getImageType(t,e.gallery[t].dataset)[0],checks:e.gallery[t].checks}})],1),e._v(" "),s("ImageSwipe",{ref:"widget",refInFor:!0,attrs:{widgetPointer:t,playMode:"tutorial",identifier:t,tutorialStep:e.gallery[t].answer,dataset:e.gallery[t].dataset,config:e.config}})],1):e.datasetPrivileges[e.gallery[t].dataset]?s("div",[e._l(e.globusAuthErrors,function(t){return s("p",{key:t,staticClass:"globus-auth-error"},[e._v(e._s(e.config.errorCodes[t]))])}),e._v(" "),s("b-button",{on:{click:e.routeToRestricted}},[e._v("Login with Globus")])],2):e._e()]):e._e()])}),0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Gallery of Advanced Cases")]),this._v(" "),t("p",{staticClass:"lead"},[this._v("Get expert advice on difficult samples.")]),this._v(" "),t("p",[this._v("Have something you want added? Flag it by clicking the Help button.")]),this._v(" "),t("hr")])}]};var ns=s("VU/8")(is,rs,!1,function(e){s("+vOy")},null,null).exports,os={name:"promo",data:function(){return{}},props:{config:{type:Object,required:!0},study:{type:String,required:!0}},methods:{backgroundStyles:function(){return{"background-image":"url(/static/study_logos/"+this.config.studies[this.study].about.logo+")","background-position":"center","background-repeat":"no-repeat","background-attachment":"fixed","background-size":"50%"}},routeToRequest:function(){this.$router.push({name:"AccessRequest"})}},beforeRouteEnter:function(e,t,s){var a=this;s(function(){var t=l()(u.a.mark(function t(s){var i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._props.config.studies;case 2:i=t.sent,h()(i).includes(e.params.study)||s.$router.push({name:"Home"});case 5:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}())}},us={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"promo"}},[s("div",{style:e.backgroundStyles(),attrs:{id:"promo-background"}}),e._v(" "),s("div",{attrs:{id:"promo-content"}},[s("h1",[e._v(e._s(e.config.studies[e.study].about.title))]),e._v(" "),s("div",{staticClass:"text-wrapper"},e._l(e.config.studies[e.study].about.text,function(t){return s("p",{key:t,staticClass:"text",domProps:{innerHTML:e._s(t)}})}),0),e._v(" "),s("hr",{staticStyle:{width:"80vw"}}),e._v(" "),s("h1",[e._v("Available Datasets for "+e._s(e.study))]),e._v(" "),e._l(e.config.studies[e.study].datasets,function(t){return s("div",{key:t},[s("h2",[e._v(e._s(e.config.datasets[t].name))]),e._v(" "),s("div",{staticClass:"text-wrapper"},e._l(e.config.datasets[t].about.text,function(t){return s("li",{key:t,staticClass:"text",domProps:{innerHTML:e._s(t)}})}),0),e._v(" "),e.config.datasets[t].archived?s("div",{staticClass:"archived"},[s("p",[e._v("This dataset is archived and can no longer be swiped on.")]),e._v(" "),s("p",[e._v("You can still view chats and results.")])]):e._e()])}),e._v(" "),e.config.studies[e.study].available?e._e():s("div",[s("hr"),e._v(" "),s("b-button",{attrs:{size:"lg",variant:"warning"},on:{click:e.routeToRequest}},[e._v("Request Access to "+e._s(e.study))])],1)],2)])},staticRenderFns:[]};var cs=s("VU/8")(os,us,!1,function(e){s("O1b6")},"data-v-7eb7c744",null).exports,ls={name:"access-request",components:{GlobusAuth:Y},data:function(){return{globusOrg:"",selectedStudy:"",submittedName:"",globusOrgs:[],restrictedStudies:[],submitted:!1,identities:""}},props:{userInfo:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0}},methods:{onSubmit:function(){var e={study:this.selectedStudy,org:this.globusOrg,username:this.userInfo.displayName,email:this.userInfo.email,name:this.submittedName,timestamp:Date.now(),organizations:this.globusOrgs,status:"awaiting",identities:this.identities};this.db.ref("requests/"+this.selectedStudy+"/"+this.userInfo.displayName).set(e),this.submitted=!0},formReset:function(){this.globusOrg="",this.submittedName="",this.selectedStudy="",this.submitted=!1},getIdentites:function(){var e=this;return l()(u.a.mark(function t(){var s,a,i,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.globusToken){t.next=10;break}return t.next=3,e.getGlobusIdentities(e.globusToken);case 3:s=t.sent,a=s.identities,i=s.included.identity_providers,e.identities=n()(a),r=[],h()(i).forEach(function(e){Object.hasOwn(i[e],"name")&&r.push(i[e].name)}),e.globusOrgs=r;case 10:case"end":return t.stop()}},t,e)}))()},getRestrictedStudies:function(){var e=this;return l()(u.a.mark(function t(){var s,a,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.auth().currentUser.getIdTokenResult(!0);case 2:s=t.sent,delete(a=s.claims.datasets).TEST,r=h()(v.a.pickBy(a,function(e,t){return!e&&"TEST"!==t})),e.restrictedStudies=r;case 7:case"end":return t.stop()}},t,e)}))()},globusLogin:function(e){this.$emit("globusLogin",e)}},mounted:function(){this.getIdentites(),this.getRestrictedStudies()}},ds={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"access-request"}},[s("h1",[e._v(" Request Study Access ")]),e._v(" "),s("br"),e._v(" "),e.globusToken?s("div",{attrs:{id:"access-request-form"}},[e.submitted?s("div",[s("p",[e._v("You have successfully submitted a request to access "+e._s(e.selectedStudy)+".")]),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:e.formReset}},[e._v("Submit another request")])],1):s("b-card",{attrs:{title:"Study Access Request Form","sub-title":"Fill out this form to gain access to a restricted study"}},[s("b-form-group",{attrs:{label:"Study","label-for":"selectStudy","label-cols":"4"}},[s("b-form-select",{attrs:{id:"selectStudy",options:e.restrictedStudies},model:{value:e.selectedStudy,callback:function(t){e.selectedStudy=t},expression:"selectedStudy"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Full Name","label-for":"name"}},[s("b-form-input",{attrs:{id:"name"},model:{value:e.submittedName,callback:function(t){e.submittedName=t},expression:"submittedName"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Username","label-for":"username"}},[s("b-form-input",{attrs:{id:"username",readonly:""},model:{value:e.userInfo.displayName,callback:function(t){e.$set(e.userInfo,"displayName",t)},expression:"userInfo.displayName"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Email","label-for":"email"}},[s("b-form-input",{attrs:{id:"email",readonly:""},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),e._v(" "),s("b-form-group",{attrs:{label:"Organization","label-for":"selectGlobusOrg","label-cols":"4",description:"This should be the organization you are a member of for purposes of this study's data use agreement."}},[s("b-form-select",{attrs:{id:"selectGlobusOrg",options:e.globusOrgs},model:{value:e.globusOrg,callback:function(t){e.globusOrg=t},expression:"globusOrg"}})],1),e._v(" "),s("b-button",{attrs:{disabled:!(e.selectedStudy&&e.submittedName&&e.globusOrg)},on:{click:e.onSubmit}},[e._v("Submit")])],1)],1):s("div",[s("p",[e._v("You must log in with Globus to submit a request")]),e._v(" "),s("br"),e._v(" "),s("GlobusAuth",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,userInfo:e.userInfo,config:e.config,redirectPath:"access-request",redirectComponent:"AccessRequest",showGlobusLogin:!0},on:{globusLogin:e.globusLogin}})],1)])},staticRenderFns:[]};var hs=s("VU/8")(ls,ds,!1,function(e){s("m2t0")},"data-v-0bca0f04",null).exports,ms={name:"access-review",data:function(){return{requests:{},loading:!0,userEmail:"",requestedStudy:"",requestAccepted:!1}},props:{userInfo:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0}},computed:{mailto:function(){var e="";return e=!0===this.requestAccepted?"mailto:"+this.userEmail+"?subject=BrainSwipes access request approved&body=Your request to access "+this.requestedStudy+" has been approved. Please visit https://brainswipes.us to begin swiping!":"mailto:"+this.userEmail+"?subject=BrainSwipes access request denied&body=Your request to access "+this.requestedStudy+" has been denied. Please contact the study's administrator to be added to any required data contracts.",e}},methods:{getRequests:function(){var e=this;return l()(u.a.mark(function t(){var s,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.auth().currentUser.getIdTokenResult(!0);case 2:s=t.sent,a=s.claims,e.db.ref("requests").once("value",function(t){var s=t.val();h()(s).forEach(function(e){h()(s[e]).forEach(function(t){if("accepted"===s[e][t].status||"denied"===s[e][t].status)delete s[e][t];else{var a=new Date(s[e][t].timestamp).toLocaleDateString();s[e][t].time=a}})}),a.admin?e.requests=s:e.requests=v.a.pickBy(s,function(e,t){return a.studyAdmin[t]}),e.loading=!1});case 5:case"end":return t.stop()}},t,e)}))()},acceptRequest:function(e,t){this.userEmail=this.requests[e][t].email,this.requestedStudy=e,this.requestAccepted=!0,this.requests[e][t].status="pending-acceptance"},confirmAccept:function(e,t,s){var a=this;return l()(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:a.requests[e][t].status="accepted",a.db.ref("requests/"+e+"/"+t).update({status:"accepted"}),a.requestUserPermissionUpdate(e,t,s);case 3:case"end":return i.stop()}},i,a)}))()},requestUserPermissionUpdate:function(e,t,s){var a={name:t,datasets:et()({},e,!0),org:s};return new me.a(function(e,t){var s=new XMLHttpRequest;s.open("POST","/setRoles",!0),s.setRequestHeader("Content-Type","application/json"),s.onload=e,s.onerror=t,s.send(n()({obj:a,currentUser:i.a.auth().currentUser.uid}))})},denyRequest:function(e,t){this.userEmail=this.requests[e][t].email,this.requestedStudy=e,this.requestAccepted=!1,this.requests[e][t].status="pending-denial"},confirmDeny:function(e,t){this.requests[e][t].status="denied",this.db.ref("requests/"+e+"/"+t).update({status:"denied"})}},mounted:function(){this.getRequests()}},ps={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"access-review"}},[s("h1",[e._v("Review Study Access Requests")]),e._v(" "),e.loading?s("div"):s("div",{staticClass:"requests-list"},[Object.keys(e.requests).length?s("div",e._l(Object.keys(e.requests),function(t){return s("div",{key:t},[s("h2",[e._v(e._s(t))]),e._v(" "),Object.keys(e.requests[t]).length?s("div",e._l(Object.keys(e.requests[t]),function(a){return s("div",{key:a,staticClass:"study-card-wrapper"},["awaiting"===e.requests[t][a].status||"pending-denial"===e.requests[t][a].status||"pending-acceptance"===e.requests[t][a].status?s("b-card",[s("b-form-group",{attrs:{label:"Study","label-for":"selectStudy","label-cols":"4"}},[s("b-form-input",{attrs:{id:"selectStudy",readonly:""},model:{value:e.requests[t][a].study,callback:function(s){e.$set(e.requests[t][a],"study",s)},expression:"requests[study][request].study"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Full Name","label-for":"name"}},[s("b-form-input",{attrs:{readonly:"",id:"name"},model:{value:e.requests[t][a].name,callback:function(s){e.$set(e.requests[t][a],"name",s)},expression:"requests[study][request].name"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Username","label-for":"username"}},[s("b-form-input",{attrs:{id:"username",readonly:""},model:{value:e.requests[t][a].username,callback:function(s){e.$set(e.requests[t][a],"username",s)},expression:"requests[study][request].username"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Email","label-for":"email"}},[s("b-form-input",{attrs:{id:"email",readonly:""},model:{value:e.requests[t][a].email,callback:function(s){e.$set(e.requests[t][a],"email",s)},expression:"requests[study][request].email"}})],1),e._v(" "),s("b-form-group",{attrs:{"label-cols":"4",label:"Date Submitted","label-for":"time"}},[s("b-form-input",{attrs:{id:"time",readonly:""},model:{value:e.requests[t][a].time,callback:function(s){e.$set(e.requests[t][a],"time",s)},expression:"requests[study][request].time"}})],1),e._v(" "),s("b-form-group",{attrs:{label:"Organization","label-for":"selectGlobusOrg","label-cols":"4",description:"This should be the organization this user is a member of for purposes of this study's data use agreement. If it is not, deny the request."}},[s("b-form-input",{attrs:{id:"selectGlobusOrg",readonly:""},model:{value:e.requests[t][a].org,callback:function(s){e.$set(e.requests[t][a],"org",s)},expression:"requests[study][request].org"}})],1),e._v(" "),s("hr"),e._v(" "),s("div",[s("b-button",{attrs:{variant:"success"},on:{click:function(s){return e.acceptRequest(t,a)}}},[e._v("Accept")]),e._v(" "),s("b-button",{attrs:{variant:"danger"},on:{click:function(s){return e.denyRequest(t,a)}}},[e._v("Deny")])],1),e._v(" "),"pending-denial"==e.requests[t][a].status?s("div",[s("br"),e._v(" "),s("b-button",{attrs:{variant:"danger"},on:{click:function(s){return e.confirmDeny(t,a)}}},[e._v("Confirm")])],1):e._e(),e._v(" "),"pending-acceptance"==e.requests[t][a].status?s("div",[s("br"),e._v(" "),s("b-button",{attrs:{variant:"success"},on:{click:function(s){return e.confirmAccept(t,a,e.requests[t][a].org)}}},[e._v("Confirm")])],1):e._e()],1):s("b-card",[s("b-form-group",{attrs:{"label-cols":"4",label:"Full Name","label-for":"name"}},[s("b-form-input",{attrs:{readonly:"",id:"name"},model:{value:e.requests[t][a].name,callback:function(s){e.$set(e.requests[t][a],"name",s)},expression:"requests[study][request].name"}})],1),e._v(" "),s("b-alert",{attrs:{show:"",variant:"denied"===e.requests[t][a].status?"danger":"success"}},[e._v("\n                "+e._s(e.requests[t][a].status)+"\n              ")]),e._v(" "),s("a",{attrs:{target:"_blank",href:e.mailto}},[e._v("Send Email")])],1)],1)}),0):s("div",[s("h3",[e._v("No Requests to Review")])])])}),0):s("div",[s("h2",[e._v("No Requests to Review.")])])])])},staticRenderFns:[]};var fs=s("VU/8")(ms,ps,!1,function(e){s("6YK/")},"data-v-8dee3a44",null).exports,gs={name:"tutorial-select",props:{userInfo:{type:Object,required:!0},userData:{type:Object,required:!0},config:{type:Object,required:!0}},methods:{routeTo:function(e,t){this.$router.push({name:e,params:{module:t}})},neededPrerequisites:function(e){var t=this,s=[];return Object.hasOwn(this.config.learn.tutorials[e],"prereq")&&h()(this.config.learn.tutorials[e].prereq).forEach(function(e){"complete"!==t.userData.tutorials[e]&&s.push(e)}),s}},computed:{requiredFor:function(){var e=this,t={};return h()(this.config.datasets).forEach(function(s){s.includes("TEST")||Object.hasOwn(e.config.datasets[s],"archived")&&e.config.datasets[s].archived||Object.hasOwn(e.config.datasets[s],"tutorials")&&h()(e.config.datasets[s].tutorials).forEach(function(e){Object.hasOwn(t,e)?t[e].push(s):t[e]=[s]})}),t},orderedTutorials:function(){var e=this,t=[];h()(this.config.learn.tutorials).forEach(function(s){var a=!0;Object.hasOwn(e.config.learn.tutorials[s],"inactive")&&e.config.learn.tutorials[s].inactive&&(a=!1),Object.hasOwn(e.config.learn.tutorials[s],"practice")&&e.config.learn.tutorials[s].practice&&(a=!1),a&&t.push([s,e.config.learn.tutorials[s].order])}),t=t.sort(function(e,t){return e[1]-t[1]});var s=[];return t.forEach(function(e){s.push(e[0])}),s},practices:function(){var e=this,t=[];return h()(this.config.learn.tutorials).forEach(function(s){var a=!0;Object.hasOwn(e.config.learn.tutorials[s],"inactive")&&e.config.learn.tutorials[s].inactive&&(a=!1),Object.hasOwn(e.config.learn.tutorials[s],"practice")&&e.config.learn.tutorials[s].practice&&a&&t.push(s)}),t}}},vs={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"tutorial-select"}},[s("h1",[e._v("Complete more tutorials to access more datasets!")]),e._v(" "),s("h2",[e._v("Tutorials")]),e._v(" "),s("div",{staticClass:"center-flex"},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"accordion",attrs:{role:"tablist"}},e._l(e.orderedTutorials,function(t){return s("b-card",{key:t,attrs:{"no-body":""}},[s("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+t,expression:"`accordion-${tutorial}`"}],staticClass:"btn-swipes",attrs:{block:""}},[s("span",{staticClass:"center-flex vertical-align-center"},[s("p",{staticClass:"header-text"},[e._v(e._s(e.config.learn.tutorials[t].name)+" ")]),s("p"),"complete"===e.userData.tutorials[t]?s("div",{staticClass:"check-wrapper"},[s("div",{staticClass:"checked"})]):e._e()])])],1),e._v(" "),s("b-collapse",{attrs:{id:"accordion-"+t,accordion:"my-accordion",role:"tabpanel"}},[s("b-card-body",[s("b-card-text",[s("p",[e._v(e._s(e.config.learn.tutorials[t].about))]),e._v(" "),s("hr"),e._v(" "),s("h3",[e._v("Required for:")]),e._v(" "),e._l(e.requiredFor[t],function(t){return s("p",{key:t},[e._v(" "+e._s(e.config.datasets[t].name)+" ")])}),e._v(" "),s("hr"),e._v(" "),e.neededPrerequisites(t).length?s("div",[s("h3",[e._v("You must complete the prerequisites.")]),e._v(" "),e._l(e.neededPrerequisites(t),function(t){return s("p",{key:t},[e._v("\n                      "+e._s(e.config.learn.tutorials[t].name)+"\n                  ")])})],2):s("b-button",{staticClass:"btn-swipes",on:{click:function(s){return e.routeTo("Tutorial",t)}}},[e._v("View Tutorial")])],2)],1)],1)],1)}),1)])]),e._v(" "),s("br"),e._v(" "),s("h2",[e._v("Interactive Practice")]),e._v(" "),s("div",{staticClass:"center-flex"},[s("div",{staticClass:"card-wrapper"},[s("div",{staticClass:"accordion",attrs:{role:"tablist"}},e._l(e.practices,function(t){return s("b-card",{key:t,attrs:{"no-body":""}},[s("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+t,expression:"`accordion-${tutorial}`"}],staticClass:"btn-swipes",attrs:{block:""}},[s("span",{staticClass:"center-flex vertical-align-center"},[s("p",{staticClass:"header-text"},[e._v(e._s(e.config.learn.tutorials[t].name)+" ")]),s("p"),"complete"===e.userData.tutorials[t]?s("div",{staticClass:"check-wrapper"},[s("div",{staticClass:"checked"})]):e._e()])])],1),e._v(" "),s("b-collapse",{attrs:{id:"accordion-"+t,accordion:"my-accordion",role:"tabpanel"}},[s("b-card-body",[s("b-card-text",[s("p",[e._v(e._s(e.config.learn.tutorials[t].about))]),e._v(" "),s("hr"),e._v(" "),s("h3",[e._v("Required for:")]),e._v(" "),e._l(e.requiredFor[t],function(t){return s("p",{key:t},[e._v(" "+e._s(e.config.datasets[t].name)+" ")])}),e._v(" "),s("hr"),e._v(" "),e.neededPrerequisites(t).length?s("div",[s("h3",[e._v("You must complete the prerequisites.")]),e._v(" "),e._l(e.neededPrerequisites(t),function(t){return s("p",{key:t},[e._v("\n                      "+e._s(e.config.learn.tutorials[t].name)+"\n                  ")])})],2):s("b-button",{staticClass:"btn-swipes",on:{click:function(s){return e.routeTo("Practice",t)}}},[e._v("View Practice")])],2)],1)],1)],1)}),1)])])])},staticRenderFns:[]};var bs=s("VU/8")(gs,vs,!1,function(e){s("Xr1S")},"data-v-3b175278",null).exports,ys={name:"sample-view",data:function(){return{sample:"",selectedSample:"",dataset:"",study:""}},props:{datasetPrivileges:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0},userInfo:{type:Object,required:!0}},methods:{setDataset:function(e,t){var s=[];this.study=e,this.dataset=t,this.config.studies[e].available||this.globusToken||s.push("noIdentities"),s.length?this.$router.push({name:"Restricted",query:{errors:s}}):this.$emit("changeDataset",t,e)},handleQuery:function(){var e=this;return l()(u.a.mark(function t(){var s,a,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(s=e.$route.query).study&&s.dataset&&(a=s.study,i=s.dataset,e.setDataset(a,i),e.selectedSample=s.sample);case 2:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.handleQuery()},components:{DatasetSelect:X,ImageStatic:Le}},ws={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"sample-view"}},[s("h1",[e._v("View a Sample")]),e._v(" "),s("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!0,useGlobus:!1,userInfo:e.userInfo,redirectPath:"",redirectComponent:""},on:{activateDataset:e.setDataset,activateStudy:function(t){e.dataset=""}}}),e._v(" "),s("div",{staticClass:"selector-wrapper"},[e.dataset?s("div",{staticClass:"sample-selector"},[s("h2",[e._v(e._s(e.study))]),e._v(" "),s("h3",[e._v(e._s(e.dataset))]),e._v(" "),s("br"),e._v(" "),s("b-form-input",{attrs:{id:"sample-input",placeholder:"Enter sample name",required:""},model:{value:e.sample,callback:function(t){e.sample=t},expression:"sample"}}),e._v(" "),s("br"),e._v(" "),s("b-button",{attrs:{variant:"warning"},on:{click:function(t){e.selectedSample=e.sample}}},[e._v("\n        View Sample\n      ")])],1):e._e()]),e._v(" "),e.selectedSample?s("div",[s("hr"),e._v(" "),s("h2",[e._v(e._s(e.selectedSample))]),e._v(" "),s("ImageStatic",{attrs:{widgetPointer:e.selectedSample,dataset:e.dataset,config:e.config}}),e._v(" "),s("br"),e._v(" "),s("b-button",{attrs:{to:"/"+e.study+"/"+e.dataset+"/review/"+e.selectedSample+"?f=v"}},[e._v("\n      Review Sample Data\n    ")])],1):e._e()],1)},staticRenderFns:[]};var _s=s("VU/8")(ys,ws,!1,function(e){s("esI0")},"data-v-f7aeb52c",null).exports,Cs=s("d7EF"),Ss=s.n(Cs),Ts={name:"catch-trials",components:{ImageSwipe:Te.a,DatasetSelect:X},data:function(){return{dataset:"",study:"",catchTrials:{},catchSummary:{},selectedImageClass:"",selectedT1or2:"",catchTrialSummary:{},showOther:!1}},props:{userData:{type:Object,required:!0},db:{type:Object,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0},config:{type:Object,required:!0},datasetPrivileges:{type:Object,required:!0},userInfo:{type:Object,required:!0}},methods:{activateDataset:function(e,t){this.dataset=t,this.study=e,this.getCatchTrials(),this.getCatchSummary()},activateStudy:function(e){this.study=e,this.catchTrials={},this.catchSummary={},this.selectedImageClass="",this.selectedT1or2="",this.dataset="",this.catchTrialSummary={}},chooseImageClass:function(e){this.selectedImageClass=e,this.selectedT1or2=""},getCatchTrials:function(){var e=this;this.db.ref("datasets/"+this.dataset+"/catch/sampleCounts").on("value",function(t){var s=t.val(),a={};s&&(h()(s).forEach(function(t){var i=e.getImageType(t),r=Ss()(i,2),n=r[0],o=r[1];Object.hasOwn(a,n)?Object.hasOwn(a[n],o)?a[n][o][t]=s[t]:a[n][o]=et()({},t,s[t]):a[n]=et()({},o,et()({},t,s[t]))}),e.catchTrials=a,e.summarizeCatchTrials())})},getCatchSummary:function(){var e=this;this.db.ref("datasets/"+this.dataset+"/catch/sampleSummary").on("value",function(t){var s=t.val();s&&(e.catchSummary=s)})},getImageType:function(e){var t=[];return Object.hasOwn(this.config.datasets[this.dataset],"imageType")?t[0]=this.config.datasets[this.dataset].imageType:e.match(/atlas/i)?t[0]="Atlas":e.match(/task/i)?t[0]="fMRI":t[0]="Anat",e.match(/T1/i)?t[1]="T1":e.match(/T2/i)?t[1]="T2":t[1]="Other",t},summarizeCatchTrials:function(){var e=this,t=v.a.reduce(this.catchTrials,function(e,t,s){return e[s]=v.a.reduce(t,function(e,t,s){return e[s]=v.a.reduce(t,function(e,t){return e[t]+=1,e},{pass:0,fail:0}),e},{T1:{pass:0,fail:0},T2:{pass:0,fail:0},Other:{pass:0,fail:0}}),e},{});this.catchTrialSummary=t,this.showOther=!1,h()(t).forEach(function(s){(t[s].Other.pass||t[s].Other.fail)&&(e.showOther=!0)})}}},ks={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"catch-trials"}},[s("DatasetSelect",{attrs:{globusToken:e.globusToken,getGlobusIdentities:e.getGlobusIdentities,config:e.config,datasetPrivileges:e.datasetPrivileges,surpressArchived:!1,showUnavailable:!0,useGlobus:!1,userInfo:e.userInfo,redirectPath:"",redirectComponent:""},on:{activateDataset:e.activateDataset,activateStudy:e.activateStudy}}),e._v(" "),e.dataset?s("div",[s("h1",[e._v(e._s(e.study)+" | "+e._s(e.config.datasets[e.dataset].name))]),e._v(" "),s("div",[s("table",{staticClass:"catch-table"},[e._m(0),e._v(" "),e._l(Object.keys(e.catchTrialSummary),function(t){return s("tr",{key:t},[s("td",{staticClass:"catch-table"},[e._v(e._s(t))]),e._v(" "),s("td",{staticClass:"catch-table"},[s("table",{staticClass:"sub-table"},[e._m(1,!0),e._v(" "),e._m(2,!0),e._v(" "),e.showOther?s("tr",[s("td",[e._v("Other")])]):e._e()])]),e._v(" "),s("td",{staticClass:"catch-table"},[s("table",{staticClass:"sub-table"},[s("tr",[s("td",[e._v(e._s(e.catchTrialSummary[t].T1.pass))])]),e._v(" "),s("tr",[s("td",[e._v(e._s(e.catchTrialSummary[t].T2.pass))])]),e._v(" "),e.showOther?s("tr",[s("td",[e._v(e._s(e.catchTrialSummary[t].Other.pass))])]):e._e()])]),e._v(" "),s("td",{staticClass:"catch-table"},[s("table",{staticClass:"sub-table"},[s("tr",[s("td",[e._v(e._s(e.catchTrialSummary[t].T1.fail))])]),e._v(" "),s("tr",[s("td",[e._v(e._s(e.catchTrialSummary[t].T2.fail))])]),e._v(" "),e.showOther?s("tr",[s("td",[e._v(e._s(e.catchTrialSummary[t].Other.fail))])]):e._e()])])])})],2),e._v(" "),s("br")]),e._v(" "),s("div",{staticClass:"buttons"},e._l(Object.keys(e.catchTrials),function(t){return s("div",{key:t},[s("b-button",{attrs:{variant:t===e.selectedImageClass?"primary":"outline-primary"},on:{click:function(s){return e.chooseImageClass(t)}}},[e._v(e._s(t))])],1)}),0),e._v(" "),s("br"),e._v(" "),e.selectedImageClass?s("div",[s("b-button",{attrs:{variant:"T1"===e.selectedT1or2?"primary":"outline-primary"},on:{click:function(t){e.selectedT1or2="T1"}}},[e._v("T1")]),e._v(" "),s("b-button",{attrs:{variant:"T2"===e.selectedT1or2?"primary":"outline-primary"},on:{click:function(t){e.selectedT1or2="T2"}}},[e._v("T2")]),e._v(" "),e.showOther?s("b-button",{attrs:{variant:"Other"===e.selectedT1or2?"primary":"outline-primary"},on:{click:function(t){e.selectedT1or2="Other"}}},[e._v("Other")]):e._e(),e._v(" "),s("hr"),e._v(" "),e.selectedT1or2?s("div",[Object.hasOwn(e.catchTrials[e.selectedImageClass],e.selectedT1or2)?s("div",e._l(Object.keys(e.catchTrials[e.selectedImageClass][e.selectedT1or2]),function(t){return s("div",{key:t},[s("h3",[e._v(e._s(t))]),e._v(" "),s("h3",{class:e.catchTrials[e.selectedImageClass][e.selectedT1or2][t]},[e._v(e._s("pass"==e.catchTrials[e.selectedImageClass][e.selectedT1or2][t]?"PASS":"FAIL"))]),e._v(" "),s("br"),e._v(" "),s("ImageSwipe",{ref:"widget",refInFor:!0,attrs:{widgetPointer:t,widgetSummary:e.catchSummary[t],playMode:"",dataset:e.dataset,study:e.study,config:e.config}}),e._v(" "),s("b-button",{attrs:{to:"/"+e.study+"/"+e.dataset+"/review/"+t}},[e._v("Review")]),e._v(" "),s("hr")],1)}),0):s("div",[e._v("\n          No "+e._s(e.selectedImageClass)+" "+e._s(e.selectedT1or2)+" catch trials.\n        ")])]):e._e()],1):e._e()]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",{staticClass:"catch-table"},[this._v("Image Type")]),this._v(" "),t("th",{staticClass:"catch-table"},[this._v("T1/T2")]),this._v(" "),t("th",{staticClass:"catch-table"},[this._v("Pass")]),this._v(" "),t("th",{staticClass:"catch-table"},[this._v("Fail")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("T1")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("T2")])])}]};var As=s("VU/8")(Ts,ks,!1,function(e){s("QR9X")},"data-v-1a144492",null).exports,Ds=function(){var e=l()(u.a.mark(function e(){var t,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.auth().currentUser.getIdTokenResult(!0);case 2:return t=e.sent,s=t.claims,e.abrupt("return",s);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();a.default.use(N.a);var Ms=new N.a({scrollBehavior:function(){return{x:0,y:0}},mode:"history",routes:[{path:"*",redirect:"/"},{path:"/",name:"Home",component:$},{path:"/about",name:"About",component:U},{path:"/profile",name:"Profile",component:ie,meta:{requiresAuth:!0}},{path:"/:study/:dataset/play",name:"Play",component:ue,meta:{requiresAuth:!0,requiresAccess:!0,requiresTutorial:!0}},{path:"/login",name:"Login",component:de},{path:"/signup",name:"SignUp",component:be},{path:"/terms",name:"Terms",component:fe},{path:"/unauthorized",name:"Unauthorized",component:we},{path:"/leaderboard",name:"Leaderboard",component:Se},{path:"/tutorial/:module",name:"Tutorial",component:Re,props:function(e){return{module:e.params.module}}},{path:"/visualization",name:"Visualization",component:Ht,meta:{requiresAdmin:!0}},{path:"/chats",name:"Chats",component:Qe,meta:{requiresAuth:!0,requiresTutorial:!0}},{path:"/:study/:dataset/review/:key/",name:"Review",component:ze,props:function(e){return{widgetPointer:e.params.key,study:e.params.study,dataset:e.params.dataset}},meta:{requiresAccess:!0,requiresTutorial:!0}},{path:"/admin",name:"Admin",component:z,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/users",name:"Users",component:Ye,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/manifest",name:"Manifest",component:Xe,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/restricted",name:"Restricted",component:Zt,meta:{requiresAuth:!0}},{path:"/results",name:"Results",component:es,meta:{requiresAuth:!0}},{path:"/practice/:module",name:"Practice",component:as,props:function(e){return{module:e.params.module}}},{path:"/gallery",name:"Gallery",component:ns},{path:"/:study/about/",name:"Promo",component:cs,props:function(e){return{study:e.params.study}}},{path:"/access-request",name:"AccessRequest",component:hs,meta:{requiresAuth:!0}},{path:"/admin/access-review",name:"AccessReview",component:fs,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/tutorial-select",name:"TutorialSelect",component:bs,meta:{requiresAuth:!0}},{path:"/admin/sample-view",name:"SampleView",component:_s,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/catch-trials",name:"CatchTrials",component:As,meta:{requiresAuth:!0,requiresAdmin:!0}}]});Ms.beforeEach(function(e,t,s){var a=i.a.auth().currentUser,r=e.matched.some(function(e){return e.meta.requiresAuth}),n=e.matched.some(function(e){return e.meta.requiresAdmin}),o=e.matched.some(function(e){return e.meta.requiresAccess}),u=e.matched.some(function(e){return e.meta.requiresTutorial});if(r&&!a&&s({path:"/login",query:t.query}),u&&(a?i.a.database().ref("/users/"+a.displayName).once("value").then(function(e){var a=e.val(),i=!0;Object.hasOwn(a,"tutorials")&&Object.hasOwn(a.tutorials,"basic")&&"complete"===a.tutorials.basic&&(i=!1),i&&s({name:"Tutorial",params:{module:"basic"},query:t.query})}):s({path:"/login",query:t.query})),o){var c=e.params.study;Ds().then(function(e){e.datasets[c]||s({path:"/unauthorized",query:t.query})})}n?Ds().then(function(e){e.admin||D()(e.studyAdmin).includes(!0)?s():s({path:"/unauthorized",query:t.query})}):s()});var Is=Ms,xs={apiKey:"AIzaSyAHYmTOolAYDczaOp-I22YZQCMAXTSzlt8",authDomain:"brainswipes.firebaseapp.com",databaseURL:"https://brainswipes-default-rtdb.firebaseio.com",projectId:"brainswipes",storageBucket:"brainswipes.appspot.com",messagingSenderId:"518258041913",appId:"1:518258041913:web:ae6cbc61a715d9941659e8",measurementId:"G-YNZSDHFLC7"};a.default.config.productionTip=!1;var Os=void 0;i.a.initializeApp(xs),i.a.auth().onAuthStateChanged(function(){Os||(Os=new a.default({el:"#app",template:"<App/>",components:{App:E},router:Is}))})},O1b6:function(e,t){},QR9X:function(e,t){},QohQ:function(e,t){},RRBy:function(e,t){},RdNL:function(e,t,s){"use strict";var a=s("Gu7T"),i=s.n(a),r={data:function(){return{userChecks:[]}},props:{config:{type:Object,required:!0},imageClass:{type:String,required:!0},checks:{type:Array,required:!1},sample:{type:String,required:!1}},methods:{handleClick:function(e){if(!this.checks){var t=[].concat(i()(this.userChecks));"checked"===t[e]?t[e]="unchecked":t[e]="checked",this.userChecks=t,this.$emit("checkBoxClick",this.sample,t)}},setUserDefinedChecks:function(){this.userChecks=Array(this.config.learn.checklists[this.imageClass].length).fill("checked-question")}},mounted:function(){this.setUserDefinedChecks()}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"checklist",staticClass:"checklist"},[s("div",{staticClass:"checklist-wrapper"},[s("div",{staticClass:"checklist-list"},e._l(e.config.learn.checklists[e.imageClass],function(t,a){return s("div",{key:a,staticClass:"checklist-item",on:{click:function(t){return e.handleClick(a)}}},[s("div",{class:e.checks?e.checks[a]?"checked":"unchecked":e.userChecks[a]}),e._v(" "),s("p",[e._v(e._s(e.config.learn.checklists[e.imageClass][a]))])])}),0)])])},staticRenderFns:[]};var o=s("VU/8")(r,n,!1,function(e){s("BWKC")},"data-v-1c3dc3fc",null);t.a=o.exports},SAhQ:function(e,t){},ThbC:function(e,t){},VYwL:function(e,t,s){"use strict";(function(e){var a=s("Xxa5"),i=s.n(a),r=s("exGp"),n=s.n(r),o=s("fZjL"),u=s.n(o),c=s("uLgv"),l=(s("dih4"),s("hZls"),s("M4fF")),d=s.n(l),h=s("bOaz"),m=s("RdNL");t.a={name:"review",props:{userData:{type:Object,required:!0},config:{type:Object,required:!0},db:{type:Object,required:!0},dataset:{type:String,required:!0},study:{type:String,required:!0},globusToken:{type:String,required:!0},getGlobusIdentities:{type:Function,required:!0}},components:{ImageSwipe:h.a,Checklist:m.a},data:function(){return{widgetPointer:"",widgetSummary:{},chatMessage:"",chatHistory:[],allowed:!1,loading:!0,formDisabled:!0,flagged:!1,isAdmin:!1,source:"",notify:{},showChatTime:!1,catchTrials:{}}},computed:{chatOrder:function(){var e=[];return d.a.mapValues(this.chatHistory,function(t){t.date=new Date(t.time).toLocaleDateString(),e.push(t)}),e.reverse(),e},imageType:function(){return this.getImageType()}},watch:{$route:function(){this.widgetPointer=this.$route.params.key}},mounted:function(){this.widgetPointer=this.$route.params.key,this.setSampleInfo(this.dataset),this.checkFlaggedStatus(),this.getCatchTrials(),this.getUserRoles(),this.getSource()},methods:{sendChat:function(e){var t=this;e.preventDefault();var s=this.$route.params.key;this.db.ref("datasets/"+this.dataset+"/chats/chats/"+s+"/chats").push({username:this.userData.username,message:this.chatMessage,time:(new Date).toISOString(),deleted:!1}),u()(this.notify).length&&u()(this.notify).forEach(function(e){t.notify[e]=!0}),this.notify[this.userData.username]=!1,this.db.ref("datasets/"+this.dataset+"/chats/chats/"+s+"/notify").set(this.notify),this.chatMessage=""},unravelFirebaseListObject:function(e){var t=[];return d.a.mapValues(e,function(e){t.push(e)}),t},setSampleInfo:function(e){var t=this;this.db.ref("datasets/"+e+"/chats/chats/"+this.widgetPointer).on("value",function(e){var s=e.val();if(s&&Object.hasOwn(s,"chats")){var a=d.a.filter(e.val().chats,{deleted:!1});t.chatHistory=a,t.notify=s.notify?s.notify:{}}}),this.db.ref("datasets/"+e+"/sampleSummary").child(this.widgetPointer).on("value",function(e){t.widgetSummary=e.val()})},getImageType:function(){var e="other";return[e=Object.hasOwn(this.config.datasets[this.dataset],"imageType")?this.config.datasets[this.dataset].imageType:this.widgetPointer.match(/atlas/i)?"atlas":this.widgetPointer.match(/task/i)?"func":"anat",this.formatImageTypeName(this.config.imageTypes[e])]},toTutorial:function(){var e=this.$router.resolve({name:"Tutorial",params:{module:this.imageType[0]}});window.open(e.href,"_blank")},toSource:function(){switch(this.source){case"Play":this.toPlay();break;case"Chats":this.$router.push({name:"Chats",query:{dataset:this.dataset,study:this.study}});break;case"Profile":this.$router.push({name:"Profile"});break;case"Viewer":this.$router.push({name:"SampleView",query:{dataset:this.dataset,study:this.study,sample:this.widgetPointer}})}},toPlay:function(){var t=this.flagged?null:{s:e.from(this.widgetPointer).toString("Base64")};this.$router.push({name:"Play",query:t})},openFlagWarning:function(){this.$refs.flagwarning.show()},closeFlagWarning:function(){this.$refs.flagwarning.hide()},openAdminActions:function(){this.$refs.adminactions.show()},closeAdminActions:function(){this.$refs.adminactions.hide()},setCatchTrial:function(e){this.db.ref("datasets/"+this.dataset+"/catch/sampleCounts").child(this.widgetPointer).set(e)},removeCatchTrial:function(){this.db.ref("datasets/"+this.dataset+"/catch/sampleCounts").child(this.widgetPointer).remove()},flagImage:function(e){this.sendChat(e),this.addToFlagged(),this.closeFlagWarning()},enableForm:function(){this.formDisabled=0===this.chatMessage.length},addToFlagged:function(){this.db.ref("datasets/"+this.dataset+"/flaggedSamples").child(this.widgetPointer).set(this.flagged?null:this.userData.username)},checkFlaggedStatus:function(){var e=this;this.db.ref("datasets/"+this.dataset+"/flaggedSamples").on("value",function(t){var s=!1;t.val()&&u()(t.val()).includes(e.widgetPointer)&&(s=!0),e.flagged=s})},getUserRoles:function(){var e=this;return n()(i.a.mark(function t(){var s,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.auth().currentUser.getIdTokenResult(!0);case 2:s=t.sent,a=s.claims,e.isAdmin=a.admin||a.studyAdmin[e.study];case 5:case"end":return t.stop()}},t,e)}))()},addToGallery:function(){var e={hidden:!0,dataset:this.dataset,study:this.study};this.db.ref("config/learn/gallery/"+this.widgetPointer).set(e)},getSource:function(){if(this.$route.query.f)switch(this.$route.query.f){case"h":this.source="Play";break;case"p":this.source="Profile";break;case"c":this.source="Chats";break;case"v":this.source="Viewer";break;default:this.source=""}},getCatchTrials:function(){var e=this;this.db.ref("datasets/"+this.dataset+"/catch/sampleCounts").on("value",function(t){var s=t.val();s&&(e.catchTrials=s)})},formatImageTypeName:function(e){var t=e[0],s="a ";return["A","E","I","O","U","a","e","i","o","u"].includes(t)&&(s="an "),s+e}},beforeRouteEnter:function(e,t,s){var a=this;s(function(){var t=n()(i.a.mark(function t(s){var r,n,o,u,l,d,h,m,p,f,g,v,b,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s._props.db.ref("config/studies/"+e.params.study+"/available").once("value");case 2:return r=t.sent,n=!r.val(),o=[],u=c.a.auth().currentUser,t.next=8,c.a.auth().currentUser.getIdTokenResult(!0);case 8:if(l=t.sent,d=l.claims.datasets[e.params.study],e.params.dataset===s.dataset){t.next=14;break}s.$router.push({name:"Home"}),t.next=30;break;case 14:if(!n){t.next=30;break}if(!s.globusToken.length){t.next=30;break}return h=u.email,t.next=19,s._props.getGlobusIdentities(s._props.globusToken);case 19:m=t.sent,p=m.identities,f=m.included.identity_providers,g=l.claims.org,v=!1,p.forEach(function(e){var t="";Object.hasOwn(e,"email")&&null!=e.email&&(t=e.email.toString()),t.toLowerCase()===h.toLowerCase()&&(v=!0)}),b=!1,y=!1,f.forEach(function(e){if(e.name===g){b=!0;var t=e.domains;p.forEach(function(e){var s="";Object.hasOwn(e,"email")&&null!=e.email&&(s=e.email),t.forEach(function(t){s.includes(t)&&"used"===e.status&&(y=!0)})})}}),0===p.length?o.push("noIdentities"):v?b?y||o.push("orgNotUsed"):o.push("noSwipesOrg"):o.push("noSwipesEmail"),o.length&&s.$router.push({name:"Restricted",query:{errors:o}});case 30:d&&(s.allowed=!0,s.loading=!1);case 31:case"end":return t.stop()}},t,a)}));return function(e){return t.apply(this,arguments)}}())}}}).call(t,s("EuP9").Buffer)},Xr1S:function(e,t){},YBS4:function(e,t){},YZaq:function(e,t){},YcS6:function(e,t){},ai1s:function(e,t){},bOaz:function(e,t,s){"use strict";var a=s("woOf"),i=s.n(a),r=s("mvHQ"),n=s.n(r),o=s("//Fk"),u=s.n(o),c=s("Xxa5"),l=s.n(c),d=s("exGp"),h=s.n(d),m=s("M4fF"),p=s.n(m),f=s("7+uW"),g=s("MUua"),v=s("iPd/"),b=s.n(v),y={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],staticClass:"v-spinner"},[t("div",{staticClass:"v-pulse v-pulse1",style:[this.spinnerStyle,this.spinnerDelay1]}),t("div",{staticClass:"v-pulse v-pulse2",style:[this.spinnerStyle,this.spinnerDelay2]}),t("div",{staticClass:"v-pulse v-pulse3",style:[this.spinnerStyle,this.spinnerDelay3]})])},staticRenderFns:[]};var _=s("VU/8")(y,w,!1,function(e){s("KZHh")},null,null).exports;f.default.use(g.VueHammer),f.default.use(s("m0IH"));var C={name:"ImageSwipe",props:{widgetPointer:{type:String,required:!0},widgetSummary:{type:Object,required:!1},playMode:{type:String,required:!1},tutorialStep:{type:Number,required:!1},dataset:{type:String,required:!0},study:{type:String,required:!1},config:{type:Object,required:!0},identifier:{type:String,required:!1},zoom:{type:Boolean,required:!1}},components:{VueHammer:g.VueHammer,GridLoader:_},directives:{imagesLoaded:b.a},data:function(){return{status:"loading",swipe:null,imgUrl:null,imgKey:null,rightFocused:!1,leftFocused:!1,helpFocused:!1,lastClick:0,delay:500}},mounted:function(){var e=this;this.$nextTick(function(){"tutorial"===e.playMode&&e.showTutorialStep(e.tutorialStep)})},created:function(){var e=this;return h()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createUrl(e.widgetPointer);case 2:e.lastClick=Date.now();case 3:case"end":return t.stop()}},t,e)}))()},methods:{postRequest:function(e){var t=this.config.datasets[this.dataset].bucket,s=e+".png";if(Object.hasOwn(this.config.datasets[this.dataset],"s3filepath")){var a=this.config.datasets[this.dataset].s3filepath,i=/(sub-.*?)_/,r=/_(ses-.*?)_/,o=e.match(r),c=e.match(i),l="",d="";o&&(l=e.match(r)[1]),c&&(d=e.match(i)[1]),s=a.replaceAll("{{SUBJECT}}",d).replaceAll("{{SESSION}}",l).replaceAll("{{FILENAME}}",e)}var h="";return Object.hasOwn(this.config.datasets[this.dataset],"s3cfg")&&(h=this.config.datasets[this.dataset].s3cfg),new u.a(function(e,a){var i=new XMLHttpRequest;i.open("POST","/Image",!0),i.setRequestHeader("Content-Type","application/json"),i.onload=e,i.onerror=a,i.send(n()({filepath:s,bucket:t,s3cfg:h}))})},createUrl:function(e){var t=this;return h()(l.a.mark(function s(){var a,i;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.postRequest(e).then(function(e){return e.currentTarget.responseText});case 2:a=s.sent,i=a.split("?")[0],t.imgUrl=a,t.imgKey=i;case 6:case"end":return s.stop()}},s,t)}))()},imageError:function(){this.imgUrl="/static/not-found.png"},showTutorialStep:function(e){switch(e){case 0:this.leftFocused=!0;break;case 1:this.rightFocused=!0;break;case 2:this.helpFocused=!0}},fillPropertyPattern:function(e,t){var s=e,a=String(this.widgetPointer).split(t);return p.a.map(a,function(e,t){s=s.replace("{"+t+"}",e)}),s},getSummary:function(e){if(!this.widgetSummary)return{aveVote:e,count:1};var t=this.widgetSummary.aveVote*this.widgetSummary.count+e;t/=this.widgetSummary.count+1;var s=i()({},this.widgetSummary);return s.aveVote=t,s.count+=1,s},vote:function(e){"tutorial"===this.playMode?this.$emit("widgetRating",[e,this.identifier,this.tutorialStep]):this.$emit("widgetRating",e)},swipeLeft:function(){Date.now()-this.lastClick>=this.delay&&(this.setSwipe("swipe-left"),this.vote(0),this.lastClick=Date.now())},swipeRight:function(){Date.now()-this.lastClick>=this.delay&&(this.setSwipe("swipe-right"),this.vote(1),this.lastClick=Date.now())},onSwipe:function(e){2===e.direction?this.swipeLeft():this.swipeRight()},setSwipe:function(e){this.swipe=e}},watch:{widgetPointer:function(){var e=this;return h()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createUrl(e.widgetPointer);case 2:case"end":return t.stop()}},t,e)}))()}}},S={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"imageSwipe"},[s("transition",{key:e.swipe,attrs:{name:e.swipe}},[s("div",{key:e.imgKey,staticClass:"user-card",class:e.zoom?"zoom":""},[s("div",{staticClass:"image_area"},[s("img",{directives:[{name:"hammer",rawName:"v-hammer:swipe.horizontal",value:e.onSwipe,expression:"onSwipe",arg:"swipe",modifiers:{horizontal:!0}}],staticClass:"user-card__picture mx-auto",attrs:{src:e.imgUrl},on:{error:e.imageError}})]),e._v(" "),s("div",{staticClass:"user-card__name"},[e.playMode?s("b-button",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["arrowleft"],expression:"['arrowleft']",modifiers:{once:!0}},{name:"hammer",rawName:"v-hammer:swipe.left",value:e.swipeLeft,expression:"swipeLeft",arg:"swipe",modifiers:{left:!0}}],ref:"leftSwipe",class:{focus:e.leftFocused},staticStyle:{float:"left"},attrs:{variant:"danger"},on:{click:e.swipeLeft,shortkey:e.swipeLeft}},[s("i",{staticClass:"fa fa-long-arrow-left",attrs:{"aria-hidden":"true"}}),e._v("\n            Fail\n           ")]):s("span",{staticStyle:{float:"left"}},[e.widgetSummary?s("span",[e._v(" ave vote: "+e._s(e.widgetSummary.aveVote||0)+" ")]):s("span",[e._v("ave vote: N/A")])]),e._v(" "),e.playMode?s("b-button",{ref:"helpButton",staticClass:"helpbtn",class:{focus:e.helpFocused},attrs:{to:"tutorial"==e.playMode?"":"/"+e.study+"/"+e.dataset+"/review/"+e.widgetPointer+"?f=h"}},[e._v("Help")]):e._e(),e._v(" "),e.playMode?s("b-button",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["arrowright"],expression:"['arrowright']",modifiers:{once:!0}}],ref:"rightSwipe",class:{focus:e.rightFocused},staticStyle:{float:"right"},attrs:{variant:"success"},on:{click:e.swipeRight,shortkey:e.swipeRight}},[e._v(" Pass\n            "),s("i",{staticClass:"fa fa-long-arrow-right",attrs:{"aria-hidden":"true"}})]):s("span",{staticStyle:{float:"right"}},[e.widgetSummary?s("span",[e._v(" num votes: "+e._s(e.widgetSummary.count||0)+" ")]):s("span",[e._v("num votes: 0")])])],1)])])],1)},staticRenderFns:[]};var T=s("VU/8")(C,S,!1,function(e){s("piKq")},"data-v-8c7a2726",null);t.a=T.exports},be0Y:function(e,t){e.exports="data:image/png;base64,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"},dTL9:function(e,t){e.exports={"Brain Anatomy":{Brainstem:"The portion of the brain that connects the brain to the spinal cord. It is made up of the pons, midbrain, and medulla oblongata. Its primary function is to regulate involuntary actions such as breathing, balance and heart rate.",Cerebellum:"Also referred to as â€œthe little brainâ€, the portion of the brain located between the cerebrum and brainstem that consists of 2 hemispheres and controls complex voluntary motor functions such as maintaining posture, balance and walking.","Cerebral Cortex":"The coiled outer gray matter that covers the cerebrum. Cortex is the Latin for â€œbarkâ€. This structure is involved in higher-level processes such as consciousness, language, memory, thought, learning, decision making, reasoning, intelligence, emotion, and personality.",Dura:"The outermost layer of connective tissue that makes up the meninges. It functions as a protective envelope for the central nervous system and supplies a system for venous drainage from the brain through the dural sinuses.","Frontal Lobe":"The largest of the 4 major lobes, it is the anterior-most portion of the brain and is responsible for high-level cognitive functions including reasoning, problem solving, motor skills, attention, memory, emotional regulation, communication and social interaction.","Gray Matter":"The outermost layer of the brain that contains a high concentration of neuronal cell bodies, axon terminals, and dendrites. Within the gray matter is where all synapses take place in the brain. Its functions include receiving information and regulating outgoing information.",Gyri:"Raised ridges of gray matter found on the cerebral cortex that are responsible for increasing the surface area of the brain.","Prefrontal Region":"The frontmost section of the frontal lobe. It is involved in a variety of complex functions including personality and planning.",Skull:"The skeletal structure that protects the brain from injury.",Sulci:"Grooves or depressions in the cerebral cortex that surround gyri that help to increase the surface area of the brain and to form brain divisions","Subcortical Regions":"Brain structures located below the cortex. These regions are studied seperate from the cortical surface.","Superior Parietal":"This is the region of the brain that forms the association of the parietal lobe and the cortex. It is involved in visuospatial perception/spatial reasoning and attention.","Temporal Lobe":"Often referred to as the â€œneocortexâ€, the temporal lobe is located in the middle cranial fossa and contains the hippocampus and amygdala. The temporal lobe responsible for preserving and processing memories and integrating them with sensations such as taste, sound, smell, and sight.","White Matter":"Brain tissue consisting primarily of myelin-covered axons that extend from nerve cell bodies in the gray matter of the central nervous system. Its function is to transmit information to other parts of the brain, spinal cord, and body.","Axial Plane":"A horizontal cross section view of the brain using MRI that primarily allows visualization of superior lobes of the cerebrum.","Coronal Plane":"A frontal view of the brain using MRI that primarily allows visualization of the corpus callosum, frontal lobe, temporal lobes, lateral and 3rd ventricles, white matter structures and basal ganglia.","Sagittal Plane":"A vertical cross view of the brain using MRI that divides the brain between left and right sides that primarily allows visualization of the 3 major parts of the brain; cerebrum, cerebellum and brainstem, gray and white matter, and the 3rd and 4th ventricles.","Cerebrospinal Fluid":"A clear, colorless, watery fluid that flows in and around your brain and spinal cord."},"Neuroimaging Terms":{Atlas:"A mapping of the brain that provides a standardized set of coordinates to determine specific sites.","Image Overlay":"A computer display tactic that superimposes images over the viewer's direct view to create an augmented image.","Surface Delineation":"The line indicating the exact position of the boundary of the cortical surface.","Structural Image":"Also known as an Anatomical Image. This is used to study the shape, integrity, volume and developmental changes in the brain.","T1-Weighted Image":"A structural image where data is collected with relatively short radio pulses. In adults these images are characterized by darker cerebrospinal fluid.","T2-Weighted Image":"A structural image where data is collected with relatively long radio pulses. In adults these images are characterized by lighter cerebrospinal fluid.","Structural MRI":"Magnetic Resonance Imaging. A non-invasive imaging technique that provides static anatomical information.","Functional MRI":"A non-invasive imaging technique for mapping brain activity by measuring changes in metabolism, chemical composition and blood flow.",Registration:"Comparing a subject's images to another image by geometrically aligning them. The image can be compared to functional or structural images of the same subject or to a common atlas.","Field Of View":"The dimensions of the region included in a scan.",BOLD:"Blood Oxygen Level Dependent signal. Detected in fMRI, BOLD measures how blood flow and oxygen levels in the brain change while performing tasks.","Functional Image":"Images acquired through functional MRI. Used to measure changes in metabolism, chemical composition, blood flow and absorption.","Anatomical Image":"Images of the anatomical structure of the brain. Used to study the shape, integrity, volume and developmental changes in the brain.",Slice:"A two dimensional image of a cross section of tissue collected during MRI.","Diffusion Weighted Imaging":"An MRI technique that uses the diffusion of water molecules to generate contrast in images."}}},esI0:function(e,t){},fbqe:function(e,t){},feh2:function(e,t){},gA1u:function(e,t,s){"use strict";var a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"flask"}},[s("div",{staticClass:"background"}),e._v(" "),s("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 113 130","xml:space":"preserve"}},[s("g",[s("path",{attrs:{fill:"#FFFFFF",d:"M0,0v130h112.084L111.75,0H0z M94.75,128C71,128,56,128,56,128s-14.873,0-38.623,0s-13.945-19.422-6.33-35.945S40,41.25,40,41.25V3h16h11v38.25c0,0,23.901,34.283,31.517,50.805S118.5,128,94.75,128z"}}),e._v(" "),s("path",{attrs:{fill:"none",stroke:"#000000","stroke-width":"3","stroke-miterlimit":"10",d:"M56,127.5c0,0-14.873,0-38.623,0s-13.695-19.172-6.08-35.695C18.912,75.283,40.5,41.25,40.5,41.25V2.5h-9H56h19.5h-8v38.75c0,0,23.651,34.033,31.267,50.555c7.615,16.523,19.733,35.695-4.017,35.695S56,127.5,56,127.5z"}})])]),e._v(" "),s("div",{staticClass:"bubble b0"}),e._v(" "),s("div",{staticClass:"bubble b1"}),e._v(" "),s("div",{staticClass:"bubble b2"}),e._v(" "),s("div",{staticClass:"bubble b3"}),e._v(" "),s("div",{staticClass:"bubble b4"}),e._v(" "),s("div",{staticClass:"bubble b5"}),e._v(" "),s("div",{staticClass:"bubble b6"}),e._v(" "),s("div",{staticClass:"bubble b7"}),e._v(" "),s("div",{staticClass:"bubble b8"}),e._v(" "),s("div",{staticClass:"bubble b9"}),e._v(" "),s("div",{staticClass:"swirl s0"}),e._v(" "),s("div",{staticClass:"swirl s1"}),e._v(" "),s("div",{staticClass:"swirl s2"}),e._v(" "),s("div",{staticClass:"swirl s3"}),e._v(" "),s("div",{staticClass:"swirl s4"}),e._v(" "),s("div",{staticClass:"swirl s5"})])},staticRenderFns:[]};var i=s("VU/8")({name:"flask"},a,!1,function(e){s("RRBy")},"data-v-5ce0d404",null);t.a=i.exports},gX6R:function(e,t){},iGwl:function(e,t){},jKtY:function(e,t){},jf0B:function(e,t){},m2t0:function(e,t){},mQuT:function(e,t){},mgsM:function(e,t){},piKq:function(e,t){},pyWk:function(e,t){},qqbI:function(e,t){},r9qK:function(e,t){},rlCp:function(e,t){},uBUP:function(e,t){},uN9Y:function(e,t){},uZEV:function(e,t){},"v+SN":function(e,t){},vyfe:function(e,t){},xEaY:function(e,t){},"xu+l":function(e,t){},yBh0:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDMyIDIxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zOnNlcmlmPSJodHRwOi8vd3d3LnNlcmlmLmNvbS8iIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWNhcDpyb3VuZDsiPgogICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwtMjI0LjkxMywtMjA4Ljk5OSkiPgogICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMzAsMTg3KSI+CiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTkzLjkxNywyMC43MSkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTMwLjI0NCwzLjM3QzI5LjM3MywzLjQxNiAyOC42OCw0LjE0NSAyOC42OCw1LjAxOEMyOC42OCw1LjY3NCAyOS4wNzIsNi4yNzEgMjkuNjc1LDYuNTMyTDI0Ljc1OSwxMC4yNDFDMjQuMjAzLDEwLjY2MSAyMy41MjQsMTAuODg4IDIyLjgyNywxMC44ODhDMjEuNzMyLDEwLjg4OCAyMC43MSwxMC4zMjcgMjAuMTIyLDkuNDA0TDE3LjAwNyw0LjUyMUMxNy43MjQsNC4zMyAxOC4yMjYsMy42NzYgMTguMjI2LDIuOTM0QzE4LjIyNiwyLjAzNCAxNy40ODUsMS4yOTIgMTYuNTg0LDEuMjkyQzE1LjY4NCwxLjI5MiAxNC45NDIsMi4wMzQgMTQuOTQyLDIuOTM0QzE0Ljk0MiwzLjY3NiAxNS40NDUsNC4zMyAxNi4xNjIsNC41MjFMMTMuMDQyLDkuNDA0QzEyLjQ1NCwxMC4zMjcgMTEuNDMyLDEwLjg4OCAxMC4zMzcsMTAuODg4QzkuNjQsMTAuODg4IDguOTYxLDEwLjY2MSA4LjQwNSwxMC4yNDFMMy40OSw2LjUzM0M0LjE5Nyw2LjI2MSA0LjY2Niw1LjU3OCA0LjY2Niw0LjgyQzQuNjY2LDMuODE0IDMuODM4LDIuOTg1IDIuODMxLDIuOTg1QzEuODI0LDIuOTg1IDAuOTk2LDMuODE0IDAuOTk2LDQuODJDMC45OTYsNS44MjcgMS44MjQsNi42NTUgMi44MzEsNi42NTVDMi44NDQsNi42NTUgMi44NTgsNi42NTUgMi44NzEsNi42NTVMMi45NDUsNi42NTVDMy45OTcsOS43NTIgNC41ODgsMTIuOTg2IDQuNjk5LDE2LjI1NUM0Ljc0MiwxNy40OTkgNC43MTMsMTguNzQ0IDQuNjEzLDE5Ljk4NEwyOC41NTMsMTkuOTg0QzI4LjQzMSwxOC43NDQgMjguMzg3LDE3LjQ5OCAyOC40MjEsMTYuMjUyQzI4LjUxLDEyLjk3NyAyOS4xMTcsOS43MzcgMzAuMjIxLDYuNjUyQzMwLjI0Niw2LjY1NCAzMC4yNzEsNi42NTQgMzAuMjk1LDYuNjUyQzMwLjM0LDYuNjU2IDMwLjM4NSw2LjY1OCAzMC40Myw2LjY1OEMzMS4zMzUsNi42NTggMzIuMDgsNS45MTMgMzIuMDgsNS4wMDhDMzIuMDgsNC4xMDIgMzEuMzM1LDMuMzU4IDMwLjQzLDMuMzU4QzMwLjM2OCwzLjM1OCAzMC4zMDYsMy4zNjEgMzAuMjQ0LDMuMzY4TDMwLjI0NCwzLjM3WiIgc3R5bGU9ImZpbGw6cmdiKDI1MiwxODgsMjYpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuMDM5LDMuOTQ2QzMuNjQ0LDQuMzE4IDMuODg3LDUuMDc2IDMuNjEsNS43M0MzLjUyNyw1Ljg2IDMuNDczLDYuMDA4IDMuNDUzLDYuMTYyQzMuNDYxLDYuMjgyIDMuNTAzLDYuMzk2IDMuNTc1LDYuNDkyQzQuMTQ4LDYuMjIyIDQuNTE1LDUuNjQzIDQuNTE1LDUuMDFDNC41MTUsNC4xMTEgMy43NzUsMy4zNzEgMi44NzYsMy4zNzFDMi4zNTgsMy4zNzEgMS44NywzLjYxNiAxLjU2MSw0LjAzMUMyLDMuNzMzIDIuNTY5LDMuNzAxIDMuMDM5LDMuOTQ3TDMuMDM5LDMuOTQ2Wk01LjMxMSw4Ljk4MkM1LjczNCw5LjY3MiA2LjI3NiwxMC4yODEgNi45MTEsMTAuNzgyQzguMDIxLDExLjQ5NSA5LjQ0LDExLjUzNCAxMC41ODcsMTAuODgyQzkuODA1LDEwLjk0NSA5LjAyNywxMC43MTggOC40MDIsMTAuMjQ1TDMuNzI0LDYuNzExQzQuMjU0LDcuNDY2IDQuNzgyLDguMjIzIDUuMzExLDguOTgyWk0yOS45MTMsNy41MzZDMjkuNTQ4LDcuOTc1IDI5LjA4OCw4LjM2MSAyOC43MTMsOC43ODNDMjcuODA2LDkuOTA2IDI3LjI2OSwxMS4yODMgMjcuMTc1LDEyLjcyM0MyNy4wOTMsMTQuNjYzIDI3LjUyOCwxNi41OSAyOC40MzYsMTguMzA3QzI4LjQwOCwxNy42MjMgMjguNDAzLDE2LjkzOCAyOC40MjEsMTYuMjU0QzI4LjUwNywxMy4yOTIgMjkuMDA5LDEwLjM1NyAyOS45MTMsNy41MzVMMjkuOTEzLDcuNTM2Wk0zMS45MzcsNS4wMTNDMzEuODcxLDQuMTU5IDMxLjE0OSwzLjQ5MSAzMC4yOTIsMy40OTFDMjkuNDY1LDMuNDkxIDI4Ljc1OSw0LjExMyAyOC42NTUsNC45MzRMMjguNjU1LDUuMDE2QzI4Ljk3MSw0Ljg0MiAyOS4zMzgsNC43ODMgMjkuNjkzLDQuODUxQzMwLjM3OCw1LjE1NCAzMC43MDQsNS45NTYgMzAuNDI2LDYuNjUxQzMxLjI3NCw2LjU3OSAzMS45MzQsNS44NjQgMzEuOTM3LDUuMDEzWk0xNy4wMDMsMy4zNzVDMTcuMDU3LDMuNjI0IDE3LjA1NiwzLjg4MyAxNy4xMjcsNC4xMjlDMTcuMTU5LDQuMjM2IDE3LjIwMyw0LjMzOSAxNy4yNTYsNC40MzZDMTcuODU0LDQuMTc2IDE4LjI0MiwzLjU4MyAxOC4yNDIsMi45MzFDMTguMjQyLDIuMDMgMTcuNTAxLDEuMjg5IDE2LjYsMS4yODlDMTYuMDA4LDEuMjg5IDE1LjQ1OSwxLjYwOSAxNS4xNjksMi4xMjZDMTUuOTk5LDIuMDU0IDE2Ljc2NiwyLjU3NiAxNy4wMDMsMy4zNzVaIiBzdHlsZT0iZmlsbDp3aGl0ZTtmaWxsLW9wYWNpdHk6MC4zO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICAgICAgPGVsbGlwc2UgY3g9IjE2LjU5OSIgY3k9IjE5Ljk4NiIgcng9IjExLjk4NiIgcnk9IjEuODIzIiBzdHlsZT0iZmlsbDpyZ2IoMjI0LDE1NywxMCk7Ii8+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTYuNjAzLDE3LjgzM0MxNi4xMDMsMTcuODMzIDQuMjg3LDE3Ljg1OCA0LjI4NywxOS45NzhDNC4yODcsMjIuMDk4IDE2LjA5NiwyMi4xMjMgMTYuNjAzLDIyLjEyM0MxNy4xMSwyMi4xMjMgMjguOTE5LDIyLjA5OCAyOC45MTksMTkuOTc4QzI4LjkxOSwxNy44NTggMTcuMTAzLDE3LjgzMyAxNi42MDMsMTcuODMzWk0xNi42MDMsMjEuODA4QzEwLjY0MSwyMS44MDggNS43MDMsMjEuMTQ4IDQuNzc0LDIwLjI4QzQuODc3LDIwLjIyMyA0Ljk0LDIwLjExNCA0LjkzOSwxOS45OTZDNS4xMjQsMTkuNDU2IDkuMTc4LDE4LjQ5NiAxNi41OTcsMTguNDk2QzI0LjAxNiwxOC40OTYgMjguMDY4LDE5LjQ2IDI4LjI1MywxOS45ODFDMjguMjU0LDIwLjEwMyAyOC4zMjIsMjAuMjE1IDI4LjQzLDIwLjI3MUMyNy41MTYsMjEuMTQ1IDIyLjU2OCwyMS44MDggMTYuNjAzLDIxLjgwOFoiIHN0eWxlPSJmaWxsOnJnYigxODEsMTIxLDApO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuNjEzLDE3LjAxNkM0LjYxMywxNi4wMDkgOS45NzksMTUuMjAxIDE2LjU5OSwxNS4yMDFDMjMuMjE5LDE1LjIwMSAyOC41ODUsMTYuMDE4IDI4LjU4NSwxNy4wMTYiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOnJnYigyMjQsMTU3LDEwKTtzdHJva2Utd2lkdGg6MXB4OyIvPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1LjUyMywxMS4yMzlMMTYuNDU1LDEyLjg2NEMxNi40ODUsMTIuOTE1IDE2LjUzOSwxMi45NDYgMTYuNTk3LDEyLjk0NkMxNi42NTYsMTIuOTQ2IDE2LjcxLDEyLjkxNSAxNi43NCwxMi44NjRMMTcuNjc0LDExLjIzOUMxNy43MDMsMTEuMTg4IDE3LjcwMywxMS4xMjUgMTcuNjc0LDExLjA3NEwxNi43NCw5LjQ1QzE2LjcxMSw5LjM5OCAxNi42NTYsOS4zNjYgMTYuNTk3LDkuMzY2QzE2LjUzNyw5LjM2NiAxNi40ODIsOS4zOTggMTYuNDUzLDkuNDVMMTUuNTIxLDExLjA3NEMxNS40OTIsMTEuMTI1IDE1LjQ5MywxMS4xODggMTUuNTIzLDExLjIzOVpNMjAuNzQ0LDEyLjUzNkwyMC4wNjcsMTMuNzEzQzIwLjA0NiwxMy43NSAyMC4wMDYsMTMuNzcyIDE5Ljk2NCwxMy43NzJDMTkuOTIyLDEzLjc3MiAxOS44ODIsMTMuNzUgMTkuODYxLDEzLjcxM0wxOS4xODQsMTIuNTM2QzE5LjE2MiwxMi40OTkgMTkuMTYyLDEyLjQ1NCAxOS4xODQsMTIuNDE3TDE5Ljg1OSwxMS4yNDFDMTkuODgsMTEuMjAzIDE5LjkyLDExLjE4IDE5Ljk2MywxMS4xOEMyMC4wMDYsMTEuMTggMjAuMDQ2LDExLjIwMyAyMC4wNjcsMTEuMjQxTDIwLjc0NCwxMi40MTdDMjAuNzY2LDEyLjQ1NCAyMC43NjYsMTIuNDk5IDIwLjc0NCwxMi41MzZaTTE0LjAxOCwxMi41MzZMMTMuMzQzLDEzLjcxM0MxMy4zMjIsMTMuNzUgMTMuMjgyLDEzLjc3MiAxMy4yNCwxMy43NzJDMTMuMTk4LDEzLjc3MiAxMy4xNTgsMTMuNzUgMTMuMTM3LDEzLjcxM0wxMi40NTQsMTIuNTM2QzEyLjQzMiwxMi40OTkgMTIuNDMyLDEyLjQ1NCAxMi40NTQsMTIuNDE3TDEzLjEyOSwxMS4yNEMxMy4xNSwxMS4yMDIgMTMuMTksMTEuMTc5IDEzLjIzMywxMS4xNzlDMTMuMjc2LDExLjE3OSAxMy4zMTYsMTEuMjAyIDEzLjMzNywxMS4yNEwxNC4wMTIsMTIuNDE3QzE0LjAzNiwxMi40NTIgMTQuMDM5LDEyLjQ5OCAxNC4wMTksMTIuNTM2TDE0LjAxOCwxMi41MzZaIiBzdHlsZT0iZmlsbDp3aGl0ZTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNi40NTksOS40NTFDMTYuNDkyLDkuMzkzIDE2LjU1OCw5LjM2MSAxNi42MjQsOS4zN0wxNi42MjQsMTIuOTQ0QzE2LjU1OCwxMi45NTMgMTYuNDkzLDEyLjkyMiAxNi40NTksMTIuODY1TDE1LjUyNywxMS4yNEMxNS40OTgsMTEuMTg5IDE1LjQ5OCwxMS4xMjYgMTUuNTI3LDExLjA3NUwxNi40NTksOS40NTFaIiBzdHlsZT0iZmlsbDpyZ2IoMjQyLDI0MiwyNDIpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4K"}},["NHnr"]);
//# sourceMappingURL=app.0ed72c1767a8d72b214a.js.map